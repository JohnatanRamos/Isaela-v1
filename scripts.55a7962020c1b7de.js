var ea=Object.defineProperty,ra=Object.defineProperties,na=Object.getOwnPropertyDescriptors,Lr=Object.getOwnPropertySymbols,ia=Object.prototype.hasOwnProperty,sa=Object.prototype.propertyIsEnumerable,Rr=(D,Q,Z)=>Q in D?ea(D,Q,{enumerable:!0,configurable:!0,writable:!0,value:Z}):D[Q]=Z,Mt=(D,Q)=>{for(var Z in Q||(Q={}))ia.call(Q,Z)&&Rr(D,Z,Q[Z]);if(Lr)for(var Z of Lr(Q))sa.call(Q,Z)&&Rr(D,Z,Q[Z]);return D},Le=(D,Q)=>ra(D,na(Q));(function D(Q,Z,r){function t(f,p){if(!Z[f]){if(!Q[f]){var n="function"==typeof require&&require;if(!p&&n)return n(f,!0);if(s)return s(f,!0);var v=new Error("Cannot find module '"+f+"'");throw v.code="MODULE_NOT_FOUND",v}var d=Z[f]={exports:{}};Q[f][0].call(d.exports,function(u){return t(Q[f][1][u]||u)},d,d.exports,D,Q,Z,r)}return Z[f].exports}for(var s="function"==typeof require&&require,m=0;m<r.length;m++)t(r[m]);return t})({1:[function(D,Q,Z){"use strict";Q.exports={AES_STANDARD:"AES-CBC",DEFAULT_MESSAGE_DIGEST:"sha256"}},{}],2:[function(D,Q,Z){"use strict";var t=D("./helpers"),s=D("node-forge"),m=s.pki,f=D("./constants"),p=f.DEFAULT_MESSAGE_DIGEST,n=f.AES_STANDARD,v=function(){function d(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(C,_){if(!(C instanceof _))throw new TypeError("Cannot call a class as a function")})(this,d),this.options=Object.assign({},{md:p,entropy:void 0},g),this.options.entropy&&this._entropy(this.options.entropy)}var o;return(o=[{key:"_getMessageDigest",value:function(g){switch(g){case"sha1":return s.md.sha1.create();case"sha256":return s.md.sha256.create();case"sha384":return s.md.sha384.create();case"sha512":return s.md.sha512.create();case"md5":return s.md.md5.create();default:return console.warn('Message digest "'.concat(this.options.md,'" not found. Using default message digest "sha1" instead')),s.md.sha1.create()}}},{key:"_parseSignature",value:function(g){try{return JSON.parse(g)}catch(C){return{signature:g,md:"sha1",v:t.version()}}}},{key:"fingerprint",value:function(g){return m.getPublicKeyFingerprint(g,{encoding:"hex",delimiter:":"})}},{key:"signature",value:function(g,C){var _=this._getMessageDigest(this.options.md);_.update(C,"utf8"),"string"==typeof g&&(g=m.privateKeyFromPem(g));var b=g.sign(_),E=s.util.encode64(b);return JSON.stringify({signature:E,md:this.options.md})}},{key:"verify",value:function(g,C,_){if(!C)return!1;var b=this._parseSignature(C),E=b.signature,L=this._getMessageDigest(b.md);return L.update(_,"utf8"),E=s.util.decode64(E),"string"==typeof g&&(g=m.publicKeyFromPem(g)),g.verify(L.digest().getBytes(),E)}},{key:"encrypt",value:function(g,C,_){var b=this;g=(g=t.toArray(g)).map(function(e){return"string"==typeof e?m.publicKeyFromPem(e):e});var E=s.random.getBytesSync(32),k=s.random.getBytesSync(32),L={};g.forEach(function(e){var A=e.encrypt(k,"RSA-OAEP"),R=b.fingerprint(e);L[R]=s.util.encode64(A)});var P=s.util.createBuffer(C,"utf8"),V=s.cipher.createCipher(n,k);V.start({iv:E}),V.update(P),V.finish();var y={};return y.v=t.version(),y.iv=s.util.encode64(E),y.keys=L,y.cipher=s.util.encode64(V.output.data),y.signature=_,JSON.stringify(y)}},{key:"decrypt",value:function(g,C){this._validate(C);var _=JSON.parse(C);"string"==typeof g&&(g=m.privateKeyFromPem(g));var b=this.fingerprint(g),E=_.keys[b];if(!E)throw"RSA fingerprint doesn't match with any of the encrypted message's fingerprints";var k=s.util.decode64(E),L=s.util.decode64(_.iv),P=s.util.decode64(_.cipher),V=g.decrypt(k,"RSA-OAEP"),y=s.util.createBuffer(P),e=s.cipher.createDecipher(n,V);e.start({iv:L}),e.update(y),e.finish();var A=e.output.getBytes(),R=s.util.decodeUtf8(A),a={};return a.message=R,a.signature=_.signature,a}},{key:"_validate",value:function(g){var C=JSON.parse(g);if(!(C.hasOwnProperty("v")&&C.hasOwnProperty("iv")&&C.hasOwnProperty("keys")&&C.hasOwnProperty("cipher")))throw"Encrypted message is not valid"}},{key:"_entropy",value:function(g){var C=String(g),_=s.util.encodeUtf8(C);s.random.collect(_)}}])&&function r(d,u){for(var o=0;o<u.length;o++){var g=u[o];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}(d.prototype,o),d}();Q.exports=v},{"./constants":1,"./helpers":3,"node-forge":18}],3:[function(D,Q,Z){"use strict";var r=D("../package.json");Q.exports={version:function(){return"".concat(r.name,"_").concat(r.version)},toArray:function(t){return Array.isArray(t)?t:[t]}}},{"../package.json":52}],4:[function(D,Q,Z){"use strict";var t=D("node-forge"),s=t.pki,m=function(){function f(){var v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")})(this,f),this.options=Object.assign({},{keySize:4096,rsaStandard:"RSA-OAEP",entropy:void 0},v),this.options.entropy&&this._entropy(this.options.entropy)}var n;return(n=[{key:"generateKeyPair",value:function(v,d){s.rsa.generateKeyPair({bits:d||this.options.keySize,workers:-1},function(u,o){o.publicKey=s.publicKeyToPem(o.publicKey),o.privateKey=s.privateKeyToPem(o.privateKey),v(o)})}},{key:"generateKeyPairAsync",value:function(v){var d=this;return new Promise(function(u){d.generateKeyPair(u,v)})}},{key:"_entropy",value:function(v){var d=String(v),u=t.util.encodeUtf8(d);t.random.collect(u)}}])&&function r(f,p){for(var n=0;n<p.length;n++){var v=p[n];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}(f.prototype,n),f}();Q.exports=m},{"node-forge":18}],5:[function(D,Q,Z){"use strict";var r=s(D("./crypt")),t=s(D("./rsa"));function s(m){return m&&m.__esModule?m:{default:m}}window.Crypt=r.default,window.RSA=t.default},{"./crypt":2,"./rsa":4}],6:[function(D,Q,Z){},{}],7:[function(D,Q,Z){var r=D("./forge");function t(_,b){r.cipher.registerAlgorithm(_,function(){return new r.aes.Algorithm(_,b)})}D("./cipher"),D("./cipherModes"),D("./util"),Q.exports=r.aes=r.aes||{},r.aes.startEncrypting=function(_,b,E,k){var L=C({key:_,output:E,decrypt:!1,mode:k});return L.start(b),L},r.aes.createEncryptionCipher=function(_,b){return C({key:_,output:null,decrypt:!1,mode:b})},r.aes.startDecrypting=function(_,b,E,k){var L=C({key:_,output:E,decrypt:!0,mode:k});return L.start(b),L},r.aes.createDecryptionCipher=function(_,b){return C({key:_,output:null,decrypt:!0,mode:b})},r.aes.Algorithm=function(_,b){v||u();var E=this;E.name=_,E.mode=new b({blockSize:16,cipher:{encrypt:function(k,L){return g(E._w,k,L,!1)},decrypt:function(k,L){return g(E._w,k,L,!0)}}}),E._init=!1},r.aes.Algorithm.prototype.initialize=function(_){if(!this._init){var b,E=_.key;if("string"!=typeof E||16!==E.length&&24!==E.length&&32!==E.length){if(r.util.isArray(E)&&(16===E.length||24===E.length||32===E.length)){b=E,E=r.util.createBuffer();for(var k=0;k<b.length;++k)E.putByte(b[k])}}else E=r.util.createBuffer(E);if(!r.util.isArray(E)){b=E,E=[];var L=b.length();if(16===L||24===L||32===L)for(L>>>=2,k=0;k<L;++k)E.push(b.getInt32())}if(!r.util.isArray(E)||4!==E.length&&6!==E.length&&8!==E.length)throw new Error("Invalid key parameter.");var V=-1!==["CFB","OFB","CTR","GCM"].indexOf(this.mode.name);this._w=o(E,_.decrypt&&!V),this._init=!0}},r.aes._expandKey=function(_,b){return v||u(),o(_,b)},r.aes._updateBlock=g,t("AES-ECB",r.cipher.modes.ecb),t("AES-CBC",r.cipher.modes.cbc),t("AES-CFB",r.cipher.modes.cfb),t("AES-OFB",r.cipher.modes.ofb),t("AES-CTR",r.cipher.modes.ctr),t("AES-GCM",r.cipher.modes.gcm);var s,m,f,p,n,v=!1;function u(){v=!0,f=[0,1,2,4,8,16,32,64,128,27,54];for(var _=new Array(256),b=0;b<128;++b)_[b]=b<<1,_[b+128]=b+128<<1^283;for(s=new Array(256),m=new Array(256),p=new Array(4),n=new Array(4),b=0;b<4;++b)p[b]=new Array(256),n[b]=new Array(256);var E,k,L,P,V,y,e,A=0,R=0;for(b=0;b<256;++b){P=(P=R^R<<1^R<<2^R<<3^R<<4)>>8^255&P^99,s[A]=P,m[P]=A,y=(V=_[P])<<24^P<<16^P<<8^P^V,e=((E=_[A])^(k=_[E])^(L=_[k]))<<24^(A^L)<<16^(A^k^L)<<8^A^E^L;for(var a=0;a<4;++a)p[a][A]=y,n[a][P]=e,y=y<<24|y>>>8,e=e<<24|e>>>8;0===A?A=R=1:(A=E^_[_[_[E^L]]],R^=_[_[R]])}}function o(_,b){for(var E,k=_.slice(0),L=1,P=k.length,V=4*(P+6+1),y=P;y<V;++y)E=k[y-1],y%P==0?(E=s[E>>>16&255]<<24^s[E>>>8&255]<<16^s[255&E]<<8^s[E>>>24]^f[L]<<24,L++):P>6&&y%P==4&&(E=s[E>>>24]<<24^s[E>>>16&255]<<16^s[E>>>8&255]<<8^s[255&E]),k[y]=k[y-P]^E;if(b){for(var e,A=n[0],R=n[1],a=n[2],S=n[3],i=k.slice(0),l=(y=0,(V=k.length)-4);y<V;y+=4,l-=4)if(0===y||y===V-4)i[y]=k[l],i[y+1]=k[l+3],i[y+2]=k[l+2],i[y+3]=k[l+1];else for(var h=0;h<4;++h)i[y+(3&-h)]=A[s[(e=k[l+h])>>>24]]^R[s[e>>>16&255]]^a[s[e>>>8&255]]^S[s[255&e]];k=i}return k}function g(_,b,E,k){var L,P,V,y,e,A,R,a,S,i,l,h,I=_.length/4-1;k?(L=n[0],P=n[1],V=n[2],y=n[3],e=m):(L=p[0],P=p[1],V=p[2],y=p[3],e=s),A=b[0]^_[0],R=b[k?3:1]^_[1],a=b[2]^_[2],S=b[k?1:3]^_[3];for(var N=3,U=1;U<I;++U)i=L[A>>>24]^P[R>>>16&255]^V[a>>>8&255]^y[255&S]^_[++N],l=L[R>>>24]^P[a>>>16&255]^V[S>>>8&255]^y[255&A]^_[++N],h=L[a>>>24]^P[S>>>16&255]^V[A>>>8&255]^y[255&R]^_[++N],S=L[S>>>24]^P[A>>>16&255]^V[R>>>8&255]^y[255&a]^_[++N],A=i,R=l,a=h;E[0]=e[A>>>24]<<24^e[R>>>16&255]<<16^e[a>>>8&255]<<8^e[255&S]^_[++N],E[k?3:1]=e[R>>>24]<<24^e[a>>>16&255]<<16^e[S>>>8&255]<<8^e[255&A]^_[++N],E[2]=e[a>>>24]<<24^e[S>>>16&255]<<16^e[A>>>8&255]<<8^e[255&R]^_[++N],E[k?1:3]=e[S>>>24]<<24^e[A>>>16&255]<<16^e[R>>>8&255]<<8^e[255&a]^_[++N]}function C(_){var b,E="AES-"+((_=_||{}).mode||"CBC").toUpperCase(),k=(b=_.decrypt?r.cipher.createDecipher(E,_.key):r.cipher.createCipher(E,_.key)).start;return b.start=function(L,P){var V=null;P instanceof r.util.ByteBuffer&&(V=P,P={}),(P=P||{}).output=V,P.iv=L,k.call(b,P)},b}},{"./cipher":11,"./cipherModes":12,"./forge":16,"./util":48}],8:[function(D,Q,Z){var r=D("./forge");D("./aes"),D("./tls");var t=Q.exports=r.tls;function s(v,d,u){var o=d.entity===r.tls.ConnectionEnd.client;v.read.cipherState={init:!1,cipher:r.cipher.createDecipher("AES-CBC",o?u.keys.server_write_key:u.keys.client_write_key),iv:o?u.keys.server_write_IV:u.keys.client_write_IV},v.write.cipherState={init:!1,cipher:r.cipher.createCipher("AES-CBC",o?u.keys.client_write_key:u.keys.server_write_key),iv:o?u.keys.client_write_IV:u.keys.server_write_IV},v.read.cipherFunction=n,v.write.cipherFunction=m,v.read.macLength=v.write.macLength=u.mac_length,v.read.macFunction=v.write.macFunction=t.hmac_sha1}function m(v,d){var u,o=!1,g=d.macFunction(d.macKey,d.sequenceNumber,v);v.fragment.putBytes(g),d.updateSequenceNumber(),u=v.version.minor===t.Versions.TLS_1_0.minor?d.cipherState.init?null:d.cipherState.iv:r.random.getBytesSync(16),d.cipherState.init=!0;var C=d.cipherState.cipher;return C.start({iv:u}),v.version.minor>=t.Versions.TLS_1_1.minor&&C.output.putBytes(u),C.update(v.fragment),C.finish(f)&&(v.fragment=C.output,v.length=v.fragment.length(),o=!0),o}function f(v,d,u){if(!u){var o=v-d.length()%v;d.fillWithByte(o-1,o)}return!0}function p(v,d,u){var o=!0;if(u){for(var g=d.length(),C=d.last(),_=g-1-C;_<g-1;++_)o=o&&d.at(_)==C;o&&d.truncate(C+1)}return o}function n(v,d){var u,o;u=v.version.minor===t.Versions.TLS_1_0.minor?d.cipherState.init?null:d.cipherState.iv:v.fragment.getBytes(16),d.cipherState.init=!0;var g=d.cipherState.cipher;g.start({iv:u}),g.update(v.fragment),o=g.finish(p);var C=d.macLength,_=r.random.getBytesSync(C),b=g.output.length();b>=C?(v.fragment=g.output.getBytes(b-C),_=g.output.getBytes(C)):v.fragment=g.output.getBytes(),v.fragment=r.util.createBuffer(v.fragment),v.length=v.fragment.length();var k,L,P,V,E=d.macFunction(d.macKey,d.sequenceNumber,v);return d.updateSequenceNumber(),k=d.macKey,L=_,P=E,(V=r.hmac.create()).start("SHA1",k),V.update(L),L=V.digest().getBytes(),V.start(null,null),V.update(P),L===V.digest().getBytes()&&o}t.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(v){v.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,v.cipher_type=t.CipherType.block,v.enc_key_length=16,v.block_length=16,v.fixed_iv_length=16,v.record_iv_length=16,v.mac_algorithm=t.MACAlgorithm.hmac_sha1,v.mac_length=20,v.mac_key_length=20},initConnectionState:s},t.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(v){v.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,v.cipher_type=t.CipherType.block,v.enc_key_length=32,v.block_length=16,v.fixed_iv_length=16,v.record_iv_length=16,v.mac_algorithm=t.MACAlgorithm.hmac_sha1,v.mac_length=20,v.mac_key_length=20},initConnectionState:s}},{"./aes":7,"./forge":16,"./tls":47}],9:[function(D,Q,Z){var r=D("./forge");D("./util"),D("./oids");var t=Q.exports=r.asn1=r.asn1||{};function s(f,p,n){if(n>p){var v=new Error("Too few bytes to parse DER.");throw v.available=f.length(),v.remaining=p,v.requested=n,v}}t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(f,p,n,v,d){if(r.util.isArray(v)){for(var u=[],o=0;o<v.length;++o)void 0!==v[o]&&u.push(v[o]);v=u}var g={tagClass:f,type:p,constructed:n,composed:n||r.util.isArray(v),value:v};return d&&"bitStringContents"in d&&(g.bitStringContents=d.bitStringContents,g.original=t.copy(g)),g},t.copy=function(f,p){var n;if(r.util.isArray(f)){n=[];for(var v=0;v<f.length;++v)n.push(t.copy(f[v],p));return n}return"string"==typeof f?f:(n={tagClass:f.tagClass,type:f.type,constructed:f.constructed,composed:f.composed,value:t.copy(f.value,p)},p&&!p.excludeBitStringContents&&(n.bitStringContents=f.bitStringContents),n)},t.equals=function(f,p,n){if(r.util.isArray(f)){if(!r.util.isArray(p)||f.length!==p.length)return!1;for(var v=0;v<f.length;++v)if(!t.equals(f[v],p[v]))return!1;return!0}if(typeof f!=typeof p)return!1;if("string"==typeof f)return f===p;var d=f.tagClass===p.tagClass&&f.type===p.type&&f.constructed===p.constructed&&f.composed===p.composed&&t.equals(f.value,p.value);return n&&n.includeBitStringContents&&(d=d&&f.bitStringContents===p.bitStringContents),d},t.getBerValueLength=function(f){var p=f.getByte();if(128!==p)return 128&p?f.getInt((127&p)<<3):p},t.fromDer=function(f,p){return void 0===p&&(p={strict:!0,decodeBitStrings:!0}),"boolean"==typeof p&&(p={strict:p,decodeBitStrings:!0}),"strict"in p||(p.strict=!0),"decodeBitStrings"in p||(p.decodeBitStrings=!0),"string"==typeof f&&(f=r.util.createBuffer(f)),function n(v,d,u,o){var g;s(v,d,2);var C=v.getByte();d--;var _=192&C,b=31&C;g=v.length();var E,k,L=function(l,h){var I=l.getByte();if(128!==I){var N;if(128&I){var U=127&I;s(l,--h,U),N=l.getInt(U<<3)}else N=I;if(N<0)throw new Error("Negative length: "+N);return N}}(v,d);if(d-=g-v.length(),void 0!==L&&L>d){if(o.strict){var P=new Error("Too few bytes to read ASN.1 value.");throw P.available=v.length(),P.remaining=d,P.requested=L,P}L=d}var V=32==(32&C);if(V)if(E=[],void 0===L)for(;;){if(s(v,d,2),v.bytes(2)===String.fromCharCode(0,0)){v.getBytes(2),d-=2;break}g=v.length(),E.push(n(v,d,u+1,o)),d-=g-v.length()}else for(;L>0;)g=v.length(),E.push(n(v,L,u+1,o)),d-=g-v.length(),L-=g-v.length();if(void 0===E&&_===t.Class.UNIVERSAL&&b===t.Type.BITSTRING&&(k=v.bytes(L)),void 0===E&&o.decodeBitStrings&&_===t.Class.UNIVERSAL&&b===t.Type.BITSTRING&&L>1){var y=v.read,e=d,A=0;if(b===t.Type.BITSTRING&&(s(v,d,1),A=v.getByte(),d--),0===A)try{g=v.length();var R=n(v,d,u+1,{verbose:o.verbose,strict:!0,decodeBitStrings:!0}),a=g-v.length();d-=a,b==t.Type.BITSTRING&&a++;var S=R.tagClass;a!==L||S!==t.Class.UNIVERSAL&&S!==t.Class.CONTEXT_SPECIFIC||(E=[R])}catch(l){}void 0===E&&(v.read=y,d=e)}if(void 0===E){if(void 0===L){if(o.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");L=d}if(b===t.Type.BMPSTRING)for(E="";L>0;L-=2)s(v,d,2),E+=String.fromCharCode(v.getInt16()),d-=2;else E=v.getBytes(L)}return t.create(_,b,V,E,void 0===k?null:{bitStringContents:k})}(f,f.length(),0,p)},t.toDer=function(f){var p=r.util.createBuffer(),n=f.tagClass|f.type,v=r.util.createBuffer(),d=!1;if("bitStringContents"in f&&(d=!0,f.original&&(d=t.equals(f,f.original))),d)v.putBytes(f.bitStringContents);else if(f.composed){f.constructed?n|=32:v.putByte(0);for(var u=0;u<f.value.length;++u)void 0!==f.value[u]&&v.putBuffer(t.toDer(f.value[u]))}else if(f.type===t.Type.BMPSTRING)for(u=0;u<f.value.length;++u)v.putInt16(f.value.charCodeAt(u));else f.type===t.Type.INTEGER&&f.value.length>1&&(0===f.value.charCodeAt(0)&&0==(128&f.value.charCodeAt(1))||255===f.value.charCodeAt(0)&&128==(128&f.value.charCodeAt(1)))?v.putBytes(f.value.substr(1)):v.putBytes(f.value);if(p.putByte(n),v.length()<=127)p.putByte(127&v.length());else{var o=v.length(),g="";do{g+=String.fromCharCode(255&o),o>>>=8}while(o>0);for(p.putByte(128|g.length),u=g.length-1;u>=0;--u)p.putByte(g.charCodeAt(u))}return p.putBuffer(v),p},t.oidToDer=function(f){var p,n,v,d,u=f.split("."),o=r.util.createBuffer();o.putByte(40*parseInt(u[0],10)+parseInt(u[1],10));for(var g=2;g<u.length;++g){p=!0,n=[],v=parseInt(u[g],10);do{d=127&v,v>>>=7,p||(d|=128),n.push(d),p=!1}while(v>0);for(var C=n.length-1;C>=0;--C)o.putByte(n[C])}return o},t.derToOid=function(f){var p;"string"==typeof f&&(f=r.util.createBuffer(f));var n=f.getByte();p=Math.floor(n/40)+"."+n%40;for(var v=0;f.length()>0;)v<<=7,128&(n=f.getByte())?v+=127&n:(p+="."+(v+n),v=0);return p},t.utcTimeToDate=function(f){var p=new Date,n=parseInt(f.substr(0,2),10);n=n>=50?1900+n:2e3+n;var v=parseInt(f.substr(2,2),10)-1,d=parseInt(f.substr(4,2),10),u=parseInt(f.substr(6,2),10),o=parseInt(f.substr(8,2),10),g=0;if(f.length>11){var C=f.charAt(10),_=10;"+"!==C&&"-"!==C&&(g=parseInt(f.substr(10,2),10),_+=2)}if(p.setUTCFullYear(n,v,d),p.setUTCHours(u,o,g,0),_&&("+"===(C=f.charAt(_))||"-"===C)){var b=60*parseInt(f.substr(_+1,2),10)+parseInt(f.substr(_+4,2),10);b*=6e4,p.setTime("+"===C?+p-b:+p+b)}return p},t.generalizedTimeToDate=function(f){var p=new Date,n=parseInt(f.substr(0,4),10),v=parseInt(f.substr(4,2),10)-1,d=parseInt(f.substr(6,2),10),u=parseInt(f.substr(8,2),10),o=parseInt(f.substr(10,2),10),g=parseInt(f.substr(12,2),10),C=0,_=0,b=!1;"Z"===f.charAt(f.length-1)&&(b=!0);var E=f.length-5,k=f.charAt(E);return"+"!==k&&"-"!==k||(_=60*parseInt(f.substr(E+1,2),10)+parseInt(f.substr(E+4,2),10),_*=6e4,"+"===k&&(_*=-1),b=!0),"."===f.charAt(14)&&(C=1e3*parseFloat(f.substr(14),10)),b?(p.setUTCFullYear(n,v,d),p.setUTCHours(u,o,g,C),p.setTime(+p+_)):(p.setFullYear(n,v,d),p.setHours(u,o,g,C)),p},t.dateToUtcTime=function(f){if("string"==typeof f)return f;var p="",n=[];n.push((""+f.getUTCFullYear()).substr(2)),n.push(""+(f.getUTCMonth()+1)),n.push(""+f.getUTCDate()),n.push(""+f.getUTCHours()),n.push(""+f.getUTCMinutes()),n.push(""+f.getUTCSeconds());for(var v=0;v<n.length;++v)n[v].length<2&&(p+="0"),p+=n[v];return p+"Z"},t.dateToGeneralizedTime=function(f){if("string"==typeof f)return f;var p="",n=[];n.push(""+f.getUTCFullYear()),n.push(""+(f.getUTCMonth()+1)),n.push(""+f.getUTCDate()),n.push(""+f.getUTCHours()),n.push(""+f.getUTCMinutes()),n.push(""+f.getUTCSeconds());for(var v=0;v<n.length;++v)n[v].length<2&&(p+="0"),p+=n[v];return p+"Z"},t.integerToDer=function(f){var p=r.util.createBuffer();if(f>=-128&&f<128)return p.putSignedInt(f,8);if(f>=-32768&&f<32768)return p.putSignedInt(f,16);if(f>=-8388608&&f<8388608)return p.putSignedInt(f,24);if(f>=-2147483648&&f<2147483648)return p.putSignedInt(f,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=f,n},t.derToInteger=function(f){"string"==typeof f&&(f=r.util.createBuffer(f));var p=8*f.length();if(p>32)throw new Error("Integer too large; max is 32-bits.");return f.getSignedInt(p)},t.validate=function(f,p,n,v){var d=!1;if(f.tagClass!==p.tagClass&&void 0!==p.tagClass||f.type!==p.type&&void 0!==p.type)v&&(f.tagClass!==p.tagClass&&v.push("["+p.name+'] Expected tag class "'+p.tagClass+'", got "'+f.tagClass+'"'),f.type!==p.type&&v.push("["+p.name+'] Expected type "'+p.type+'", got "'+f.type+'"'));else if(f.constructed===p.constructed||void 0===p.constructed){if(d=!0,p.value&&r.util.isArray(p.value))for(var u=0,o=0;d&&o<p.value.length;++o)d=p.value[o].optional||!1,f.value[u]&&((d=t.validate(f.value[u],p.value[o],n,v))?++u:p.value[o].optional&&(d=!0)),!d&&v&&v.push("["+p.name+'] Tag class "'+p.tagClass+'", type "'+p.type+'" expected value length "'+p.value.length+'", got "'+f.value.length+'"');if(d&&n&&(p.capture&&(n[p.capture]=f.value),p.captureAsn1&&(n[p.captureAsn1]=f),p.captureBitStringContents&&"bitStringContents"in f&&(n[p.captureBitStringContents]=f.bitStringContents),p.captureBitStringValue&&"bitStringContents"in f))if(f.bitStringContents.length<2)n[p.captureBitStringValue]="";else{if(0!==f.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");n[p.captureBitStringValue]=f.bitStringContents.slice(1)}}else v&&v.push("["+p.name+'] Expected constructed "'+p.constructed+'", got "'+f.constructed+'"');return d};var m=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(f,p,n){var v="";n=n||2,(p=p||0)>0&&(v+="\n");for(var d="",u=0;u<p*n;++u)d+=" ";switch(v+=d+"Tag: ",f.tagClass){case t.Class.UNIVERSAL:v+="Universal:";break;case t.Class.APPLICATION:v+="Application:";break;case t.Class.CONTEXT_SPECIFIC:v+="Context-Specific:";break;case t.Class.PRIVATE:v+="Private:"}if(f.tagClass===t.Class.UNIVERSAL)switch(v+=f.type,f.type){case t.Type.NONE:v+=" (None)";break;case t.Type.BOOLEAN:v+=" (Boolean)";break;case t.Type.INTEGER:v+=" (Integer)";break;case t.Type.BITSTRING:v+=" (Bit string)";break;case t.Type.OCTETSTRING:v+=" (Octet string)";break;case t.Type.NULL:v+=" (Null)";break;case t.Type.OID:v+=" (Object Identifier)";break;case t.Type.ODESC:v+=" (Object Descriptor)";break;case t.Type.EXTERNAL:v+=" (External or Instance of)";break;case t.Type.REAL:v+=" (Real)";break;case t.Type.ENUMERATED:v+=" (Enumerated)";break;case t.Type.EMBEDDED:v+=" (Embedded PDV)";break;case t.Type.UTF8:v+=" (UTF8)";break;case t.Type.ROID:v+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:v+=" (Sequence)";break;case t.Type.SET:v+=" (Set)";break;case t.Type.PRINTABLESTRING:v+=" (Printable String)";break;case t.Type.IA5String:v+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:v+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:v+=" (Generalized time)";break;case t.Type.BMPSTRING:v+=" (BMP String)"}else v+=f.type;if(v+="\n",v+=d+"Constructed: "+f.constructed+"\n",f.composed){var o=0,g="";for(u=0;u<f.value.length;++u)void 0!==f.value[u]&&(o+=1,g+=t.prettyPrint(f.value[u],p+1,n),u+1<f.value.length&&(g+=","));v+=d+"Sub values: "+o+g}else{if(v+=d+"Value: ",f.type===t.Type.OID){var C=t.derToOid(f.value);v+=C,r.pki&&r.pki.oids&&C in r.pki.oids&&(v+=" ("+r.pki.oids[C]+") ")}if(f.type===t.Type.INTEGER)try{v+=t.derToInteger(f.value)}catch(b){v+="0x"+r.util.bytesToHex(f.value)}else if(f.type===t.Type.BITSTRING){if(v+=f.value.length>1?"0x"+r.util.bytesToHex(f.value.slice(1)):"(none)",f.value.length>0){var _=f.value.charCodeAt(0);1==_?v+=" (1 unused bit shown)":_>1&&(v+=" ("+_+" unused bits shown)")}}else f.type===t.Type.OCTETSTRING?(m.test(f.value)||(v+="("+f.value+") "),v+="0x"+r.util.bytesToHex(f.value)):f.type===t.Type.UTF8?v+=r.util.decodeUtf8(f.value):f.type===t.Type.PRINTABLESTRING||f.type===t.Type.IA5String?v+=f.value:m.test(f.value)?v+="0x"+r.util.bytesToHex(f.value):v+=0===f.value.length?"[null]":f.value}return v}},{"./forge":16,"./oids":27,"./util":48}],10:[function(D,Q,Z){(function(r){var t={};Q.exports=t;var s={};t.encode=function(m,f,p){if("string"!=typeof f)throw new TypeError('"alphabet" must be a string.');if(void 0!==p&&"number"!=typeof p)throw new TypeError('"maxline" must be a number.');var n="";if(m instanceof Uint8Array){var v=0,d=f.length,u=f.charAt(0),o=[0];for(v=0;v<m.length;++v){for(var g=0,C=m[v];g<o.length;++g)o[g]=(C+=o[g]<<8)%d,C=C/d|0;for(;C>0;)o.push(C%d),C=C/d|0}for(v=0;0===m[v]&&v<m.length-1;++v)n+=u;for(v=o.length-1;v>=0;--v)n+=f[o[v]]}else n=function(b,E){var k=0,L=E.length,P=E.charAt(0),V=[0];for(k=0;k<b.length();++k){for(var y=0,e=b.at(k);y<V.length;++y)V[y]=(e+=V[y]<<8)%L,e=e/L|0;for(;e>0;)V.push(e%L),e=e/L|0}var A="";for(k=0;0===b.at(k)&&k<b.length()-1;++k)A+=P;for(k=V.length-1;k>=0;--k)A+=E[V[k]];return A}(m,f);if(p){var _=new RegExp(".{1,"+p+"}","g");n=n.match(_).join("\r\n")}return n},t.decode=function(m,f){if("string"!=typeof m)throw new TypeError('"input" must be a string.');if("string"!=typeof f)throw new TypeError('"alphabet" must be a string.');var p=s[f];if(!p){p=s[f]=[];for(var n=0;n<f.length;++n)p[f.charCodeAt(n)]=n}m=m.replace(/\s/g,"");var v=f.length,d=f.charAt(0),u=[0];for(n=0;n<m.length;n++){var o=p[m.charCodeAt(n)];if(void 0===o)return;for(var g=0,C=o;g<u.length;++g)u[g]=255&(C+=u[g]*v),C>>=8;for(;C>0;)u.push(255&C),C>>=8}for(var _=0;m[_]===d&&_<m.length-1;++_)u.push(0);return void 0!==r?r.from(u.reverse()):new Uint8Array(u.reverse())}}).call(this,D("buffer").Buffer)},{buffer:6}],11:[function(D,Q,Z){var r=D("./forge");D("./util"),Q.exports=r.cipher=r.cipher||{},r.cipher.algorithms=r.cipher.algorithms||{},r.cipher.createCipher=function(s,m){var f=s;if("string"==typeof f&&(f=r.cipher.getAlgorithm(f))&&(f=f()),!f)throw new Error("Unsupported algorithm: "+s);return new r.cipher.BlockCipher({algorithm:f,key:m,decrypt:!1})},r.cipher.createDecipher=function(s,m){var f=s;if("string"==typeof f&&(f=r.cipher.getAlgorithm(f))&&(f=f()),!f)throw new Error("Unsupported algorithm: "+s);return new r.cipher.BlockCipher({algorithm:f,key:m,decrypt:!0})},r.cipher.registerAlgorithm=function(s,m){s=s.toUpperCase(),r.cipher.algorithms[s]=m},r.cipher.getAlgorithm=function(s){return(s=s.toUpperCase())in r.cipher.algorithms?r.cipher.algorithms[s]:null};var t=r.cipher.BlockCipher=function(s){this.algorithm=s.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=s.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=s.decrypt,this.algorithm.initialize(s)};t.prototype.start=function(s){s=s||{};var m={};for(var f in s)m[f]=s[f];m.decrypt=this._decrypt,this._finish=!1,this._input=r.util.createBuffer(),this.output=s.output||r.util.createBuffer(),this.mode.start(m)},t.prototype.update=function(s){for(s&&this._input.putBuffer(s);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},t.prototype.finish=function(s){!s||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(f){return s(this.blockSize,f,!1)},this.mode.unpad=function(f){return s(this.blockSize,f,!0)});var m={};return m.decrypt=this._decrypt,m.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,m)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,m)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,m)))}},{"./forge":16,"./util":48}],12:[function(D,Q,Z){var r=D("./forge");D("./util"),r.cipher=r.cipher||{};var t=Q.exports=r.cipher.modes=r.cipher.modes||{};function s(p){if("string"==typeof p&&(p=r.util.createBuffer(p)),r.util.isArray(p)&&p.length>4){var n=p;p=r.util.createBuffer();for(var v=0;v<n.length;++v)p.putByte(n[v])}return r.util.isArray(p)||(p=[p.getInt32(),p.getInt32(),p.getInt32(),p.getInt32()]),p}function m(p){p[p.length-1]=p[p.length-1]+1&4294967295}function f(p){return[p/4294967296|0,4294967295&p]}t.ecb=function(p){p=p||{},this.name="ECB",this.cipher=p.cipher,this.blockSize=p.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(p){},t.ecb.prototype.encrypt=function(p,n,v){if(p.length()<this.blockSize&&!(v&&p.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=p.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),d=0;d<this._ints;++d)n.putInt32(this._outBlock[d])},t.ecb.prototype.decrypt=function(p,n,v){if(p.length()<this.blockSize&&!(v&&p.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=p.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),d=0;d<this._ints;++d)n.putInt32(this._outBlock[d])},t.ecb.prototype.pad=function(p,n){var v=p.length()===this.blockSize?this.blockSize:this.blockSize-p.length();return p.fillWithByte(v,v),!0},t.ecb.prototype.unpad=function(p,n){if(n.overflow>0)return!1;var v=p.length(),d=p.at(v-1);return!(d>this.blockSize<<2||(p.truncate(d),0))},t.cbc=function(p){p=p||{},this.name="CBC",this.cipher=p.cipher,this.blockSize=p.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(p){if(null===p.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in p))throw new Error("Invalid IV parameter.");this._iv=s(p.iv),this._prev=this._iv.slice(0)}},t.cbc.prototype.encrypt=function(p,n,v){if(p.length()<this.blockSize&&!(v&&p.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=this._prev[d]^p.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),d=0;d<this._ints;++d)n.putInt32(this._outBlock[d]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(p,n,v){if(p.length()<this.blockSize&&!(v&&p.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=p.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),d=0;d<this._ints;++d)n.putInt32(this._prev[d]^this._outBlock[d]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(p,n){var v=p.length()===this.blockSize?this.blockSize:this.blockSize-p.length();return p.fillWithByte(v,v),!0},t.cbc.prototype.unpad=function(p,n){if(n.overflow>0)return!1;var v=p.length(),d=p.at(v-1);return!(d>this.blockSize<<2||(p.truncate(d),0))},t.cfb=function(p){p=p||{},this.name="CFB",this.cipher=p.cipher,this.blockSize=p.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(p){if(!("iv"in p))throw new Error("Invalid IV parameter.");this._iv=s(p.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(p,n,v){var d=p.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize)for(var u=0;u<this._ints;++u)this._inBlock[u]=p.getInt32()^this._outBlock[u],n.putInt32(this._inBlock[u]);else{var o=(this.blockSize-d)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),u=0;u<this._ints;++u)this._partialBlock[u]=p.getInt32()^this._outBlock[u],this._partialOutput.putInt32(this._partialBlock[u]);if(o>0)p.read-=this.blockSize;else for(u=0;u<this._ints;++u)this._inBlock[u]=this._partialBlock[u];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!v)return n.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;n.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}},t.cfb.prototype.decrypt=function(p,n,v){var d=p.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize)for(var u=0;u<this._ints;++u)this._inBlock[u]=p.getInt32(),n.putInt32(this._inBlock[u]^this._outBlock[u]);else{var o=(this.blockSize-d)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),u=0;u<this._ints;++u)this._partialBlock[u]=p.getInt32(),this._partialOutput.putInt32(this._partialBlock[u]^this._outBlock[u]);if(o>0)p.read-=this.blockSize;else for(u=0;u<this._ints;++u)this._inBlock[u]=this._partialBlock[u];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!v)return n.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;n.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}},t.ofb=function(p){p=p||{},this.name="OFB",this.cipher=p.cipher,this.blockSize=p.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(p){if(!("iv"in p))throw new Error("Invalid IV parameter.");this._iv=s(p.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(p,n,v){var d=p.length();if(0===p.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize)for(var u=0;u<this._ints;++u)n.putInt32(p.getInt32()^this._outBlock[u]),this._inBlock[u]=this._outBlock[u];else{var o=(this.blockSize-d)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),u=0;u<this._ints;++u)this._partialOutput.putInt32(p.getInt32()^this._outBlock[u]);if(o>0)p.read-=this.blockSize;else for(u=0;u<this._ints;++u)this._inBlock[u]=this._outBlock[u];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!v)return n.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;n.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(p){p=p||{},this.name="CTR",this.cipher=p.cipher,this.blockSize=p.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(p){if(!("iv"in p))throw new Error("Invalid IV parameter.");this._iv=s(p.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(p,n,v){var d=p.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize)for(var u=0;u<this._ints;++u)n.putInt32(p.getInt32()^this._outBlock[u]);else{var o=(this.blockSize-d)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),u=0;u<this._ints;++u)this._partialOutput.putInt32(p.getInt32()^this._outBlock[u]);if(o>0&&(p.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!v)return n.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;n.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}m(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(p){p=p||{},this.name="GCM",this.cipher=p.cipher,this.blockSize=p.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(p){if(!("iv"in p))throw new Error("Invalid IV parameter.");var n,v=r.util.createBuffer(p.iv);if(this._cipherLength=0,n="additionalData"in p?r.util.createBuffer(p.additionalData):r.util.createBuffer(),this._tagLength="tagLength"in p?p.tagLength:128,this._tag=null,p.decrypt&&(this._tag=r.util.createBuffer(p.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var d=v.length();if(12===d)this._j0=[v.getInt32(),v.getInt32(),v.getInt32(),1];else{for(this._j0=[0,0,0,0];v.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[v.getInt32(),v.getInt32(),v.getInt32(),v.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(f(8*d)))}this._inBlock=this._j0.slice(0),m(this._inBlock),this._partialBytes=0,n=r.util.createBuffer(n),this._aDataLength=f(8*n.length());var u=n.length()%this.blockSize;for(u&&n.fillWithByte(0,this.blockSize-u),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])},t.gcm.prototype.encrypt=function(p,n,v){var d=p.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize){for(var u=0;u<this._ints;++u)n.putInt32(this._outBlock[u]^=p.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-d)%this.blockSize;for(o>0&&(o=this.blockSize-o),this._partialOutput.clear(),u=0;u<this._ints;++u)this._partialOutput.putInt32(p.getInt32()^this._outBlock[u]);if(o<=0||v){if(v){var g=d%this.blockSize;this._cipherLength+=g,this._partialOutput.truncate(this.blockSize-g)}else this._cipherLength+=this.blockSize;for(u=0;u<this._ints;++u)this._outBlock[u]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!v)return p.read-=this.blockSize,n.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;n.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),m(this._inBlock)},t.gcm.prototype.decrypt=function(p,n,v){var d=p.length();if(d<this.blockSize&&!(v&&d>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),m(this._inBlock),this._hashBlock[0]=p.getInt32(),this._hashBlock[1]=p.getInt32(),this._hashBlock[2]=p.getInt32(),this._hashBlock[3]=p.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var u=0;u<this._ints;++u)n.putInt32(this._outBlock[u]^this._hashBlock[u]);this._cipherLength+=d<this.blockSize?d%this.blockSize:this.blockSize},t.gcm.prototype.afterFinish=function(p,n){var v=!0;n.decrypt&&n.overflow&&p.truncate(this.blockSize-n.overflow),this.tag=r.util.createBuffer();var d=this._aDataLength.concat(f(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,d);var u=[];this.cipher.encrypt(this._j0,u);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^u[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),n.decrypt&&this.tag.bytes()!==this._tag&&(v=!1),v},t.gcm.prototype.multiply=function(p,n){for(var v=[0,0,0,0],d=n.slice(0),u=0;u<128;++u)p[u/32|0]&1<<31-u%32&&(v[0]^=d[0],v[1]^=d[1],v[2]^=d[2],v[3]^=d[3]),this.pow(d,d);return v},t.gcm.prototype.pow=function(p,n){for(var v=1&p[3],d=3;d>0;--d)n[d]=p[d]>>>1|(1&p[d-1])<<31;n[0]=p[0]>>>1,v&&(n[0]^=this._R)},t.gcm.prototype.tableMultiply=function(p){for(var n=[0,0,0,0],v=0;v<32;++v){var u=this._m[v][p[v/8|0]>>>4*(7-v%8)&15];n[0]^=u[0],n[1]^=u[1],n[2]^=u[2],n[3]^=u[3]}return n},t.gcm.prototype.ghash=function(p,n,v){return n[0]^=v[0],n[1]^=v[1],n[2]^=v[2],n[3]^=v[3],this.tableMultiply(n)},t.gcm.prototype.generateHashTable=function(p,n){for(var v=8/n,d=4*v,u=16*v,o=new Array(u),g=0;g<u;++g){var C=[0,0,0,0];C[g/d|0]=1<<n-1<<(d-1-g%d)*n,o[g]=this.generateSubHashTable(this.multiply(C,p),n)}return o},t.gcm.prototype.generateSubHashTable=function(p,n){var v=1<<n,d=v>>>1,u=new Array(v);u[d]=p.slice(0);for(var o=d>>>1;o>0;)this.pow(u[2*o],u[o]=[]),o>>=1;for(o=2;o<d;){for(var g=1;g<o;++g){var C=u[o],_=u[g];u[o+g]=[C[0]^_[0],C[1]^_[1],C[2]^_[2],C[3]^_[3]]}o*=2}for(u[0]=[0,0,0,0],o=d+1;o<v;++o){var b=u[o^d];u[o]=[p[0]^b[0],p[1]^b[1],p[2]^b[2],p[3]^b[3]]}return u}},{"./forge":16,"./util":48}],13:[function(D,Q,Z){var r=D("./forge");Q.exports=r.debug=r.debug||{},r.debug.storage={},r.debug.get=function(t,s){var m;return void 0===t?m=r.debug.storage:t in r.debug.storage&&(m=void 0===s?r.debug.storage[t]:r.debug.storage[t][s]),m},r.debug.set=function(t,s,m){t in r.debug.storage||(r.debug.storage[t]={}),r.debug.storage[t][s]=m},r.debug.clear=function(t,s){void 0===t?r.debug.storage={}:t in r.debug.storage&&(void 0===s?delete r.debug.storage[t]:delete r.debug.storage[t][s])}},{"./forge":16}],14:[function(D,Q,Z){var r=D("./forge");function t(C,_){r.cipher.registerAlgorithm(C,function(){return new r.des.Algorithm(C,_)})}D("./cipher"),D("./cipherModes"),D("./util"),Q.exports=r.des=r.des||{},r.des.startEncrypting=function(C,_,b,E){var k=g({key:C,output:b,decrypt:!1,mode:E||(null===_?"ECB":"CBC")});return k.start(_),k},r.des.createEncryptionCipher=function(C,_){return g({key:C,output:null,decrypt:!1,mode:_})},r.des.startDecrypting=function(C,_,b,E){var k=g({key:C,output:b,decrypt:!0,mode:E||(null===_?"ECB":"CBC")});return k.start(_),k},r.des.createDecryptionCipher=function(C,_){return g({key:C,output:null,decrypt:!0,mode:_})},r.des.Algorithm=function(C,_){var b=this;b.name=C,b.mode=new _({blockSize:8,cipher:{encrypt:function(E,k){return o(b._keys,E,k,!1)},decrypt:function(E,k){return o(b._keys,E,k,!0)}}}),b._init=!1},r.des.Algorithm.prototype.initialize=function(C){if(!this._init){var _=r.util.createBuffer(C.key);if(0===this.name.indexOf("3DES")&&24!==_.length())throw new Error("Invalid Triple-DES key size: "+8*_.length());this._keys=function(b){for(var E,k=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],L=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],P=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],V=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],y=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],e=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],A=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],R=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],a=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],S=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],i=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],l=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],I=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],N=b.length()>8?3:1,U=[],W=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],Y=0,et=0;et<N;et++){var q=b.getInt32(),$=b.getInt32();q^=(E=252645135&(q>>>4^$))<<4,q^=E=65535&(($^=E)>>>-16^q),q^=(E=858993459&(q>>>2^($^=E<<-16)))<<2,q^=E=65535&(($^=E)>>>-16^q),q^=(E=1431655765&(q>>>1^($^=E<<-16)))<<1,q^=E=16711935&(($^=E)>>>8^q),E=(q^=(E=1431655765&(q>>>1^($^=E<<8)))<<1)<<8|($^=E)>>>20&240,q=$<<24|$<<8&16711680|$>>>8&65280|$>>>24&240,$=E;for(var z=0;z<W.length;++z){W[z]?(q=q<<2|q>>>26,$=$<<2|$>>>26):(q=q<<1|q>>>27,$=$<<1|$>>>27);var w=k[(q&=-15)>>>28]|L[q>>>24&15]|P[q>>>20&15]|V[q>>>16&15]|y[q>>>12&15]|e[q>>>8&15]|A[q>>>4&15],x=R[($&=-15)>>>28]|a[$>>>24&15]|S[$>>>20&15]|i[$>>>16&15]|l[$>>>12&15]|h[$>>>8&15]|I[$>>>4&15];U[Y++]=w^(E=65535&(x>>>16^w)),U[Y++]=x^E<<16}}return U}(_),this._init=!0}},t("DES-ECB",r.cipher.modes.ecb),t("DES-CBC",r.cipher.modes.cbc),t("DES-CFB",r.cipher.modes.cfb),t("DES-OFB",r.cipher.modes.ofb),t("DES-CTR",r.cipher.modes.ctr),t("3DES-ECB",r.cipher.modes.ecb),t("3DES-CBC",r.cipher.modes.cbc),t("3DES-CFB",r.cipher.modes.cfb),t("3DES-OFB",r.cipher.modes.ofb),t("3DES-CTR",r.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],m=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],f=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],p=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],n=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],v=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],d=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],u=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function o(C,_,b,E){var k,L,P=32===C.length?3:9;k=3===P?E?[30,-2,-2]:[0,32,2]:E?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var V=_[0],y=_[1];V^=(L=252645135&(V>>>4^y))<<4,V^=(L=65535&(V>>>16^(y^=L)))<<16,V^=L=858993459&((y^=L)>>>2^V),V^=L=16711935&((y^=L<<2)>>>8^V),V=(V^=(L=1431655765&(V>>>1^(y^=L<<8)))<<1)<<1|V>>>31,y=(y^=L)<<1|y>>>31;for(var e=0;e<P;e+=3){for(var A=k[e+1],R=k[e+2],a=k[e];a!=A;a+=R){var S=y^C[a],i=(y>>>4|y<<28)^C[a+1];L=V,V=y,y=L^(m[S>>>24&63]|p[S>>>16&63]|v[S>>>8&63]|u[63&S]|s[i>>>24&63]|f[i>>>16&63]|n[i>>>8&63]|d[63&i])}L=V,V=y,y=L}y=y>>>1|y<<31,y^=L=1431655765&((V=V>>>1|V<<31)>>>1^y),y^=(L=16711935&(y>>>8^(V^=L<<1)))<<8,y^=(L=858993459&(y>>>2^(V^=L)))<<2,y^=L=65535&((V^=L)>>>16^y),y^=L=252645135&((V^=L<<16)>>>4^y),b[0]=V^=L<<4,b[1]=y}function g(C){var _,b="DES-"+((C=C||{}).mode||"CBC").toUpperCase(),E=(_=C.decrypt?r.cipher.createDecipher(b,C.key):r.cipher.createCipher(b,C.key)).start;return _.start=function(k,L){var P=null;L instanceof r.util.ByteBuffer&&(P=L,L={}),(L=L||{}).output=P,L.iv=k,E.call(_,L)},_}},{"./cipher":11,"./cipherModes":12,"./forge":16,"./util":48}],15:[function(D,Q,Z){(function(r){var t=D("./forge");if(D("./jsbn"),D("./random"),D("./sha512"),D("./util"),void 0===s)var s=t.jsbn.BigInteger;var m=t.util.ByteBuffer,f=void 0===r?Uint8Array:r;t.pki=t.pki||{},Q.exports=t.pki.ed25519=t.ed25519=t.ed25519||{};var p=t.ed25519;function n(q){var $=q.message;if($ instanceof Uint8Array)return $;var z=q.encoding;if(void 0===$){if(!q.md)throw new TypeError('"options.message" or "options.md" not specified.');$=q.md.digest().getBytes(),z="binary"}if("string"==typeof $&&!z)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof $){if(void 0!==r)return r.from($,z);$=new m($,z)}else if(!($ instanceof m))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var w=new f($.length()),x=0;x<w.length;++x)w[x]=$.at(x);return w}p.constants={},p.constants.PUBLIC_KEY_BYTE_LENGTH=32,p.constants.PRIVATE_KEY_BYTE_LENGTH=64,p.constants.SEED_BYTE_LENGTH=32,p.constants.SIGN_BYTE_LENGTH=64,p.constants.HASH_BYTE_LENGTH=64,p.generateKeyPair=function(q){var $=(q=q||{}).seed;if(void 0===$)$=t.random.getBytesSync(p.constants.SEED_BYTE_LENGTH);else if("string"==typeof $){if($.length!==p.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+p.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!($ instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');$=n({message:$,encoding:"binary"});for(var z=new f(p.constants.PUBLIC_KEY_BYTE_LENGTH),w=new f(p.constants.PRIVATE_KEY_BYTE_LENGTH),x=0;x<32;++x)w[x]=$[x];return function(ot,T){var O,M=[N(),N(),N(),N()],K=E(T,32);for(K[0]&=248,K[31]&=127,K[31]|=64,i(M,K),y(ot,M),O=0;O<32;++O)T[O+32]=ot[O]}(z,w),{publicKey:z,privateKey:w}},p.publicKeyFromPrivateKey=function(q){var $=n({message:(q=q||{}).privateKey,encoding:"binary"});if($.length!==p.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+p.constants.PRIVATE_KEY_BYTE_LENGTH);for(var z=new f(p.constants.PUBLIC_KEY_BYTE_LENGTH),w=0;w<z.length;++w)z[w]=$[32+w];return z},p.sign=function(q){var $=n(q=q||{}),z=n({message:q.privateKey,encoding:"binary"});if(z.length!==p.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+p.constants.PRIVATE_KEY_BYTE_LENGTH);var w=new f(p.constants.SIGN_BYTE_LENGTH+$.length);!function(T,O,M,K){var G,X,j=new Float64Array(64),tt=[N(),N(),N(),N()],rt=E(K,32);for(rt[0]&=248,rt[31]&=127,rt[31]|=64,G=0;G<M;++G)T[64+G]=O[G];for(G=0;G<32;++G)T[32+G]=rt[32+G];var nt=E(T.subarray(32),M+32);for(L(nt),i(tt,nt),y(T,tt),G=32;G<64;++G)T[G]=K[G];var it=E(T,M+64);for(L(it),G=32;G<64;++G)j[G]=0;for(G=0;G<32;++G)j[G]=nt[G];for(G=0;G<32;++G)for(X=0;X<32;X++)j[G+X]+=it[G]*rt[X];k(T.subarray(32),j)}(w,$,$.length,z);for(var x=new f(p.constants.SIGN_BYTE_LENGTH),ot=0;ot<x.length;++ot)x[ot]=w[ot];return x},p.verify=function(q){var $=n(q=q||{});if(void 0===q.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var z=n({message:q.signature,encoding:"binary"});if(z.length!==p.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+p.constants.SIGN_BYTE_LENGTH);var w=n({message:q.publicKey,encoding:"binary"});if(w.length!==p.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+p.constants.PUBLIC_KEY_BYTE_LENGTH);var x,ot=new f(p.constants.SIGN_BYTE_LENGTH+$.length),T=new f(p.constants.SIGN_BYTE_LENGTH+$.length);for(x=0;x<p.constants.SIGN_BYTE_LENGTH;++x)ot[x]=z[x];for(x=0;x<$.length;++x)ot[x+p.constants.SIGN_BYTE_LENGTH]=$[x];return function(O,M,K,G){var X,it,lt,ct,pt,ut,gt,Ct,Tt,Ut,j=new f(32),tt=[N(),N(),N(),N()],rt=[N(),N(),N(),N()];if(K<64||(it=rt,lt=G,ct=N(),pt=N(),ut=N(),gt=N(),Ct=N(),Tt=N(),Ut=N(),l(it[2],d),function(vt,bt){var dt;for(dt=0;dt<16;++dt)vt[dt]=bt[2*dt]+(bt[2*dt+1]<<8);vt[15]&=32767}(it[1],lt),Y(ut,it[1]),et(gt,ut,u),W(ut,ut,it[2]),U(gt,it[2],gt),Y(Ct,gt),Y(Tt,Ct),et(Ut,Tt,Ct),et(ct,Ut,ut),et(ct,ct,gt),function(vt,bt){var dt,Vt=N();for(dt=0;dt<16;++dt)Vt[dt]=bt[dt];for(dt=250;dt>=0;--dt)Y(Vt,Vt),1!==dt&&et(Vt,Vt,bt);for(dt=0;dt<16;++dt)vt[dt]=Vt[dt]}(ct,ct),et(ct,ct,ut),et(ct,ct,gt),et(ct,ct,gt),et(it[0],ct,gt),Y(pt,it[0]),et(pt,pt,gt),A(pt,ut)&&et(it[0],it[0],b),Y(pt,it[0]),et(pt,pt,gt),A(pt,ut)?-1:(a(it[0])===lt[31]>>7&&W(it[0],v,it[0]),et(it[3],it[0],it[1]),0)))return-1;for(X=0;X<K;++X)O[X]=M[X];for(X=0;X<32;++X)O[X+32]=G[X];var nt=E(O,K);if(L(nt),S(tt,rt,nt),i(rt,M.subarray(32)),P(tt,rt),y(j,tt),K-=64,R(M,0,j,0)){for(X=0;X<K;++X)O[X]=0;return-1}for(X=0;X<K;++X)O[X]=M[X+64];return K}(T,ot,ot.length,w)>=0};var v=N(),d=N([1]),u=N([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),o=N([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),g=N([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),C=N([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),b=N([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function E(q,$){var z=t.md.sha512.create(),w=new m(q);z.update(w.getBytes($),"binary");var x=z.digest().getBytes();if(void 0!==r)return r.from(x,"binary");for(var ot=new f(p.constants.HASH_BYTE_LENGTH),T=0;T<64;++T)ot[T]=x.charCodeAt(T);return ot}function k(q,$){var z,w,x,ot;for(w=63;w>=32;--w){for(z=0,x=w-32,ot=w-12;x<ot;++x)$[x]+=z-16*$[w]*_[x-(w-32)],$[x]-=256*(z=$[x]+128>>8);$[x]+=z,$[w]=0}for(z=0,x=0;x<32;++x)$[x]+=z-($[31]>>4)*_[x],z=$[x]>>8,$[x]&=255;for(x=0;x<32;++x)$[x]-=z*_[x];for(w=0;w<32;++w)$[w+1]+=$[w]>>8,q[w]=255&$[w]}function L(q){for(var $=new Float64Array(64),z=0;z<64;++z)$[z]=q[z],q[z]=0;k(q,$)}function P(q,$){var z=N(),w=N(),x=N(),ot=N(),T=N(),O=N(),M=N(),K=N(),G=N();W(z,q[1],q[0]),W(G,$[1],$[0]),et(z,z,G),U(w,q[0],q[1]),U(G,$[0],$[1]),et(w,w,G),et(x,q[3],$[3]),et(x,x,o),et(ot,q[2],$[2]),U(ot,ot,ot),W(T,w,z),W(O,ot,x),U(M,ot,x),U(K,w,z),et(q[0],T,O),et(q[1],K,M),et(q[2],M,O),et(q[3],T,K)}function V(q,$,z){for(var w=0;w<4;++w)I(q[w],$[w],z)}function y(q,$){var z=N(),w=N(),x=N();(function(ot,T){var O,M=N();for(O=0;O<16;++O)M[O]=T[O];for(O=253;O>=0;--O)Y(M,M),2!==O&&4!==O&&et(M,M,T);for(O=0;O<16;++O)ot[O]=M[O]})(x,$[2]),et(z,$[0],x),et(w,$[1],x),e(q,w),q[31]^=a(z)<<7}function e(q,$){var z,w,x,ot=N(),T=N();for(z=0;z<16;++z)T[z]=$[z];for(h(T),h(T),h(T),w=0;w<2;++w){for(ot[0]=T[0]-65517,z=1;z<15;++z)ot[z]=T[z]-65535-(ot[z-1]>>16&1),ot[z-1]&=65535;ot[15]=T[15]-32767-(ot[14]>>16&1),x=ot[15]>>16&1,ot[14]&=65535,I(T,ot,1-x)}for(z=0;z<16;z++)q[2*z]=255&T[z],q[2*z+1]=T[z]>>8}function A(q,$){var z=new f(32),w=new f(32);return e(z,q),e(w,$),R(z,0,w,0)}function R(q,$,z,w){return function(x,ot,T,O,M){var K,G=0;for(K=0;K<32;++K)G|=x[ot+K]^T[O+K];return(1&G-1>>>8)-1}(q,$,z,w)}function a(q){var $=new f(32);return e($,q),1&$[0]}function S(q,$,z){var w,x;for(l(q[0],v),l(q[1],d),l(q[2],d),l(q[3],v),x=255;x>=0;--x)V(q,$,w=z[x/8|0]>>(7&x)&1),P($,q),P(q,q),V(q,$,w)}function i(q,$){var z=[N(),N(),N(),N()];l(z[0],g),l(z[1],C),l(z[2],d),et(z[3],g,C),S(q,z,$)}function l(q,$){var z;for(z=0;z<16;z++)q[z]=0|$[z]}function h(q){var $,z,w=1;for($=0;$<16;++$)z=q[$]+w+65535,w=Math.floor(z/65536),q[$]=z-65536*w;q[0]+=w-1+37*(w-1)}function I(q,$,z){for(var w,x=~(z-1),ot=0;ot<16;++ot)q[ot]^=w=x&(q[ot]^$[ot]),$[ot]^=w}function N(q){var $,z=new Float64Array(16);if(q)for($=0;$<q.length;++$)z[$]=q[$];return z}function U(q,$,z){for(var w=0;w<16;++w)q[w]=$[w]+z[w]}function W(q,$,z){for(var w=0;w<16;++w)q[w]=$[w]-z[w]}function Y(q,$){et(q,$,$)}function et(q,$,z){var w,x,ot=0,T=0,O=0,M=0,K=0,G=0,X=0,j=0,tt=0,rt=0,nt=0,it=0,lt=0,ct=0,pt=0,ut=0,gt=0,Ct=0,Tt=0,Ut=0,vt=0,bt=0,dt=0,Vt=0,Gt=0,Qt=0,Xt=0,ae=0,zt=0,ht=0,Re=0,mt=z[0],St=z[1],At=z[2],It=z[3],wt=z[4],Bt=z[5],Nt=z[6],kt=z[7],Lt=z[8],Rt=z[9],Dt=z[10],Ot=z[11],Et=z[12],Pt=z[13],xt=z[14],yt=z[15];ot+=(w=$[0])*mt,T+=w*St,O+=w*At,M+=w*It,K+=w*wt,G+=w*Bt,X+=w*Nt,j+=w*kt,tt+=w*Lt,rt+=w*Rt,nt+=w*Dt,it+=w*Ot,lt+=w*Et,ct+=w*Pt,pt+=w*xt,ut+=w*yt,T+=(w=$[1])*mt,O+=w*St,M+=w*At,K+=w*It,G+=w*wt,X+=w*Bt,j+=w*Nt,tt+=w*kt,rt+=w*Lt,nt+=w*Rt,it+=w*Dt,lt+=w*Ot,ct+=w*Et,pt+=w*Pt,ut+=w*xt,gt+=w*yt,O+=(w=$[2])*mt,M+=w*St,K+=w*At,G+=w*It,X+=w*wt,j+=w*Bt,tt+=w*Nt,rt+=w*kt,nt+=w*Lt,it+=w*Rt,lt+=w*Dt,ct+=w*Ot,pt+=w*Et,ut+=w*Pt,gt+=w*xt,Ct+=w*yt,M+=(w=$[3])*mt,K+=w*St,G+=w*At,X+=w*It,j+=w*wt,tt+=w*Bt,rt+=w*Nt,nt+=w*kt,it+=w*Lt,lt+=w*Rt,ct+=w*Dt,pt+=w*Ot,ut+=w*Et,gt+=w*Pt,Ct+=w*xt,Tt+=w*yt,K+=(w=$[4])*mt,G+=w*St,X+=w*At,j+=w*It,tt+=w*wt,rt+=w*Bt,nt+=w*Nt,it+=w*kt,lt+=w*Lt,ct+=w*Rt,pt+=w*Dt,ut+=w*Ot,gt+=w*Et,Ct+=w*Pt,Tt+=w*xt,Ut+=w*yt,G+=(w=$[5])*mt,X+=w*St,j+=w*At,tt+=w*It,rt+=w*wt,nt+=w*Bt,it+=w*Nt,lt+=w*kt,ct+=w*Lt,pt+=w*Rt,ut+=w*Dt,gt+=w*Ot,Ct+=w*Et,Tt+=w*Pt,Ut+=w*xt,vt+=w*yt,X+=(w=$[6])*mt,j+=w*St,tt+=w*At,rt+=w*It,nt+=w*wt,it+=w*Bt,lt+=w*Nt,ct+=w*kt,pt+=w*Lt,ut+=w*Rt,gt+=w*Dt,Ct+=w*Ot,Tt+=w*Et,Ut+=w*Pt,vt+=w*xt,bt+=w*yt,j+=(w=$[7])*mt,tt+=w*St,rt+=w*At,nt+=w*It,it+=w*wt,lt+=w*Bt,ct+=w*Nt,pt+=w*kt,ut+=w*Lt,gt+=w*Rt,Ct+=w*Dt,Tt+=w*Ot,Ut+=w*Et,vt+=w*Pt,bt+=w*xt,dt+=w*yt,tt+=(w=$[8])*mt,rt+=w*St,nt+=w*At,it+=w*It,lt+=w*wt,ct+=w*Bt,pt+=w*Nt,ut+=w*kt,gt+=w*Lt,Ct+=w*Rt,Tt+=w*Dt,Ut+=w*Ot,vt+=w*Et,bt+=w*Pt,dt+=w*xt,Vt+=w*yt,rt+=(w=$[9])*mt,nt+=w*St,it+=w*At,lt+=w*It,ct+=w*wt,pt+=w*Bt,ut+=w*Nt,gt+=w*kt,Ct+=w*Lt,Tt+=w*Rt,Ut+=w*Dt,vt+=w*Ot,bt+=w*Et,dt+=w*Pt,Vt+=w*xt,Gt+=w*yt,nt+=(w=$[10])*mt,it+=w*St,lt+=w*At,ct+=w*It,pt+=w*wt,ut+=w*Bt,gt+=w*Nt,Ct+=w*kt,Tt+=w*Lt,Ut+=w*Rt,vt+=w*Dt,bt+=w*Ot,dt+=w*Et,Vt+=w*Pt,Gt+=w*xt,Qt+=w*yt,it+=(w=$[11])*mt,lt+=w*St,ct+=w*At,pt+=w*It,ut+=w*wt,gt+=w*Bt,Ct+=w*Nt,Tt+=w*kt,Ut+=w*Lt,vt+=w*Rt,bt+=w*Dt,dt+=w*Ot,Vt+=w*Et,Gt+=w*Pt,Qt+=w*xt,Xt+=w*yt,lt+=(w=$[12])*mt,ct+=w*St,pt+=w*At,ut+=w*It,gt+=w*wt,Ct+=w*Bt,Tt+=w*Nt,Ut+=w*kt,vt+=w*Lt,bt+=w*Rt,dt+=w*Dt,Vt+=w*Ot,Gt+=w*Et,Qt+=w*Pt,Xt+=w*xt,ae+=w*yt,ct+=(w=$[13])*mt,pt+=w*St,ut+=w*At,gt+=w*It,Ct+=w*wt,Tt+=w*Bt,Ut+=w*Nt,vt+=w*kt,bt+=w*Lt,dt+=w*Rt,Vt+=w*Dt,Gt+=w*Ot,Qt+=w*Et,Xt+=w*Pt,ae+=w*xt,zt+=w*yt,pt+=(w=$[14])*mt,ut+=w*St,gt+=w*At,Ct+=w*It,Tt+=w*wt,Ut+=w*Bt,vt+=w*Nt,bt+=w*kt,dt+=w*Lt,Vt+=w*Rt,Gt+=w*Dt,Qt+=w*Ot,Xt+=w*Et,ae+=w*Pt,zt+=w*xt,ht+=w*yt,ut+=(w=$[15])*mt,T+=38*(Ct+=w*At),O+=38*(Tt+=w*It),M+=38*(Ut+=w*wt),K+=38*(vt+=w*Bt),G+=38*(bt+=w*Nt),X+=38*(dt+=w*kt),j+=38*(Vt+=w*Lt),tt+=38*(Gt+=w*Rt),rt+=38*(Qt+=w*Dt),nt+=38*(Xt+=w*Ot),it+=38*(ae+=w*Et),lt+=38*(zt+=w*Pt),ct+=38*(ht+=w*xt),pt+=38*(Re+=w*yt),ot=(w=(ot+=38*(gt+=w*St))+(x=1)+65535)-65536*(x=Math.floor(w/65536)),T=(w=T+x+65535)-65536*(x=Math.floor(w/65536)),O=(w=O+x+65535)-65536*(x=Math.floor(w/65536)),M=(w=M+x+65535)-65536*(x=Math.floor(w/65536)),K=(w=K+x+65535)-65536*(x=Math.floor(w/65536)),G=(w=G+x+65535)-65536*(x=Math.floor(w/65536)),X=(w=X+x+65535)-65536*(x=Math.floor(w/65536)),j=(w=j+x+65535)-65536*(x=Math.floor(w/65536)),tt=(w=tt+x+65535)-65536*(x=Math.floor(w/65536)),rt=(w=rt+x+65535)-65536*(x=Math.floor(w/65536)),nt=(w=nt+x+65535)-65536*(x=Math.floor(w/65536)),it=(w=it+x+65535)-65536*(x=Math.floor(w/65536)),lt=(w=lt+x+65535)-65536*(x=Math.floor(w/65536)),ct=(w=ct+x+65535)-65536*(x=Math.floor(w/65536)),pt=(w=pt+x+65535)-65536*(x=Math.floor(w/65536)),ut=(w=ut+x+65535)-65536*(x=Math.floor(w/65536)),ot=(w=(ot+=x-1+37*(x-1))+(x=1)+65535)-65536*(x=Math.floor(w/65536)),T=(w=T+x+65535)-65536*(x=Math.floor(w/65536)),O=(w=O+x+65535)-65536*(x=Math.floor(w/65536)),M=(w=M+x+65535)-65536*(x=Math.floor(w/65536)),K=(w=K+x+65535)-65536*(x=Math.floor(w/65536)),G=(w=G+x+65535)-65536*(x=Math.floor(w/65536)),X=(w=X+x+65535)-65536*(x=Math.floor(w/65536)),j=(w=j+x+65535)-65536*(x=Math.floor(w/65536)),tt=(w=tt+x+65535)-65536*(x=Math.floor(w/65536)),rt=(w=rt+x+65535)-65536*(x=Math.floor(w/65536)),nt=(w=nt+x+65535)-65536*(x=Math.floor(w/65536)),it=(w=it+x+65535)-65536*(x=Math.floor(w/65536)),lt=(w=lt+x+65535)-65536*(x=Math.floor(w/65536)),ct=(w=ct+x+65535)-65536*(x=Math.floor(w/65536)),pt=(w=pt+x+65535)-65536*(x=Math.floor(w/65536)),ut=(w=ut+x+65535)-65536*(x=Math.floor(w/65536)),q[0]=ot+=x-1+37*(x-1),q[1]=T,q[2]=O,q[3]=M,q[4]=K,q[5]=G,q[6]=X,q[7]=j,q[8]=tt,q[9]=rt,q[10]=nt,q[11]=it,q[12]=lt,q[13]=ct,q[14]=pt,q[15]=ut}}).call(this,D("buffer").Buffer)},{"./forge":16,"./jsbn":19,"./random":39,"./sha512":44,"./util":48,buffer:6}],16:[function(D,Q,Z){Q.exports={options:{usePureJavaScript:!1}}},{}],17:[function(D,Q,Z){var r=D("./forge");D("./md"),D("./util"),(Q.exports=r.hmac=r.hmac||{}).create=function(){var t=null,s=null,m=null,f=null,p={start:function(n,v){if(null!==n)if("string"==typeof n){if(!((n=n.toLowerCase())in r.md.algorithms))throw new Error('Unknown hash algorithm "'+n+'"');s=r.md.algorithms[n].create()}else s=n;if(null===v)v=t;else{if("string"==typeof v)v=r.util.createBuffer(v);else if(r.util.isArray(v)){var d=v;v=r.util.createBuffer();for(var u=0;u<d.length;++u)v.putByte(d[u])}var o=v.length();for(o>s.blockLength&&(s.start(),s.update(v.bytes()),v=s.digest()),m=r.util.createBuffer(),f=r.util.createBuffer(),o=v.length(),u=0;u<o;++u)d=v.at(u),m.putByte(54^d),f.putByte(92^d);if(o<s.blockLength)for(d=s.blockLength-o,u=0;u<d;++u)m.putByte(54),f.putByte(92);t=v,m=m.bytes(),f=f.bytes()}s.start(),s.update(m)},update:function(n){s.update(n)},getMac:function(){var n=s.digest().bytes();return s.start(),s.update(f),s.update(n),s.digest()}};return p.digest=p.getMac,p}},{"./forge":16,"./md":23,"./util":48}],18:[function(D,Q,Z){Q.exports=D("./forge"),D("./aes"),D("./aesCipherSuites"),D("./asn1"),D("./cipher"),D("./debug"),D("./des"),D("./ed25519"),D("./hmac"),D("./kem"),D("./log"),D("./md.all"),D("./mgf1"),D("./pbkdf2"),D("./pem"),D("./pkcs1"),D("./pkcs12"),D("./pkcs7"),D("./pki"),D("./prime"),D("./prng"),D("./pss"),D("./random"),D("./rc2"),D("./ssh"),D("./task"),D("./tls"),D("./util")},{"./aes":7,"./aesCipherSuites":8,"./asn1":9,"./cipher":11,"./debug":13,"./des":14,"./ed25519":15,"./forge":16,"./hmac":17,"./kem":20,"./log":21,"./md.all":22,"./mgf1":26,"./pbkdf2":29,"./pem":30,"./pkcs1":31,"./pkcs12":32,"./pkcs7":33,"./pki":35,"./prime":36,"./prng":37,"./pss":38,"./random":39,"./rc2":40,"./ssh":45,"./task":46,"./tls":47,"./util":48}],19:[function(D,Q,Z){var r,t=D("./forge");function s(i,l,h){this.data=[],null!=i&&("number"==typeof i?this.fromNumber(i,l,h):this.fromString(i,null==l&&"string"!=typeof i?256:l))}function m(){return new s(null)}function f(i,l,h,I,N,U){for(var W=16383&l,Y=l>>14;--U>=0;){var et=16383&this.data[i],q=this.data[i++]>>14,$=Y*et+q*W;N=((et=W*et+((16383&$)<<14)+h.data[I]+N)>>28)+($>>14)+Y*q,h.data[I++]=268435455&et}return N}Q.exports=t.jsbn=t.jsbn||{},t.jsbn.BigInteger=s,"undefined"==typeof navigator?(s.prototype.am=f,r=28):"Microsoft Internet Explorer"==navigator.appName?(s.prototype.am=function(i,l,h,I,N,U){for(var W=32767&l,Y=l>>15;--U>=0;){var et=32767&this.data[i],q=this.data[i++]>>15,$=Y*et+q*W;N=((et=W*et+((32767&$)<<15)+h.data[I]+(1073741823&N))>>>30)+($>>>15)+Y*q+(N>>>30),h.data[I++]=1073741823&et}return N},r=30):"Netscape"!=navigator.appName?(s.prototype.am=function(i,l,h,I,N,U){for(;--U>=0;){var W=l*this.data[i++]+h.data[I]+N;N=Math.floor(W/67108864),h.data[I++]=67108863&W}return N},r=26):(s.prototype.am=f,r=28),s.prototype.DB=r,s.prototype.DM=(1<<r)-1,s.prototype.DV=1<<r,s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-r,s.prototype.F2=2*r-52;var p,n,d=new Array;for(p="0".charCodeAt(0),n=0;n<=9;++n)d[p++]=n;for(p="a".charCodeAt(0),n=10;n<36;++n)d[p++]=n;for(p="A".charCodeAt(0),n=10;n<36;++n)d[p++]=n;function u(i){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(i)}function o(i,l){var h=d[i.charCodeAt(l)];return null==h?-1:h}function g(i){var l=m();return l.fromInt(i),l}function C(i){var l,h=1;return 0!=(l=i>>>16)&&(i=l,h+=16),0!=(l=i>>8)&&(i=l,h+=8),0!=(l=i>>4)&&(i=l,h+=4),0!=(l=i>>2)&&(i=l,h+=2),0!=(l=i>>1)&&(i=l,h+=1),h}function _(i){this.m=i}function b(i){this.m=i,this.mp=i.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<i.DB-15)-1,this.mt2=2*i.t}function E(i,l){return i&l}function k(i,l){return i|l}function L(i,l){return i^l}function P(i,l){return i&~l}function V(i){if(0==i)return-1;var l=0;return 0==(65535&i)&&(i>>=16,l+=16),0==(255&i)&&(i>>=8,l+=8),0==(15&i)&&(i>>=4,l+=4),0==(3&i)&&(i>>=2,l+=2),0==(1&i)&&++l,l}function y(i){for(var l=0;0!=i;)i&=i-1,++l;return l}function e(){}function A(i){return i}function R(i){this.r2=m(),this.q3=m(),s.ONE.dlShiftTo(2*i.t,this.r2),this.mu=this.r2.divide(i),this.m=i}_.prototype.convert=function(i){return i.s<0||i.compareTo(this.m)>=0?i.mod(this.m):i},_.prototype.revert=function(i){return i},_.prototype.reduce=function(i){i.divRemTo(this.m,null,i)},_.prototype.mulTo=function(i,l,h){i.multiplyTo(l,h),this.reduce(h)},_.prototype.sqrTo=function(i,l){i.squareTo(l),this.reduce(l)},b.prototype.convert=function(i){var l=m();return i.abs().dlShiftTo(this.m.t,l),l.divRemTo(this.m,null,l),i.s<0&&l.compareTo(s.ZERO)>0&&this.m.subTo(l,l),l},b.prototype.revert=function(i){var l=m();return i.copyTo(l),this.reduce(l),l},b.prototype.reduce=function(i){for(;i.t<=this.mt2;)i.data[i.t++]=0;for(var l=0;l<this.m.t;++l){var h=32767&i.data[l],I=h*this.mpl+((h*this.mph+(i.data[l]>>15)*this.mpl&this.um)<<15)&i.DM;for(i.data[h=l+this.m.t]+=this.m.am(0,I,i,l,0,this.m.t);i.data[h]>=i.DV;)i.data[h]-=i.DV,i.data[++h]++}i.clamp(),i.drShiftTo(this.m.t,i),i.compareTo(this.m)>=0&&i.subTo(this.m,i)},b.prototype.mulTo=function(i,l,h){i.multiplyTo(l,h),this.reduce(h)},b.prototype.sqrTo=function(i,l){i.squareTo(l),this.reduce(l)},s.prototype.copyTo=function(i){for(var l=this.t-1;l>=0;--l)i.data[l]=this.data[l];i.t=this.t,i.s=this.s},s.prototype.fromInt=function(i){this.t=1,this.s=i<0?-1:0,i>0?this.data[0]=i:i<-1?this.data[0]=i+this.DV:this.t=0},s.prototype.fromString=function(i,l){var h;if(16==l)h=4;else if(8==l)h=3;else if(256==l)h=8;else if(2==l)h=1;else if(32==l)h=5;else{if(4!=l)return void this.fromRadix(i,l);h=2}this.t=0,this.s=0;for(var I=i.length,N=!1,U=0;--I>=0;){var W=8==h?255&i[I]:o(i,I);W<0?"-"==i.charAt(I)&&(N=!0):(N=!1,0==U?this.data[this.t++]=W:U+h>this.DB?(this.data[this.t-1]|=(W&(1<<this.DB-U)-1)<<U,this.data[this.t++]=W>>this.DB-U):this.data[this.t-1]|=W<<U,(U+=h)>=this.DB&&(U-=this.DB))}8==h&&0!=(128&i[0])&&(this.s=-1,U>0&&(this.data[this.t-1]|=(1<<this.DB-U)-1<<U)),this.clamp(),N&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var i=this.s&this.DM;this.t>0&&this.data[this.t-1]==i;)--this.t},s.prototype.dlShiftTo=function(i,l){var h;for(h=this.t-1;h>=0;--h)l.data[h+i]=this.data[h];for(h=i-1;h>=0;--h)l.data[h]=0;l.t=this.t+i,l.s=this.s},s.prototype.drShiftTo=function(i,l){for(var h=i;h<this.t;++h)l.data[h-i]=this.data[h];l.t=Math.max(this.t-i,0),l.s=this.s},s.prototype.lShiftTo=function(i,l){var h,I=i%this.DB,N=this.DB-I,U=(1<<N)-1,W=Math.floor(i/this.DB),Y=this.s<<I&this.DM;for(h=this.t-1;h>=0;--h)l.data[h+W+1]=this.data[h]>>N|Y,Y=(this.data[h]&U)<<I;for(h=W-1;h>=0;--h)l.data[h]=0;l.data[W]=Y,l.t=this.t+W+1,l.s=this.s,l.clamp()},s.prototype.rShiftTo=function(i,l){l.s=this.s;var h=Math.floor(i/this.DB);if(h>=this.t)l.t=0;else{var I=i%this.DB,N=this.DB-I,U=(1<<I)-1;l.data[0]=this.data[h]>>I;for(var W=h+1;W<this.t;++W)l.data[W-h-1]|=(this.data[W]&U)<<N,l.data[W-h]=this.data[W]>>I;I>0&&(l.data[this.t-h-1]|=(this.s&U)<<N),l.t=this.t-h,l.clamp()}},s.prototype.subTo=function(i,l){for(var h=0,I=0,N=Math.min(i.t,this.t);h<N;)I+=this.data[h]-i.data[h],l.data[h++]=I&this.DM,I>>=this.DB;if(i.t<this.t){for(I-=i.s;h<this.t;)I+=this.data[h],l.data[h++]=I&this.DM,I>>=this.DB;I+=this.s}else{for(I+=this.s;h<i.t;)I-=i.data[h],l.data[h++]=I&this.DM,I>>=this.DB;I-=i.s}l.s=I<0?-1:0,I<-1?l.data[h++]=this.DV+I:I>0&&(l.data[h++]=I),l.t=h,l.clamp()},s.prototype.multiplyTo=function(i,l){var h=this.abs(),I=i.abs(),N=h.t;for(l.t=N+I.t;--N>=0;)l.data[N]=0;for(N=0;N<I.t;++N)l.data[N+h.t]=h.am(0,I.data[N],l,N,0,h.t);l.s=0,l.clamp(),this.s!=i.s&&s.ZERO.subTo(l,l)},s.prototype.squareTo=function(i){for(var l=this.abs(),h=i.t=2*l.t;--h>=0;)i.data[h]=0;for(h=0;h<l.t-1;++h){var I=l.am(h,l.data[h],i,2*h,0,1);(i.data[h+l.t]+=l.am(h+1,2*l.data[h],i,2*h+1,I,l.t-h-1))>=l.DV&&(i.data[h+l.t]-=l.DV,i.data[h+l.t+1]=1)}i.t>0&&(i.data[i.t-1]+=l.am(h,l.data[h],i,2*h,0,1)),i.s=0,i.clamp()},s.prototype.divRemTo=function(i,l,h){var I=i.abs();if(!(I.t<=0)){var N=this.abs();if(N.t<I.t)return null!=l&&l.fromInt(0),void(null!=h&&this.copyTo(h));null==h&&(h=m());var U=m(),W=this.s,Y=i.s,et=this.DB-C(I.data[I.t-1]);et>0?(I.lShiftTo(et,U),N.lShiftTo(et,h)):(I.copyTo(U),N.copyTo(h));var q=U.t,$=U.data[q-1];if(0!=$){var z=$*(1<<this.F1)+(q>1?U.data[q-2]>>this.F2:0),w=this.FV/z,x=(1<<this.F1)/z,ot=1<<this.F2,T=h.t,O=T-q,M=null==l?m():l;for(U.dlShiftTo(O,M),h.compareTo(M)>=0&&(h.data[h.t++]=1,h.subTo(M,h)),s.ONE.dlShiftTo(q,M),M.subTo(U,U);U.t<q;)U.data[U.t++]=0;for(;--O>=0;){var K=h.data[--T]==$?this.DM:Math.floor(h.data[T]*w+(h.data[T-1]+ot)*x);if((h.data[T]+=U.am(0,K,h,O,0,q))<K)for(U.dlShiftTo(O,M),h.subTo(M,h);h.data[T]<--K;)h.subTo(M,h)}null!=l&&(h.drShiftTo(q,l),W!=Y&&s.ZERO.subTo(l,l)),h.t=q,h.clamp(),et>0&&h.rShiftTo(et,h),W<0&&s.ZERO.subTo(h,h)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var i=this.data[0];if(0==(1&i))return 0;var l=3&i;return(l=(l=(l=(l=l*(2-(15&i)*l)&15)*(2-(255&i)*l)&255)*(2-((65535&i)*l&65535))&65535)*(2-i*l%this.DV)%this.DV)>0?this.DV-l:-l},s.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},s.prototype.exp=function(i,l){if(i>4294967295||i<1)return s.ONE;var h=m(),I=m(),N=l.convert(this),U=C(i)-1;for(N.copyTo(h);--U>=0;)if(l.sqrTo(h,I),(i&1<<U)>0)l.mulTo(I,N,h);else{var W=h;h=I,I=W}return l.revert(h)},s.prototype.toString=function(i){if(this.s<0)return"-"+this.negate().toString(i);var l;if(16==i)l=4;else if(8==i)l=3;else if(2==i)l=1;else if(32==i)l=5;else{if(4!=i)return this.toRadix(i);l=2}var h,I=(1<<l)-1,N=!1,U="",W=this.t,Y=this.DB-W*this.DB%l;if(W-- >0)for(Y<this.DB&&(h=this.data[W]>>Y)>0&&(N=!0,U=u(h));W>=0;)Y<l?(h=(this.data[W]&(1<<Y)-1)<<l-Y,h|=this.data[--W]>>(Y+=this.DB-l)):(h=this.data[W]>>(Y-=l)&I,Y<=0&&(Y+=this.DB,--W)),h>0&&(N=!0),N&&(U+=u(h));return N?U:"0"},s.prototype.negate=function(){var i=m();return s.ZERO.subTo(this,i),i},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(i){var l=this.s-i.s;if(0!=l)return l;var h=this.t;if(0!=(l=h-i.t))return this.s<0?-l:l;for(;--h>=0;)if(0!=(l=this.data[h]-i.data[h]))return l;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+C(this.data[this.t-1]^this.s&this.DM)},s.prototype.mod=function(i){var l=m();return this.abs().divRemTo(i,null,l),this.s<0&&l.compareTo(s.ZERO)>0&&i.subTo(l,l),l},s.prototype.modPowInt=function(i,l){var h;return h=i<256||l.isEven()?new _(l):new b(l),this.exp(i,h)},s.ZERO=g(0),s.ONE=g(1),e.prototype.convert=A,e.prototype.revert=A,e.prototype.mulTo=function(i,l,h){i.multiplyTo(l,h)},e.prototype.sqrTo=function(i,l){i.squareTo(l)},R.prototype.convert=function(i){if(i.s<0||i.t>2*this.m.t)return i.mod(this.m);if(i.compareTo(this.m)<0)return i;var l=m();return i.copyTo(l),this.reduce(l),l},R.prototype.revert=function(i){return i},R.prototype.reduce=function(i){for(i.drShiftTo(this.m.t-1,this.r2),i.t>this.m.t+1&&(i.t=this.m.t+1,i.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);i.compareTo(this.r2)<0;)i.dAddOffset(1,this.m.t+1);for(i.subTo(this.r2,i);i.compareTo(this.m)>=0;)i.subTo(this.m,i)},R.prototype.mulTo=function(i,l,h){i.multiplyTo(l,h),this.reduce(h)},R.prototype.sqrTo=function(i,l){i.squareTo(l),this.reduce(l)};var a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],S=(1<<26)/a[a.length-1];s.prototype.chunkSize=function(i){return Math.floor(Math.LN2*this.DB/Math.log(i))},s.prototype.toRadix=function(i){if(null==i&&(i=10),0==this.signum()||i<2||i>36)return"0";var l=this.chunkSize(i),h=Math.pow(i,l),I=g(h),N=m(),U=m(),W="";for(this.divRemTo(I,N,U);N.signum()>0;)W=(h+U.intValue()).toString(i).substr(1)+W,N.divRemTo(I,N,U);return U.intValue().toString(i)+W},s.prototype.fromRadix=function(i,l){this.fromInt(0),null==l&&(l=10);for(var h=this.chunkSize(l),I=Math.pow(l,h),N=!1,U=0,W=0,Y=0;Y<i.length;++Y){var et=o(i,Y);et<0?"-"==i.charAt(Y)&&0==this.signum()&&(N=!0):(W=l*W+et,++U>=h&&(this.dMultiply(I),this.dAddOffset(W,0),U=0,W=0))}U>0&&(this.dMultiply(Math.pow(l,U)),this.dAddOffset(W,0)),N&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(i,l,h){if("number"==typeof l)if(i<2)this.fromInt(1);else for(this.fromNumber(i,h),this.testBit(i-1)||this.bitwiseTo(s.ONE.shiftLeft(i-1),k,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(l);)this.dAddOffset(2,0),this.bitLength()>i&&this.subTo(s.ONE.shiftLeft(i-1),this);else{var I=new Array,N=7&i;I.length=1+(i>>3),l.nextBytes(I),N>0?I[0]&=(1<<N)-1:I[0]=0,this.fromString(I,256)}},s.prototype.bitwiseTo=function(i,l,h){var I,N,U=Math.min(i.t,this.t);for(I=0;I<U;++I)h.data[I]=l(this.data[I],i.data[I]);if(i.t<this.t){for(N=i.s&this.DM,I=U;I<this.t;++I)h.data[I]=l(this.data[I],N);h.t=this.t}else{for(N=this.s&this.DM,I=U;I<i.t;++I)h.data[I]=l(N,i.data[I]);h.t=i.t}h.s=l(this.s,i.s),h.clamp()},s.prototype.changeBit=function(i,l){var h=s.ONE.shiftLeft(i);return this.bitwiseTo(h,l,h),h},s.prototype.addTo=function(i,l){for(var h=0,I=0,N=Math.min(i.t,this.t);h<N;)I+=this.data[h]+i.data[h],l.data[h++]=I&this.DM,I>>=this.DB;if(i.t<this.t){for(I+=i.s;h<this.t;)I+=this.data[h],l.data[h++]=I&this.DM,I>>=this.DB;I+=this.s}else{for(I+=this.s;h<i.t;)I+=i.data[h],l.data[h++]=I&this.DM,I>>=this.DB;I+=i.s}l.s=I<0?-1:0,I>0?l.data[h++]=I:I<-1&&(l.data[h++]=this.DV+I),l.t=h,l.clamp()},s.prototype.dMultiply=function(i){this.data[this.t]=this.am(0,i-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(i,l){if(0!=i){for(;this.t<=l;)this.data[this.t++]=0;for(this.data[l]+=i;this.data[l]>=this.DV;)this.data[l]-=this.DV,++l>=this.t&&(this.data[this.t++]=0),++this.data[l]}},s.prototype.multiplyLowerTo=function(i,l,h){var I,N=Math.min(this.t+i.t,l);for(h.s=0,h.t=N;N>0;)h.data[--N]=0;for(I=h.t-this.t;N<I;++N)h.data[N+this.t]=this.am(0,i.data[N],h,N,0,this.t);for(I=Math.min(i.t,l);N<I;++N)this.am(0,i.data[N],h,N,0,l-N);h.clamp()},s.prototype.multiplyUpperTo=function(i,l,h){--l;var I=h.t=this.t+i.t-l;for(h.s=0;--I>=0;)h.data[I]=0;for(I=Math.max(l-this.t,0);I<i.t;++I)h.data[this.t+I-l]=this.am(l-I,i.data[I],h,0,0,this.t+I-l);h.clamp(),h.drShiftTo(1,h)},s.prototype.modInt=function(i){if(i<=0)return 0;var l=this.DV%i,h=this.s<0?i-1:0;if(this.t>0)if(0==l)h=this.data[0]%i;else for(var I=this.t-1;I>=0;--I)h=(l*h+this.data[I])%i;return h},s.prototype.millerRabin=function(i){var l=this.subtract(s.ONE),h=l.getLowestSetBit();if(h<=0)return!1;for(var I,N=l.shiftRight(h),U={nextBytes:function(q){for(var $=0;$<q.length;++$)q[$]=Math.floor(256*Math.random())}},W=0;W<i;++W){do{I=new s(this.bitLength(),U)}while(I.compareTo(s.ONE)<=0||I.compareTo(l)>=0);var Y=I.modPow(N,this);if(0!=Y.compareTo(s.ONE)&&0!=Y.compareTo(l)){for(var et=1;et++<h&&0!=Y.compareTo(l);)if(0==(Y=Y.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=Y.compareTo(l))return!1}}return!0},s.prototype.clone=function(){var i=m();return this.copyTo(i),i},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},s.prototype.toByteArray=function(){var i=this.t,l=new Array;l[0]=this.s;var h,I=this.DB-i*this.DB%8,N=0;if(i-- >0)for(I<this.DB&&(h=this.data[i]>>I)!=(this.s&this.DM)>>I&&(l[N++]=h|this.s<<this.DB-I);i>=0;)I<8?(h=(this.data[i]&(1<<I)-1)<<8-I,h|=this.data[--i]>>(I+=this.DB-8)):(h=this.data[i]>>(I-=8)&255,I<=0&&(I+=this.DB,--i)),0!=(128&h)&&(h|=-256),0==N&&(128&this.s)!=(128&h)&&++N,(N>0||h!=this.s)&&(l[N++]=h);return l},s.prototype.equals=function(i){return 0==this.compareTo(i)},s.prototype.min=function(i){return this.compareTo(i)<0?this:i},s.prototype.max=function(i){return this.compareTo(i)>0?this:i},s.prototype.and=function(i){var l=m();return this.bitwiseTo(i,E,l),l},s.prototype.or=function(i){var l=m();return this.bitwiseTo(i,k,l),l},s.prototype.xor=function(i){var l=m();return this.bitwiseTo(i,L,l),l},s.prototype.andNot=function(i){var l=m();return this.bitwiseTo(i,P,l),l},s.prototype.not=function(){for(var i=m(),l=0;l<this.t;++l)i.data[l]=this.DM&~this.data[l];return i.t=this.t,i.s=~this.s,i},s.prototype.shiftLeft=function(i){var l=m();return i<0?this.rShiftTo(-i,l):this.lShiftTo(i,l),l},s.prototype.shiftRight=function(i){var l=m();return i<0?this.lShiftTo(-i,l):this.rShiftTo(i,l),l},s.prototype.getLowestSetBit=function(){for(var i=0;i<this.t;++i)if(0!=this.data[i])return i*this.DB+V(this.data[i]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var i=0,l=this.s&this.DM,h=0;h<this.t;++h)i+=y(this.data[h]^l);return i},s.prototype.testBit=function(i){var l=Math.floor(i/this.DB);return l>=this.t?0!=this.s:0!=(this.data[l]&1<<i%this.DB)},s.prototype.setBit=function(i){return this.changeBit(i,k)},s.prototype.clearBit=function(i){return this.changeBit(i,P)},s.prototype.flipBit=function(i){return this.changeBit(i,L)},s.prototype.add=function(i){var l=m();return this.addTo(i,l),l},s.prototype.subtract=function(i){var l=m();return this.subTo(i,l),l},s.prototype.multiply=function(i){var l=m();return this.multiplyTo(i,l),l},s.prototype.divide=function(i){var l=m();return this.divRemTo(i,l,null),l},s.prototype.remainder=function(i){var l=m();return this.divRemTo(i,null,l),l},s.prototype.divideAndRemainder=function(i){var l=m(),h=m();return this.divRemTo(i,l,h),new Array(l,h)},s.prototype.modPow=function(i,l){var h,I,N=i.bitLength(),U=g(1);if(N<=0)return U;h=N<18?1:N<48?3:N<144?4:N<768?5:6,I=N<8?new _(l):l.isEven()?new R(l):new b(l);var W=new Array,Y=3,et=h-1,q=(1<<h)-1;if(W[1]=I.convert(this),h>1){var $=m();for(I.sqrTo(W[1],$);Y<=q;)W[Y]=m(),I.mulTo($,W[Y-2],W[Y]),Y+=2}var z,w,x=i.t-1,ot=!0,T=m();for(N=C(i.data[x])-1;x>=0;){for(N>=et?z=i.data[x]>>N-et&q:(z=(i.data[x]&(1<<N+1)-1)<<et-N,x>0&&(z|=i.data[x-1]>>this.DB+N-et)),Y=h;0==(1&z);)z>>=1,--Y;if((N-=Y)<0&&(N+=this.DB,--x),ot)W[z].copyTo(U),ot=!1;else{for(;Y>1;)I.sqrTo(U,T),I.sqrTo(T,U),Y-=2;Y>0?I.sqrTo(U,T):(w=U,U=T,T=w),I.mulTo(T,W[z],U)}for(;x>=0&&0==(i.data[x]&1<<N);)I.sqrTo(U,T),w=U,U=T,T=w,--N<0&&(N=this.DB-1,--x)}return I.revert(U)},s.prototype.modInverse=function(i){var l=i.isEven();if(this.isEven()&&l||0==i.signum())return s.ZERO;for(var h=i.clone(),I=this.clone(),N=g(1),U=g(0),W=g(0),Y=g(1);0!=h.signum();){for(;h.isEven();)h.rShiftTo(1,h),l?(N.isEven()&&U.isEven()||(N.addTo(this,N),U.subTo(i,U)),N.rShiftTo(1,N)):U.isEven()||U.subTo(i,U),U.rShiftTo(1,U);for(;I.isEven();)I.rShiftTo(1,I),l?(W.isEven()&&Y.isEven()||(W.addTo(this,W),Y.subTo(i,Y)),W.rShiftTo(1,W)):Y.isEven()||Y.subTo(i,Y),Y.rShiftTo(1,Y);h.compareTo(I)>=0?(h.subTo(I,h),l&&N.subTo(W,N),U.subTo(Y,U)):(I.subTo(h,I),l&&W.subTo(N,W),Y.subTo(U,Y))}return 0!=I.compareTo(s.ONE)?s.ZERO:Y.compareTo(i)>=0?Y.subtract(i):Y.signum()<0?(Y.addTo(i,Y),Y.signum()<0?Y.add(i):Y):Y},s.prototype.pow=function(i){return this.exp(i,new e)},s.prototype.gcd=function(i){var l=this.s<0?this.negate():this.clone(),h=i.s<0?i.negate():i.clone();if(l.compareTo(h)<0){var I=l;l=h,h=I}var N=l.getLowestSetBit(),U=h.getLowestSetBit();if(U<0)return l;for(N<U&&(U=N),U>0&&(l.rShiftTo(U,l),h.rShiftTo(U,h));l.signum()>0;)(N=l.getLowestSetBit())>0&&l.rShiftTo(N,l),(N=h.getLowestSetBit())>0&&h.rShiftTo(N,h),l.compareTo(h)>=0?(l.subTo(h,l),l.rShiftTo(1,l)):(h.subTo(l,h),h.rShiftTo(1,h));return U>0&&h.lShiftTo(U,h),h},s.prototype.isProbablePrime=function(i){var l,h=this.abs();if(1==h.t&&h.data[0]<=a[a.length-1]){for(l=0;l<a.length;++l)if(h.data[0]==a[l])return!0;return!1}if(h.isEven())return!1;for(l=1;l<a.length;){for(var I=a[l],N=l+1;N<a.length&&I<S;)I*=a[N++];for(I=h.modInt(I);l<N;)if(I%a[l++]==0)return!1}return h.millerRabin(i)}},{"./forge":16}],20:[function(D,Q,Z){var r=D("./forge");D("./util"),D("./random"),D("./jsbn"),Q.exports=r.kem=r.kem||{};var t=r.jsbn.BigInteger;function s(m,f,p,n){m.generate=function(v,d){for(var u=new r.util.ByteBuffer,o=Math.ceil(d/n)+p,g=new r.util.ByteBuffer,C=p;C<o;++C){g.putInt32(C),f.start(),f.update(v+g.getBytes());var _=f.digest();u.putBytes(_.getBytes(n))}return u.truncate(u.length()-d),u.getBytes()}}r.kem.rsa={},r.kem.rsa.create=function(m,f){var p=(f=f||{}).prng||r.random;return{encrypt:function(n,v){var d,u=Math.ceil(n.n.bitLength()/8);do{d=new t(r.util.bytesToHex(p.getBytesSync(u)),16).mod(n.n)}while(d.compareTo(t.ONE)<=0);var o=u-(d=r.util.hexToBytes(d.toString(16))).length;return o>0&&(d=r.util.fillString(String.fromCharCode(0),o)+d),{encapsulation:n.encrypt(d,"NONE"),key:m.generate(d,v)}},decrypt:function(n,v,d){var u=n.decrypt(v,"NONE");return m.generate(u,d)}}},r.kem.kdf1=function(m,f){s(this,m,0,f||m.digestLength)},r.kem.kdf2=function(m,f){s(this,m,1,f||m.digestLength)}},{"./forge":16,"./jsbn":19,"./random":39,"./util":48}],21:[function(D,Q,Z){var r=D("./forge");D("./util"),Q.exports=r.log=r.log||{},r.log.levels=["none","error","warning","info","debug","verbose","max"];var t={},s=[],m=null;r.log.LEVEL_LOCKED=2,r.log.NO_LEVEL_CHECK=4,r.log.INTERPOLATE=8;for(var f=0;f<r.log.levels.length;++f){var p=r.log.levels[f];t[p]={index:f,name:p.toUpperCase()}}r.log.logMessage=function(g){for(var C=t[g.level].index,_=0;_<s.length;++_){var b=s[_];b.flags&r.log.NO_LEVEL_CHECK?b.f(g):C<=t[b.level].index&&b.f(b,g)}},r.log.prepareStandard=function(g){"standard"in g||(g.standard=t[g.level].name+" ["+g.category+"] "+g.message)},r.log.prepareFull=function(g){if(!("full"in g)){var C=[g.message];C=C.concat([]),g.full=r.util.format.apply(this,C)}},r.log.prepareStandardFull=function(g){"standardFull"in g||(r.log.prepareStandard(g),g.standardFull=g.standard)};var n=["error","warning","info","debug","verbose"];for(f=0;f<n.length;++f)!function(g){r.log[g]=function(C,_){var b=Array.prototype.slice.call(arguments).slice(2),E={timestamp:new Date,level:g,category:C,message:_,arguments:b};r.log.logMessage(E)}}(n[f]);if(r.log.makeLogger=function(g){var C={flags:0,f:g};return r.log.setLevel(C,"none"),C},r.log.setLevel=function(g,C){var _=!1;if(g&&!(g.flags&r.log.LEVEL_LOCKED))for(var b=0;b<r.log.levels.length;++b)if(C==r.log.levels[b]){g.level=C,_=!0;break}return _},r.log.lock=function(g,C){void 0===C||C?g.flags|=r.log.LEVEL_LOCKED:g.flags&=~r.log.LEVEL_LOCKED},r.log.addLogger=function(g){s.push(g)},"undefined"!=typeof console&&"log"in console){var v;if(console.error&&console.warn&&console.info&&console.debug){var d={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},u=function(g,C){r.log.prepareStandard(C);var _=d[C.level],b=[C.standard];b=b.concat(C.arguments.slice()),_.apply(console,b)};v=r.log.makeLogger(u)}else u=function(g,C){r.log.prepareStandardFull(C),console.log(C.standardFull)},v=r.log.makeLogger(u);r.log.setLevel(v,"debug"),r.log.addLogger(v),m=v}else console={log:function(){}};if(null!==m){var o=r.util.getQueryVariables();"console.level"in o&&r.log.setLevel(m,o["console.level"].slice(-1)[0]),"console.lock"in o&&"true"==o["console.lock"].slice(-1)[0]&&r.log.lock(m)}r.log.consoleLogger=m},{"./forge":16,"./util":48}],22:[function(D,Q,Z){Q.exports=D("./md"),D("./md5"),D("./sha1"),D("./sha256"),D("./sha512")},{"./md":23,"./md5":24,"./sha1":42,"./sha256":43,"./sha512":44}],23:[function(D,Q,Z){var r=D("./forge");Q.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}},{"./forge":16}],24:[function(D,Q,Z){var r=D("./forge");D("./md"),D("./util");var t=Q.exports=r.md5=r.md5||{};r.md.md5=r.md.algorithms.md5=t,t.create=function(){n||function(){s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],f=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],p=new Array(64);for(var C=0;C<64;++C)p[C]=Math.floor(4294967296*Math.abs(Math.sin(C+1)));n=!0}();var d=null,u=r.util.createBuffer(),o=new Array(16),g={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){g.messageLength=0,g.fullMessageLength=g.messageLength64=[];for(var C=g.messageLengthSize/4,_=0;_<C;++_)g.fullMessageLength.push(0);return u=r.util.createBuffer(),d={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},g}};return g.start(),g.update=function(C,_){"utf8"===_&&(C=r.util.encodeUtf8(C));var b=C.length;g.messageLength+=b,b=[b/4294967296>>>0,b>>>0];for(var E=g.fullMessageLength.length-1;E>=0;--E)g.fullMessageLength[E]+=b[1],b[1]=b[0]+(g.fullMessageLength[E]/4294967296>>>0),g.fullMessageLength[E]=g.fullMessageLength[E]>>>0,b[0]=b[1]/4294967296>>>0;return u.putBytes(C),v(d,o,u),(u.read>2048||0===u.length())&&u.compact(),g},g.digest=function(){var C=r.util.createBuffer();C.putBytes(u.bytes()),C.putBytes(s.substr(0,g.blockLength-(g.fullMessageLength[g.fullMessageLength.length-1]+g.messageLengthSize&g.blockLength-1)));for(var b,E=0,k=g.fullMessageLength.length-1;k>=0;--k)E=(b=8*g.fullMessageLength[k]+E)/4294967296>>>0,C.putInt32Le(b>>>0);var L={h0:d.h0,h1:d.h1,h2:d.h2,h3:d.h3};v(L,o,C);var P=r.util.createBuffer();return P.putInt32Le(L.h0),P.putInt32Le(L.h1),P.putInt32Le(L.h2),P.putInt32Le(L.h3),P},g};var s=null,m=null,f=null,p=null,n=!1;function v(d,u,o){for(var g,C,_,b,E,k,L,P=o.length();P>=64;){for(C=d.h0,_=d.h1,b=d.h2,E=d.h3,L=0;L<16;++L)u[L]=o.getInt32Le(),g=C+(E^_&(b^E))+p[L]+u[L],C=E,E=b,b=_,_+=g<<(k=f[L])|g>>>32-k;for(;L<32;++L)g=C+(b^E&(_^b))+p[L]+u[m[L]],C=E,E=b,b=_,_+=g<<(k=f[L])|g>>>32-k;for(;L<48;++L)g=C+(_^b^E)+p[L]+u[m[L]],C=E,E=b,b=_,_+=g<<(k=f[L])|g>>>32-k;for(;L<64;++L)g=C+(b^(_|~E))+p[L]+u[m[L]],C=E,E=b,b=_,_+=g<<(k=f[L])|g>>>32-k;d.h0=d.h0+C|0,d.h1=d.h1+_|0,d.h2=d.h2+b|0,d.h3=d.h3+E|0,P-=64}}},{"./forge":16,"./md":23,"./util":48}],25:[function(D,Q,Z){var r=D("./forge");D("./mgf1"),Q.exports=r.mgf=r.mgf||{},r.mgf.mgf1=r.mgf1},{"./forge":16,"./mgf1":26}],26:[function(D,Q,Z){var r=D("./forge");D("./util"),r.mgf=r.mgf||{},(Q.exports=r.mgf.mgf1=r.mgf1=r.mgf1||{}).create=function(t){return{generate:function(s,m){for(var f=new r.util.ByteBuffer,p=Math.ceil(m/t.digestLength),n=0;n<p;n++){var v=new r.util.ByteBuffer;v.putInt32(n),t.start(),t.update(s+v.getBytes()),f.putBuffer(t.digest())}return f.truncate(f.length()-m),f.getBytes()}}}},{"./forge":16,"./util":48}],27:[function(D,Q,Z){var r=D("./forge");r.pki=r.pki||{};var t=Q.exports=r.pki.oids=r.oids=r.oids||{};function s(f,p){t[f]=p,t[p]=f}function m(f,p){t[f]=p}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.5","serialName"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.13","description"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),m("2.5.29.1","authorityKeyIdentifier"),m("2.5.29.2","keyAttributes"),m("2.5.29.3","certificatePolicies"),m("2.5.29.4","keyUsageRestriction"),m("2.5.29.5","policyMapping"),m("2.5.29.6","subtreesConstraint"),m("2.5.29.7","subjectAltName"),m("2.5.29.8","issuerAltName"),m("2.5.29.9","subjectDirectoryAttributes"),m("2.5.29.10","basicConstraints"),m("2.5.29.11","nameConstraints"),m("2.5.29.12","policyConstraints"),m("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),m("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),m("2.5.29.20","cRLNumber"),m("2.5.29.21","cRLReason"),m("2.5.29.22","expirationDate"),m("2.5.29.23","instructionCode"),m("2.5.29.24","invalidityDate"),m("2.5.29.25","cRLDistributionPoints"),m("2.5.29.26","issuingDistributionPoint"),m("2.5.29.27","deltaCRLIndicator"),m("2.5.29.28","issuingDistributionPoint"),m("2.5.29.29","certificateIssuer"),m("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),m("2.5.29.33","policyMappings"),m("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),m("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),m("2.5.29.46","freshestCRL"),m("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},{"./forge":16}],28:[function(D,Q,Z){var r=D("./forge");if(D("./aes"),D("./asn1"),D("./des"),D("./md"),D("./oids"),D("./pbkdf2"),D("./pem"),D("./random"),D("./rc2"),D("./rsa"),D("./util"),void 0===t)var t=r.jsbn.BigInteger;var s=r.asn1,m=r.pki=r.pki||{};Q.exports=m.pbe=r.pbe=r.pbe||{};var f=m.oids,p={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},n={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},v={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function d(g,C){return g.start().update(C).digest().getBytes()}function u(g){var C;if(g){if(!(C=m.oids[s.derToOid(g)])){var _=new Error("Unsupported PRF OID.");throw _.oid=g,_.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],_}}else C="hmacWithSHA1";return o(C)}function o(g){var C=r.md;switch(g){case"hmacWithSHA224":C=r.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":g=g.substr(8).toLowerCase();break;default:var _=new Error("Unsupported PRF algorithm.");throw _.algorithm=g,_.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],_}if(!C||!(g in C))throw new Error("Unknown hash algorithm: "+g);return C[g].create()}m.encryptPrivateKeyInfo=function(g,C,_){(_=_||{}).saltSize=_.saltSize||8,_.count=_.count||2048,_.algorithm=_.algorithm||"aes128",_.prfAlgorithm=_.prfAlgorithm||"sha1";var b,E,k,W,Y,et,q,L=r.random.getBytesSync(_.saltSize),P=_.count,V=s.integerToDer(P);if(0===_.algorithm.indexOf("aes")||"des"===_.algorithm){var y,e,A;switch(_.algorithm){case"aes128":b=16,y=16,e=f["aes128-CBC"],A=r.aes.createEncryptionCipher;break;case"aes192":b=24,y=16,e=f["aes192-CBC"],A=r.aes.createEncryptionCipher;break;case"aes256":b=32,y=16,e=f["aes256-CBC"],A=r.aes.createEncryptionCipher;break;case"des":b=8,y=8,e=f.desCBC,A=r.des.createEncryptionCipher;break;default:throw(h=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=_.algorithm,h}var R="hmacWith"+_.prfAlgorithm.toUpperCase(),a=o(R),S=r.pkcs5.pbkdf2(C,L,P,b,a),i=r.random.getBytesSync(y);(I=A(S)).start(i),I.update(s.toDer(g)),I.finish(),k=I.output.getBytes();var l=(W=V,Y=b,et=R,q=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,L),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,W.getBytes())]),"hmacWithSHA1"!==et&&q.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,r.util.hexToBytes(Y.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(m.oids[et]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")])),q);E=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(f.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(f.pkcs5PBKDF2).getBytes()),l]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(e).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,i)])])])}else{var h;if("3des"!==_.algorithm)throw(h=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=_.algorithm,h;b=24;var I,N=new r.util.ByteBuffer(L);S=m.pbe.generatePkcs12Key(C,N,1,P,b),i=m.pbe.generatePkcs12Key(C,N,2,P,b),(I=r.des.createEncryptionCipher(S)).start(i),I.update(s.toDer(g)),I.finish(),k=I.output.getBytes(),E=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(f["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,L),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,V.getBytes())])])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[E,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,k)])},m.decryptPrivateKeyInfo=function(g,C){var _=null,b={},E=[];if(!s.validate(g,p,b,E)){var k=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw k.errors=E,k}var L=s.derToOid(b.encryptionOid),P=m.pbe.getCipher(L,b.encryptionParams,C),V=r.util.createBuffer(b.encryptedData);return P.update(V),P.finish()&&(_=s.fromDer(P.output)),_},m.encryptedPrivateKeyToPem=function(g,C){var _={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(g).getBytes()};return r.pem.encode(_,{maxline:C})},m.encryptedPrivateKeyFromPem=function(g){var C=r.pem.decode(g)[0];if("ENCRYPTED PRIVATE KEY"!==C.type){var _=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw _.headerType=C.type,_}if(C.procType&&"ENCRYPTED"===C.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(C.body)},m.encryptRsaPrivateKey=function(g,C,_){if(!(_=_||{}).legacy){var b=m.wrapRsaPrivateKey(m.privateKeyToAsn1(g));return b=m.encryptPrivateKeyInfo(b,C,_),m.encryptedPrivateKeyToPem(b)}var E,k,L,P;switch(_.algorithm){case"aes128":E="AES-128-CBC",L=16,k=r.random.getBytesSync(16),P=r.aes.createEncryptionCipher;break;case"aes192":E="AES-192-CBC",L=24,k=r.random.getBytesSync(16),P=r.aes.createEncryptionCipher;break;case"aes256":E="AES-256-CBC",L=32,k=r.random.getBytesSync(16),P=r.aes.createEncryptionCipher;break;case"3des":E="DES-EDE3-CBC",L=24,k=r.random.getBytesSync(8),P=r.des.createEncryptionCipher;break;case"des":E="DES-CBC",L=8,k=r.random.getBytesSync(8),P=r.des.createEncryptionCipher;break;default:var V=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+_.algorithm+'".');throw V.algorithm=_.algorithm,V}var y=P(r.pbe.opensslDeriveBytes(C,k.substr(0,8),L));y.start(k),y.update(s.toDer(m.privateKeyToAsn1(g))),y.finish();var e={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:E,parameters:r.util.bytesToHex(k).toUpperCase()},body:y.output.getBytes()};return r.pem.encode(e)},m.decryptRsaPrivateKey=function(g,C){var _=null,b=r.pem.decode(g)[0];if("ENCRYPTED PRIVATE KEY"!==b.type&&"PRIVATE KEY"!==b.type&&"RSA PRIVATE KEY"!==b.type)throw(L=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=L,L;if(b.procType&&"ENCRYPTED"===b.procType.type){var E,k;switch(b.dekInfo.algorithm){case"DES-CBC":E=8,k=r.des.createDecryptionCipher;break;case"DES-EDE3-CBC":E=24,k=r.des.createDecryptionCipher;break;case"AES-128-CBC":E=16,k=r.aes.createDecryptionCipher;break;case"AES-192-CBC":E=24,k=r.aes.createDecryptionCipher;break;case"AES-256-CBC":E=32,k=r.aes.createDecryptionCipher;break;case"RC2-40-CBC":E=5,k=function(y){return r.rc2.createDecryptionCipher(y,40)};break;case"RC2-64-CBC":E=8,k=function(y){return r.rc2.createDecryptionCipher(y,64)};break;case"RC2-128-CBC":E=16,k=function(y){return r.rc2.createDecryptionCipher(y,128)};break;default:var L;throw(L=new Error('Could not decrypt private key; unsupported encryption algorithm "'+b.dekInfo.algorithm+'".')).algorithm=b.dekInfo.algorithm,L}var P=r.util.hexToBytes(b.dekInfo.parameters),V=k(r.pbe.opensslDeriveBytes(C,P.substr(0,8),E));if(V.start(P),V.update(r.util.createBuffer(b.body)),!V.finish())return _;_=V.output.getBytes()}else _=b.body;return null!==(_="ENCRYPTED PRIVATE KEY"===b.type?m.decryptPrivateKeyInfo(s.fromDer(_),C):s.fromDer(_))&&(_=m.privateKeyFromAsn1(_)),_},m.pbe.generatePkcs12Key=function(g,C,_,b,E,k){var L,P;if(null==k){if(!("sha1"in r.md))throw new Error('"sha1" hash algorithm unavailable.');k=r.md.sha1.create()}var V=k.digestLength,y=k.blockLength,e=new r.util.ByteBuffer,A=new r.util.ByteBuffer;if(null!=g){for(P=0;P<g.length;P++)A.putInt16(g.charCodeAt(P));A.putInt16(0)}var R=A.length(),a=C.length(),S=new r.util.ByteBuffer;S.fillWithByte(_,y);var i=y*Math.ceil(a/y),l=new r.util.ByteBuffer;for(P=0;P<i;P++)l.putByte(C.at(P%a));var h=y*Math.ceil(R/y),I=new r.util.ByteBuffer;for(P=0;P<h;P++)I.putByte(A.at(P%R));var N=l;N.putBuffer(I);for(var U=Math.ceil(E/V),W=1;W<=U;W++){var Y=new r.util.ByteBuffer;Y.putBytes(S.bytes()),Y.putBytes(N.bytes());for(var et=0;et<b;et++)k.start(),k.update(Y.getBytes()),Y=k.digest();var q=new r.util.ByteBuffer;for(P=0;P<y;P++)q.putByte(Y.at(P%V));var $=Math.ceil(a/y)+Math.ceil(R/y),z=new r.util.ByteBuffer;for(L=0;L<$;L++){var w=new r.util.ByteBuffer(N.getBytes(y)),x=511;for(P=q.length()-1;P>=0;P--)x>>=8,x+=q.at(P)+w.at(P),w.setAt(P,255&x);z.putBuffer(w)}N=z,e.putBuffer(Y)}return e.truncate(e.length()-E),e},m.pbe.getCipher=function(g,C,_){switch(g){case m.oids.pkcs5PBES2:return m.pbe.getCipherForPBES2(g,C,_);case m.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case m.oids["pbewithSHAAnd40BitRC2-CBC"]:return m.pbe.getCipherForPKCS12PBE(g,C,_);default:var b=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw b.oid=g,b.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],b}},m.pbe.getCipherForPBES2=function(g,C,_){var b,E={},k=[];if(!s.validate(C,n,E,k))throw(b=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=k,b;if((g=s.derToOid(E.kdfOid))!==m.oids.pkcs5PBKDF2)throw(b=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=g,b.supportedOids=["pkcs5PBKDF2"],b;if((g=s.derToOid(E.encOid))!==m.oids["aes128-CBC"]&&g!==m.oids["aes192-CBC"]&&g!==m.oids["aes256-CBC"]&&g!==m.oids["des-EDE3-CBC"]&&g!==m.oids.desCBC)throw(b=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=g,b.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],b;var L,P,V=E.kdfSalt,y=r.util.createBuffer(E.kdfIterationCount);switch(y=y.getInt(y.length()<<3),m.oids[g]){case"aes128-CBC":L=16,P=r.aes.createDecryptionCipher;break;case"aes192-CBC":L=24,P=r.aes.createDecryptionCipher;break;case"aes256-CBC":L=32,P=r.aes.createDecryptionCipher;break;case"des-EDE3-CBC":L=24,P=r.des.createDecryptionCipher;break;case"desCBC":L=8,P=r.des.createDecryptionCipher}var e=u(E.prfOid),A=r.pkcs5.pbkdf2(_,V,y,L,e),R=E.encIv,a=P(A);return a.start(R),a},m.pbe.getCipherForPKCS12PBE=function(g,C,_){var b={},E=[];if(!s.validate(C,v,b,E))throw(e=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=E,e;var k,L,P,V=r.util.createBuffer(b.salt),y=r.util.createBuffer(b.iterations);switch(y=y.getInt(y.length()<<3),g){case m.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:k=24,L=8,P=r.des.startDecrypting;break;case m.oids["pbewithSHAAnd40BitRC2-CBC"]:k=5,L=8,P=function(a,S){var i=r.rc2.createDecryptionCipher(a,40);return i.start(S,null),i};break;default:var e;throw(e=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=g,e}var A=u(b.prfOid),R=m.pbe.generatePkcs12Key(_,V,1,y,k,A);return A.start(),P(R,m.pbe.generatePkcs12Key(_,V,2,y,L,A))},m.pbe.opensslDeriveBytes=function(g,C,_,b){if(null==b){if(!("md5"in r.md))throw new Error('"md5" hash algorithm unavailable.');b=r.md.md5.create()}null===C&&(C="");for(var E=[d(b,g+C)],k=16,L=1;k<_;++L,k+=16)E.push(d(b,E[L-1]+g+C));return E.join("").substr(0,_)}},{"./aes":7,"./asn1":9,"./des":14,"./forge":16,"./md":23,"./oids":27,"./pbkdf2":29,"./pem":30,"./random":39,"./rc2":40,"./rsa":41,"./util":48}],29:[function(D,Q,Z){(function(r){var t=D("./forge");D("./hmac"),D("./md"),D("./util");var s,m=t.pkcs5=t.pkcs5||{};t.util.isNodejs&&!t.options.usePureJavaScript&&(s=D("crypto")),Q.exports=t.pbkdf2=m.pbkdf2=function(f,p,n,v,d,u){if("function"==typeof d&&(u=d,d=null),t.util.isNodejs&&!t.options.usePureJavaScript&&s.pbkdf2&&(null===d||"object"!=typeof d)&&(s.pbkdf2Sync.length>4||!d||"sha1"===d))return"string"!=typeof d&&(d="sha1"),f=r.from(f,"binary"),p=r.from(p,"binary"),u?4===s.pbkdf2Sync.length?s.pbkdf2(f,p,n,v,function(R,a){if(R)return u(R);u(null,a.toString("binary"))}):s.pbkdf2(f,p,n,v,d,function(R,a){if(R)return u(R);u(null,a.toString("binary"))}):4===s.pbkdf2Sync.length?s.pbkdf2Sync(f,p,n,v).toString("binary"):s.pbkdf2Sync(f,p,n,v,d).toString("binary");if(null==d&&(d="sha1"),"string"==typeof d){if(!(d in t.md.algorithms))throw new Error("Unknown hash algorithm: "+d);d=t.md[d].create()}var o=d.digestLength;if(v>4294967295*o){var g=new Error("Derived key is too long.");if(u)return u(g);throw g}var C=Math.ceil(v/o),_=v-(C-1)*o,b=t.hmac.create();b.start(d,f);var E,k,L,P="";if(!u){for(var V=1;V<=C;++V){b.start(null,null),b.update(p),b.update(t.util.int32ToBytes(V)),E=L=b.digest().getBytes();for(var y=2;y<=n;++y)b.start(null,null),b.update(L),k=b.digest().getBytes(),E=t.util.xorBytes(E,k,o),L=k;P+=V<C?E:E.substr(0,_)}return P}function e(){if(V>C)return u(null,P);b.start(null,null),b.update(p),b.update(t.util.int32ToBytes(V)),E=L=b.digest().getBytes(),y=2,A()}function A(){if(y<=n)return b.start(null,null),b.update(L),k=b.digest().getBytes(),E=t.util.xorBytes(E,k,o),L=k,++y,t.util.setImmediate(A);P+=V<C?E:E.substr(0,_),++V,e()}V=1,e()}}).call(this,D("buffer").Buffer)},{"./forge":16,"./hmac":17,"./md":23,"./util":48,buffer:6,crypto:6}],30:[function(D,Q,Z){var r=D("./forge");D("./util");var t=Q.exports=r.pem=r.pem||{};function s(f){for(var p=f.name+": ",n=[],v=function(C,_){return" "+_},d=0;d<f.values.length;++d)n.push(f.values[d].replace(/^(\S+\r\n)/,v));p+=n.join(",")+"\r\n";var u=0,o=-1;for(d=0;d<p.length;++d,++u)if(u>65&&-1!==o){var g=p[o];","===g?(++o,p=p.substr(0,o)+"\r\n "+p.substr(o)):p=p.substr(0,o)+"\r\n"+g+p.substr(o+1),u=d-o-1,o=-1,++d}else" "!==p[d]&&"\t"!==p[d]&&","!==p[d]||(o=d);return p}function m(f){return f.replace(/^\s+/,"")}t.encode=function(f,p){p=p||{};var n,v="-----BEGIN "+f.type+"-----\r\n";if(f.procType&&(v+=s(n={name:"Proc-Type",values:[String(f.procType.version),f.procType.type]})),f.contentDomain&&(v+=s(n={name:"Content-Domain",values:[f.contentDomain]})),f.dekInfo&&(n={name:"DEK-Info",values:[f.dekInfo.algorithm]},f.dekInfo.parameters&&n.values.push(f.dekInfo.parameters),v+=s(n)),f.headers)for(var d=0;d<f.headers.length;++d)v+=s(f.headers[d]);return f.procType&&(v+="\r\n"),(v+=r.util.encode64(f.body,p.maxline||64)+"\r\n")+"-----END "+f.type+"-----\r\n"},t.decode=function(f){for(var p,n=[],v=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,d=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,u=/\r?\n/;p=v.exec(f);){var o={type:p[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:r.util.decode64(p[3])};if(n.push(o),p[2]){for(var g=p[2].split(u),C=0;p&&C<g.length;){for(var _=g[C].replace(/\s+$/,""),b=C+1;b<g.length;++b){var E=g[b];if(!/\s/.test(E[0]))break;_+=E,C=b}if(p=_.match(d)){for(var k={name:p[1],values:[]},L=p[2].split(","),P=0;P<L.length;++P)k.values.push(m(L[P]));if(o.procType)if(o.contentDomain||"Content-Domain"!==k.name)if(o.dekInfo||"DEK-Info"!==k.name)o.headers.push(k);else{if(0===k.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:L[0],parameters:L[1]||null}}else o.contentDomain=L[0]||"";else{if("Proc-Type"!==k.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==k.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:L[0],type:L[1]}}}++C}if("ENCRYPTED"===o.procType&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===n.length)throw new Error("Invalid PEM formatted message.");return n}},{"./forge":16,"./util":48}],31:[function(D,Q,Z){var r=D("./forge");D("./util"),D("./random"),D("./sha1");var t=Q.exports=r.pkcs1=r.pkcs1||{};function s(m,f,p){p||(p=r.md.sha1.create());for(var n="",v=Math.ceil(f/p.digestLength),d=0;d<v;++d){var u=String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,255&d);p.start(),p.update(m+u),n+=p.digest().getBytes()}return n.substring(0,f)}t.encode_rsa_oaep=function(m,f,p){var n,v,d,u;"string"==typeof p?(n=p,v=arguments[3]||void 0,d=arguments[4]||void 0):p&&(n=p.label||void 0,v=p.seed||void 0,d=p.md||void 0,p.mgf1&&p.mgf1.md&&(u=p.mgf1.md)),d?d.start():d=r.md.sha1.create(),u||(u=d);var o=Math.ceil(m.n.bitLength()/8),g=o-2*d.digestLength-2;if(f.length>g)throw(k=new Error("RSAES-OAEP input message length is too long.")).length=f.length,k.maxLength=g,k;n||(n=""),d.update(n,"raw");for(var C=d.digest(),_="",b=g-f.length,E=0;E<b;E++)_+="\0";var k,L=C.getBytes()+_+"\x01"+f;if(v){if(v.length!==d.digestLength)throw(k=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=v.length,k.digestLength=d.digestLength,k}else v=r.random.getBytes(d.digestLength);var P=s(v,o-d.digestLength-1,u),V=r.util.xorBytes(L,P,L.length),y=s(V,d.digestLength,u);return"\0"+r.util.xorBytes(v,y,v.length)+V},t.decode_rsa_oaep=function(m,f,p){var n,v,d;"string"==typeof p?(n=p,v=arguments[3]||void 0):p&&(n=p.label||void 0,v=p.md||void 0,p.mgf1&&p.mgf1.md&&(d=p.mgf1.md));var u=Math.ceil(m.n.bitLength()/8);if(f.length!==u)throw(P=new Error("RSAES-OAEP encoded message length is invalid.")).length=f.length,P.expectedLength=u,P;if(void 0===v?v=r.md.sha1.create():v.start(),d||(d=v),u<2*v.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),v.update(n,"raw");for(var o=v.digest().getBytes(),g=f.charAt(0),C=f.substring(1,v.digestLength+1),_=f.substring(1+v.digestLength),b=s(_,v.digestLength,d),E=s(r.util.xorBytes(C,b,C.length),u-v.digestLength-1,d),k=r.util.xorBytes(_,E,_.length),L=k.substring(0,v.digestLength),P="\0"!==g,V=0;V<v.digestLength;++V)P|=o.charAt(V)!==L.charAt(V);for(var y=1,e=v.digestLength,A=v.digestLength;A<k.length;A++){var R=k.charCodeAt(A);P|=R&(y?65534:0),e+=y&=1&R^1}if(P||1!==k.charCodeAt(e))throw new Error("Invalid RSAES-OAEP padding.");return k.substring(e+1)}},{"./forge":16,"./random":39,"./sha1":42,"./util":48}],32:[function(D,Q,Z){var r=D("./forge");D("./asn1"),D("./hmac"),D("./oids"),D("./pkcs7asn1"),D("./pbe"),D("./random"),D("./rsa"),D("./sha1"),D("./util"),D("./x509");var t=r.asn1,s=r.pki,m=Q.exports=r.pkcs12=r.pkcs12||{},f={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},p={name:"PFX",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},f,{name:"PFX.macData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},n={name:"SafeBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},v={name:"Attribute",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,capture:"values"}]},d={name:"CertBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:t.Class.UNIVERSAL,type:t.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function u(b,E,k,L){for(var P=[],V=0;V<b.length;V++)for(var y=0;y<b[V].safeBags.length;y++){var e=b[V].safeBags[y];void 0!==L&&e.type!==L||(null!==E?void 0!==e.attributes[E]&&e.attributes[E].indexOf(k)>=0&&P.push(e):P.push(e))}return P}function o(b){if(b.composed||b.constructed){for(var E=r.util.createBuffer(),k=0;k<b.value.length;++k)E.putBytes(b.value[k].value);b.composed=b.constructed=!1,b.value=E.getBytes()}return b}function g(b,E){var k={},L=[];if(!t.validate(b,r.pkcs7.asn1.encryptedDataValidator,k,L))throw(P=new Error("Cannot read EncryptedContentInfo.")).errors=L,P;var P,V=t.derToOid(k.contentType);if(V!==s.oids.data)throw(P=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=V,P;V=t.derToOid(k.encAlgorithm);var y=s.pbe.getCipher(V,k.encParameter,E),e=o(k.encryptedContentAsn1),A=r.util.createBuffer(e.value);if(y.update(A),!y.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return y.output.getBytes()}function C(b,E,k){if(!E&&0===b.length)return[];if((b=t.fromDer(b,E)).tagClass!==t.Class.UNIVERSAL||b.type!==t.Type.SEQUENCE||!0!==b.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var L=[],P=0;P<b.value.length;P++){var y={},e=[];if(!t.validate(b.value[P],n,y,e))throw(i=new Error("Cannot read SafeBag.")).errors=e,i;var A,R,a={type:t.derToOid(y.bagId),attributes:_(y.bagAttributes)};L.push(a);var S=y.bagValue.value[0];switch(a.type){case s.oids.pkcs8ShroudedKeyBag:if(null===(S=s.decryptPrivateKeyInfo(S,k)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case s.oids.keyBag:try{a.key=s.privateKeyFromAsn1(S)}catch(l){a.key=null,a.asn1=S}continue;case s.oids.certBag:A=d,R=function(){if(t.derToOid(y.certId)!==s.oids.x509Certificate){var l=new Error("Unsupported certificate type, only X.509 supported.");throw l.oid=t.derToOid(y.certId),l}var h=t.fromDer(y.cert,E);try{a.cert=s.certificateFromAsn1(h,!0)}catch(I){a.cert=null,a.asn1=h}};break;default:var i;throw(i=new Error("Unsupported PKCS#12 SafeBag type.")).oid=a.type,i}if(void 0!==A&&!t.validate(S,A,y,e))throw(i=new Error("Cannot read PKCS#12 "+A.name)).errors=e,i;R()}return L}function _(b){var E={};if(void 0!==b)for(var k=0;k<b.length;++k){var L={},P=[];if(!t.validate(b[k],v,L,P)){var V=new Error("Cannot read PKCS#12 BagAttribute.");throw V.errors=P,V}var y=t.derToOid(L.oid);if(void 0!==s.oids[y]){E[s.oids[y]]=[];for(var e=0;e<L.values.length;++e)E[s.oids[y]].push(L.values[e].value)}}return E}m.pkcs12FromAsn1=function(b,E,k){"string"==typeof E?(k=E,E=!0):void 0===E&&(E=!0);var L={};if(!t.validate(b,p,L,[]))throw(P=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=P,P;var P,V={version:L.version.charCodeAt(0),safeContents:[],getBags:function(h){var I,N={};return"localKeyId"in h?I=h.localKeyId:"localKeyIdHex"in h&&(I=r.util.hexToBytes(h.localKeyIdHex)),void 0===I&&!("friendlyName"in h)&&"bagType"in h&&(N[h.bagType]=u(V.safeContents,null,null,h.bagType)),void 0!==I&&(N.localKeyId=u(V.safeContents,"localKeyId",I,h.bagType)),"friendlyName"in h&&(N.friendlyName=u(V.safeContents,"friendlyName",h.friendlyName,h.bagType)),N},getBagsByFriendlyName:function(h,I){return u(V.safeContents,"friendlyName",h,I)},getBagsByLocalKeyId:function(h,I){return u(V.safeContents,"localKeyId",h,I)}};if(3!==L.version.charCodeAt(0))throw(P=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=L.version.charCodeAt(0),P;if(t.derToOid(L.contentType)!==s.oids.data)throw(P=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=t.derToOid(L.contentType),P;var y=L.content.value[0];if(y.tagClass!==t.Class.UNIVERSAL||y.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(y=o(y),L.mac){var e=null,A=0,R=t.derToOid(L.macAlgorithm);switch(R){case s.oids.sha1:e=r.md.sha1.create(),A=20;break;case s.oids.sha256:e=r.md.sha256.create(),A=32;break;case s.oids.sha384:e=r.md.sha384.create(),A=48;break;case s.oids.sha512:e=r.md.sha512.create(),A=64;break;case s.oids.md5:e=r.md.md5.create(),A=16}if(null===e)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+R);var a=new r.util.ByteBuffer(L.macSalt),S="macIterations"in L?parseInt(r.util.bytesToHex(L.macIterations),16):1,i=m.generateKey(k,a,3,S,A,e),l=r.hmac.create();if(l.start(e,i),l.update(y.value),l.getMac().getBytes()!==L.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(h,I,N,U){if((I=t.fromDer(I,N)).tagClass!==t.Class.UNIVERSAL||I.type!==t.Type.SEQUENCE||!0!==I.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var W=0;W<I.value.length;W++){var et={},q=[];if(!t.validate(I.value[W],f,et,q))throw(x=new Error("Cannot read ContentInfo.")).errors=q,x;var $={encrypted:!1},z=null,w=et.content.value[0];switch(t.derToOid(et.contentType)){case s.oids.data:if(w.tagClass!==t.Class.UNIVERSAL||w.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");z=o(w).value;break;case s.oids.encryptedData:z=g(w,U),$.encrypted=!0;break;default:var x;throw(x=new Error("Unsupported PKCS#12 contentType.")).contentType=t.derToOid(et.contentType),x}$.safeBags=C(z,N,U),h.safeContents.push($)}}(V,y.value,E,k),V},m.toPkcs12Asn1=function(b,E,k,L){(L=L||{}).saltSize=L.saltSize||8,L.count=L.count||2048,L.algorithm=L.algorithm||L.encAlgorithm||"aes128","useMac"in L||(L.useMac=!0),"localKeyId"in L||(L.localKeyId=null),"generateLocalKeyId"in L||(L.generateLocalKeyId=!0);var P,V=L.localKeyId;if(null!==V)V=r.util.hexToBytes(V);else if(L.generateLocalKeyId)if(E){var y=r.util.isArray(E)?E[0]:E;"string"==typeof y&&(y=s.certificateFromPem(y)),(z=r.md.sha1.create()).update(t.toDer(s.certificateToAsn1(y)).getBytes()),V=z.digest().getBytes()}else V=r.random.getBytes(20);var e=[];null!==V&&e.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.localKeyId).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,V)])])),"friendlyName"in L&&e.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.friendlyName).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.BMPSTRING,!1,L.friendlyName)])])),e.length>0&&(P=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e));var A=[],R=[];null!==E&&(R=r.util.isArray(E)?E:[E]);for(var a=[],S=0;S<R.length;++S){"string"==typeof(E=R[S])&&(E=s.certificateFromPem(E));var i=0===S?P:void 0,l=s.certificateToAsn1(E),h=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.certBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.x509Certificate).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(l).getBytes())])])]),i]);a.push(h)}if(a.length>0){var I=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,a),N=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(I).getBytes())])]);A.push(N)}var U=null;if(null!==b){var W=s.wrapRsaPrivateKey(s.privateKeyToAsn1(b));U=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,null===k?[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.keyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[W]),P]:[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.pkcs8ShroudedKeyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[s.encryptPrivateKeyInfo(W,k,L)]),P]);var Y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[U]),et=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(Y).getBytes())])]);A.push(et)}var q,$=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,A);if(L.useMac){var z=r.md.sha1.create(),w=new r.util.ByteBuffer(r.random.getBytes(L.saltSize)),x=L.count,ot=(b=m.generateKey(k,w,3,x,20),r.hmac.create());ot.start(z,b),ot.update(t.toDer($).getBytes());var T=ot.getMac();q=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.sha1).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,T.getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,w.getBytes()),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(x).getBytes())])}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(3).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer($).getBytes())])]),q])},m.generateKey=r.pbe.generatePkcs12Key},{"./asn1":9,"./forge":16,"./hmac":17,"./oids":27,"./pbe":28,"./pkcs7asn1":34,"./random":39,"./rsa":41,"./sha1":42,"./util":48,"./x509":49}],33:[function(D,Q,Z){var r=D("./forge");D("./aes"),D("./asn1"),D("./des"),D("./oids"),D("./pem"),D("./pkcs7asn1"),D("./random"),D("./util"),D("./x509");var t=r.asn1,s=Q.exports=r.pkcs7=r.pkcs7||{};function m(u){var o={},g=[];if(!t.validate(u,s.asn1.recipientInfoValidator,o,g)){var C=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw C.errors=g,C}return{version:o.version.charCodeAt(0),issuer:r.pki.RDNAttributesAsArray(o.issuer),serialNumber:r.util.createBuffer(o.serial).toHex(),encryptedContent:{algorithm:t.derToOid(o.encAlgorithm),parameter:o.encParameter.value,content:o.encKey}}}function f(u){for(var o,g=[],C=0;C<u.length;++C)g.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer((o=u[C]).version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:o.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,r.util.hexToBytes(o.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,o.encryptedContent.content)]));return g}function p(u){var o=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(u.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:u.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,r.util.hexToBytes(u.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(u.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])]);if(u.authenticatedAttributesAsn1&&o.value.push(u.authenticatedAttributesAsn1),o.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(u.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])),o.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,u.signature)),u.unauthenticatedAttributes.length>0){for(var g=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]),C=0;C<u.unauthenticatedAttributes.length;++C)g.values.push(n(u.unauthenticatedAttributes[C]));o.value.push(g)}return o}function n(u){var o;if(u.type===r.pki.oids.contentType)o=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(u.value).getBytes());else if(u.type===r.pki.oids.messageDigest)o=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,u.value.bytes());else if(u.type===r.pki.oids.signingTime){var g=new Date("1950-01-01T00:00:00Z"),C=new Date("2050-01-01T00:00:00Z"),_=u.value;if("string"==typeof _){var b=Date.parse(_);_=isNaN(b)?13===_.length?t.utcTimeToDate(_):t.generalizedTimeToDate(_):new Date(b)}o=_>=g&&_<C?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(_)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(_))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(u.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[o])])}function v(u,o,g){var C={};if(!t.validate(o,g,C,[])){var _=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw _.errors=_,_}if(t.derToOid(C.contentType)!==r.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(C.encryptedContent){var b="";if(r.util.isArray(C.encryptedContent))for(var E=0;E<C.encryptedContent.length;++E){if(C.encryptedContent[E].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");b+=C.encryptedContent[E].value}else b=C.encryptedContent;u.encryptedContent={algorithm:t.derToOid(C.encAlgorithm),parameter:r.util.createBuffer(C.encParameter.value),content:r.util.createBuffer(b)}}if(C.content){if(b="",r.util.isArray(C.content))for(E=0;E<C.content.length;++E){if(C.content[E].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");b+=C.content[E].value}else b=C.content;u.content=r.util.createBuffer(b)}return u.version=C.version.charCodeAt(0),u.rawCapture=C,C}function d(u){if(void 0===u.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===u.content){var o;switch(u.encryptedContent.algorithm){case r.pki.oids["aes128-CBC"]:case r.pki.oids["aes192-CBC"]:case r.pki.oids["aes256-CBC"]:o=r.aes.createDecryptionCipher(u.encryptedContent.key);break;case r.pki.oids.desCBC:case r.pki.oids["des-EDE3-CBC"]:o=r.des.createDecryptionCipher(u.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+u.encryptedContent.algorithm)}if(o.start(u.encryptedContent.parameter),o.update(u.encryptedContent.content),!o.finish())throw new Error("Symmetric decryption failed.");u.content=o.output}}s.messageFromPem=function(u){var o=r.pem.decode(u)[0];if("PKCS7"!==o.type){var g=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw g.headerType=o.type,g}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var C=t.fromDer(o.body);return s.messageFromAsn1(C)},s.messageToPem=function(u,o){var g={type:"PKCS7",body:t.toDer(u.toAsn1()).getBytes()};return r.pem.encode(g,{maxline:o})},s.messageFromAsn1=function(u){var o={},g=[];if(!t.validate(u,s.asn1.contentInfoValidator,o,g)){var C=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw C.errors=g,C}var _,b=t.derToOid(o.contentType);switch(b){case r.pki.oids.envelopedData:_=s.createEnvelopedData();break;case r.pki.oids.encryptedData:_=s.createEncryptedData();break;case r.pki.oids.signedData:_=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+b+" is not (yet) supported.")}return _.fromAsn1(o.content.value[0]),_},s.createSignedData=function(){var u=null;return u={type:r.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(o){if(v(u,o,s.asn1.signedDataValidator),u.certificates=[],u.crls=[],u.digestAlgorithmIdentifiers=[],u.contentInfo=null,u.signerInfos=[],u.rawCapture.certificates)for(var g=u.rawCapture.certificates.value,C=0;C<g.length;++C)u.certificates.push(r.pki.certificateFromAsn1(g[C]))},toAsn1:function(){u.contentInfo||u.sign();for(var o=[],g=0;g<u.certificates.length;++g)o.push(r.pki.certificateToAsn1(u.certificates[g]));var C=[],_=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(u.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,u.digestAlgorithmIdentifiers),u.contentInfo])]);return o.length>0&&_.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,o)),C.length>0&&_.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,C)),_.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,u.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(u.type).getBytes()),_])},addSigner:function(o){var g=o.issuer,C=o.serialNumber;if(o.certificate){var _=o.certificate;"string"==typeof _&&(_=r.pki.certificateFromPem(_)),g=_.issuer.attributes,C=_.serialNumber}var b=o.key;if(!b)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof b&&(b=r.pki.privateKeyFromPem(b));var E=o.digestAlgorithm||r.pki.oids.sha1;switch(E){case r.pki.oids.sha1:case r.pki.oids.sha256:case r.pki.oids.sha384:case r.pki.oids.sha512:case r.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+E)}var k=o.authenticatedAttributes||[];if(k.length>0){for(var L=!1,P=!1,V=0;V<k.length;++V){var y=k[V];if(L||y.type!==r.pki.oids.contentType){if(!P&&y.type===r.pki.oids.messageDigest&&(P=!0,L))break}else if(L=!0,P)break}if(!L||!P)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}u.signers.push({key:b,version:1,issuer:g,serialNumber:C,digestAlgorithm:E,signatureAlgorithm:r.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:k,unauthenticatedAttributes:[]})},sign:function(o){var g;o=o||{},("object"!=typeof u.content||null===u.contentInfo)&&(u.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.pki.oids.data).getBytes())]),"content"in u&&(u.content instanceof r.util.ByteBuffer?g=u.content.bytes():"string"==typeof u.content&&(g=r.util.encodeUtf8(u.content)),o.detached?u.detachedContent=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,g):u.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,g)])))),0!==u.signers.length&&function(C){var _;if(!(_=u.detachedContent?u.detachedContent:(_=u.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var b=t.derToOid(u.contentInfo.value[0].value),E=t.toDer(_);for(var k in E.getByte(),t.getBerValueLength(E),E=E.getBytes(),C)C[k].start().update(E);for(var L=new Date,P=0;P<u.signers.length;++P){var V=u.signers[P];if(0===V.authenticatedAttributes.length){if(b!==r.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{V.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var y=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]),e=0;e<V.authenticatedAttributes.length;++e){var A=V.authenticatedAttributes[e];A.type===r.pki.oids.messageDigest?A.value=C[V.digestAlgorithm].digest():A.type===r.pki.oids.signingTime&&(A.value||(A.value=L)),y.value.push(n(A)),V.authenticatedAttributesAsn1.value.push(n(A))}E=t.toDer(y).getBytes(),V.md.start().update(E)}V.signature=V.key.sign(V.md,"RSASSA-PKCS1-V1_5")}u.signerInfos=function(R){for(var a=[],S=0;S<R.length;++S)a.push(p(R[S]));return a}(u.signers)}(function(){for(var C={},_=0;_<u.signers.length;++_){var b=u.signers[_];(E=b.digestAlgorithm)in C||(C[E]=r.md[r.pki.oids[E]].create()),b.md=0===b.authenticatedAttributes.length?C[E]:r.md[r.pki.oids[E]].create()}for(var E in u.digestAlgorithmIdentifiers=[],C)u.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(E).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]));return C}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(o){"string"==typeof o&&(o=r.pki.certificateFromPem(o)),u.certificates.push(o)},addCertificateRevokationList:function(o){throw new Error("PKCS#7 CRL support not yet implemented.")}}},s.createEncryptedData=function(){var u=null;return u={type:r.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(o){v(u,o,s.asn1.encryptedDataValidator)},decrypt:function(o){void 0!==o&&(u.encryptedContent.key=o),d(u)}}},s.createEnvelopedData=function(){var u=null;return u={type:r.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(o){var g=v(u,o,s.asn1.envelopedDataValidator);u.recipients=function(C){for(var _=[],b=0;b<C.length;++b)_.push(m(C[b]));return _}(g.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(u.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(u.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,f(u.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,(o=u.encryptedContent,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,o.parameter.getBytes())]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,o.content.getBytes())])]))])])]);var o},findRecipient:function(o){for(var g=o.issuer.attributes,C=0;C<u.recipients.length;++C){var _=u.recipients[C],b=_.issuer;if(_.serialNumber===o.serialNumber&&b.length===g.length){for(var E=!0,k=0;k<g.length;++k)if(b[k].type!==g[k].type||b[k].value!==g[k].value){E=!1;break}if(E)return _}}return null},decrypt:function(o,g){if(void 0===u.encryptedContent.key&&void 0!==o&&void 0!==g)switch(o.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:case r.pki.oids.desCBC:var C=g.decrypt(o.encryptedContent.content);u.encryptedContent.key=r.util.createBuffer(C);break;default:throw new Error("Unsupported asymmetric cipher, OID "+o.encryptedContent.algorithm)}d(u)},addRecipient:function(o){u.recipients.push({version:0,issuer:o.issuer.attributes,serialNumber:o.serialNumber,encryptedContent:{algorithm:r.pki.oids.rsaEncryption,key:o.publicKey}})},encrypt:function(o,g){if(void 0===u.encryptedContent.content){var C,_,b;switch(o=o||u.encryptedContent.key,g=g||u.encryptedContent.algorithm){case r.pki.oids["aes128-CBC"]:C=16,_=16,b=r.aes.createEncryptionCipher;break;case r.pki.oids["aes192-CBC"]:C=24,_=16,b=r.aes.createEncryptionCipher;break;case r.pki.oids["aes256-CBC"]:C=32,_=16,b=r.aes.createEncryptionCipher;break;case r.pki.oids["des-EDE3-CBC"]:C=24,_=8,b=r.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+g)}if(void 0===o)o=r.util.createBuffer(r.random.getBytes(C));else if(o.length()!=C)throw new Error("Symmetric key has wrong length; got "+o.length()+" bytes, expected "+C+".");u.encryptedContent.algorithm=g,u.encryptedContent.key=o,u.encryptedContent.parameter=r.util.createBuffer(r.random.getBytes(_));var E=b(o);if(E.start(u.encryptedContent.parameter.copy()),E.update(u.content),!E.finish())throw new Error("Symmetric encryption failed.");u.encryptedContent.content=E.output}for(var k=0;k<u.recipients.length;++k){var L=u.recipients[k];if(void 0===L.encryptedContent.content){if(L.encryptedContent.algorithm!==r.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+L.encryptedContent.algorithm);L.encryptedContent.content=L.encryptedContent.key.encrypt(u.encryptedContent.key.data)}}}}}},{"./aes":7,"./asn1":9,"./des":14,"./forge":16,"./oids":27,"./pem":30,"./pkcs7asn1":34,"./random":39,"./util":48,"./x509":49}],34:[function(D,Q,Z){var r=D("./forge");D("./asn1"),D("./util");var t=r.asn1,s=Q.exports=r.pkcs7asn1=r.pkcs7asn1||{};r.pkcs7=r.pkcs7||{},r.pkcs7.asn1=s;var m={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=m;var f={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(f)},s.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(f)},s.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},m,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[{name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]}]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},{"./asn1":9,"./forge":16,"./util":48}],35:[function(D,Q,Z){var r=D("./forge");D("./asn1"),D("./oids"),D("./pbe"),D("./pem"),D("./pbkdf2"),D("./pkcs12"),D("./pss"),D("./rsa"),D("./util"),D("./x509");var t=r.asn1,s=Q.exports=r.pki=r.pki||{};s.pemToDer=function(m){var f=r.pem.decode(m)[0];if(f.procType&&"ENCRYPTED"===f.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return r.util.createBuffer(f.body)},s.privateKeyFromPem=function(m){var f=r.pem.decode(m)[0];if("PRIVATE KEY"!==f.type&&"RSA PRIVATE KEY"!==f.type){var p=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw p.headerType=f.type,p}if(f.procType&&"ENCRYPTED"===f.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=t.fromDer(f.body);return s.privateKeyFromAsn1(n)},s.privateKeyToPem=function(m,f){var p={type:"RSA PRIVATE KEY",body:t.toDer(s.privateKeyToAsn1(m)).getBytes()};return r.pem.encode(p,{maxline:f})},s.privateKeyInfoToPem=function(m,f){var p={type:"PRIVATE KEY",body:t.toDer(m).getBytes()};return r.pem.encode(p,{maxline:f})}},{"./asn1":9,"./forge":16,"./oids":27,"./pbe":28,"./pbkdf2":29,"./pem":30,"./pkcs12":32,"./pss":38,"./rsa":41,"./util":48,"./x509":49}],36:[function(D,Q,Z){var r=D("./forge");D("./util"),D("./jsbn"),D("./random"),function(){if(r.prime)Q.exports=r.prime;else{var t=Q.exports=r.prime=r.prime||{},s=r.jsbn.BigInteger,m=[6,4,2,4,2,4,6,2],f=new s(null);f.fromInt(30);var p=function(d,u){return d|u};t.generateProbablePrime=function(d,u,o){"function"==typeof u&&(o=u,u={});var g=(u=u||{}).algorithm||"PRIMEINC";"string"==typeof g&&(g={name:g}),g.options=g.options||{};var b,E,k,L,C=u.prng||r.random,_={nextBytes:function(b){for(var E=C.getBytesSync(b.length),k=0;k<b.length;++k)b[k]=E.charCodeAt(k)}};if("PRIMEINC"===g.name)return b=d,E=_,L=o,"workers"in(k=g.options)?function(P,V,y,e){if("undefined"==typeof Worker)return n(P,V,y,e);var A=v(P,V),R=y.workers,a=y.workLoad||100,S=30*a/8,i=y.workerScript||"forge/prime.worker.js";if(-1===R)return r.util.estimateCores(function(h,I){h&&(I=2),R=I-1,l()});function l(){R=Math.max(1,R);for(var h=[],I=0;I<R;++I)h[I]=new Worker(i);for(I=0;I<R;++I)h[I].addEventListener("message",U);var N=!1;function U(W){if(!N){var Y=W.data;if(Y.found){for(var et=0;et<h.length;++et)h[et].terminate();return N=!0,e(null,new s(Y.prime,16))}A.bitLength()>P&&(A=v(P,V));var q=A.toString(16);W.target.postMessage({hex:q,workLoad:a}),A.dAddOffset(S,0)}}}l()}(b,E,k,L):n(b,E,k,L);throw new Error("Invalid prime generation algorithm: "+g.name)}}function n(d,u,o,g){var E,C=v(d,u),_=(E=C.bitLength())<=100?27:E<=150?18:E<=200?15:E<=250?12:E<=300?9:E<=350?8:E<=400?7:E<=500?6:E<=600?5:E<=800?4:E<=1250?3:2;"millerRabinTests"in o&&(_=o.millerRabinTests);var b=10;"maxBlockTime"in o&&(b=o.maxBlockTime),function E(k,L,P,V,y,e,A){var R=+new Date;do{if(k.bitLength()>L&&(k=v(L,P)),k.isProbablePrime(y))return A(null,k);k.dAddOffset(m[V++%8],0)}while(e<0||+new Date-R<e);r.util.setImmediate(function(){E(k,L,P,V,y,e,A)})}(C,d,u,0,_,b,g)}function v(d,u){var o=new s(d,u),g=d-1;return o.testBit(g)||o.bitwiseTo(s.ONE.shiftLeft(g),p,o),o.dAddOffset(31-o.mod(f).byteValue(),0),o}}()},{"./forge":16,"./jsbn":19,"./random":39,"./util":48}],37:[function(D,Q,Z){(function(r){var t=D("./forge");D("./util");var s=null;!t.util.isNodejs||t.options.usePureJavaScript||r.versions["node-webkit"]||(s=D("crypto")),(Q.exports=t.prng=t.prng||{}).create=function(m){for(var f={plugin:m,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},p=m.md,n=new Array(32),v=0;v<32;++v)n[v]=p.create();function d(){if(f.pools[0].messageLength>=32)return u();f.collect(f.seedFileSync(32-f.pools[0].messageLength<<5)),u()}function u(){f.reseeds=4294967295===f.reseeds?0:f.reseeds+1;var g=f.plugin.md.create();g.update(f.keyBytes);for(var C=1,_=0;_<32;++_)f.reseeds%C==0&&(g.update(f.pools[_].digest().getBytes()),f.pools[_].start()),C<<=1;f.keyBytes=g.digest().getBytes(),g.start(),g.update(f.keyBytes);var b=g.digest().getBytes();f.key=f.plugin.formatKey(f.keyBytes),f.seed=f.plugin.formatSeed(b),f.generated=0}function o(g){var C=null,_=t.util.globalScope,b=_.crypto||_.msCrypto;b&&b.getRandomValues&&(C=function(R){return b.getRandomValues(R)});var E=t.util.createBuffer();if(C)for(;E.length()<g;){var k=Math.max(1,Math.min(g-E.length(),65536)/4),L=new Uint32Array(Math.floor(k));try{C(L);for(var P=0;P<L.length;++P)E.putInt32(L[P])}catch(R){if(!("undefined"!=typeof QuotaExceededError&&R instanceof QuotaExceededError))throw R}}if(E.length()<g)for(var V,y,e,A=Math.floor(65536*Math.random());E.length()<g;)for(y=16807*(65535&A),y+=(32767&(V=16807*(A>>16)))<<16,A=4294967295&(y=(2147483647&(y+=V>>15))+(y>>31)),P=0;P<3;++P)e=A>>>(P<<3),e^=Math.floor(256*Math.random()),E.putByte(String.fromCharCode(255&e));return E.getBytes(g)}return f.pools=n,f.pool=0,f.generate=function(g,C){if(!C)return f.generateSync(g);var _=f.plugin.cipher,b=f.plugin.increment,E=f.plugin.formatKey,k=f.plugin.formatSeed,L=t.util.createBuffer();f.key=null,function P(V){if(V)return C(V);if(L.length()>=g)return C(null,L.getBytes(g));if(f.generated>1048575&&(f.key=null),null===f.key)return t.util.nextTick(function(){!function(e){if(f.pools[0].messageLength>=32)return u(),e();f.seedFile(32-f.pools[0].messageLength<<5,function(R,a){if(R)return e(R);f.collect(a),u(),e()})}(P)});var y=_(f.key,f.seed);f.generated+=y.length,L.putBytes(y),f.key=E(_(f.key,b(f.seed))),f.seed=k(_(f.key,f.seed)),t.util.setImmediate(P)}()},f.generateSync=function(g){var C=f.plugin.cipher,_=f.plugin.increment,b=f.plugin.formatKey,E=f.plugin.formatSeed;f.key=null;for(var k=t.util.createBuffer();k.length()<g;){f.generated>1048575&&(f.key=null),null===f.key&&d();var L=C(f.key,f.seed);f.generated+=L.length,k.putBytes(L),f.key=b(C(f.key,_(f.seed))),f.seed=E(C(f.key,f.seed))}return k.getBytes(g)},s?(f.seedFile=function(g,C){s.randomBytes(g,function(_,b){if(_)return C(_);C(null,b.toString())})},f.seedFileSync=function(g){return s.randomBytes(g).toString()}):(f.seedFile=function(g,C){try{C(null,o(g))}catch(_){C(_)}},f.seedFileSync=o),f.collect=function(g){for(var C=g.length,_=0;_<C;++_)f.pools[f.pool].update(g.substr(_,1)),f.pool=31===f.pool?0:f.pool+1},f.collectInt=function(g,C){for(var _="",b=0;b<C;b+=8)_+=String.fromCharCode(g>>b&255);f.collect(_)},f.registerWorker=function(g){g===self?f.seedFile=function(C,_){self.addEventListener("message",function b(E){var k=E.data;k.forge&&k.forge.prng&&(self.removeEventListener("message",b),_(k.forge.prng.err,k.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:C}}})}:g.addEventListener("message",function(C){var _=C.data;_.forge&&_.forge.prng&&f.seedFile(_.forge.prng.needed,function(b,E){g.postMessage({forge:{prng:{err:b,bytes:E}}})})})},f}}).call(this,D("_process"))},{"./forge":16,"./util":48,_process:50,crypto:6}],38:[function(D,Q,Z){var r=D("./forge");D("./random"),D("./util"),(Q.exports=r.pss=r.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var s,m=t.md,f=t.mgf,p=m.digestLength,n=t.salt||null;if("string"==typeof n&&(n=r.util.createBuffer(n)),"saltLength"in t)s=t.saltLength;else{if(null===n)throw new Error("Salt length not specified or specific salt not given.");s=n.length()}if(null!==n&&n.length()!==s)throw new Error("Given salt length does not match length of given salt.");var v=t.prng||r.random;return{encode:function(d,u){var o,g,C=u-1,_=Math.ceil(C/8),b=d.digest().getBytes();if(_<p+s+2)throw new Error("Message is too long to encrypt.");g=null===n?v.getBytesSync(s):n.bytes();var E=new r.util.ByteBuffer;E.fillWithByte(0,8),E.putBytes(b),E.putBytes(g),m.start(),m.update(E.getBytes());var k=m.digest().getBytes(),L=new r.util.ByteBuffer;L.fillWithByte(0,_-s-p-2),L.putByte(1),L.putBytes(g);var P=L.getBytes(),V=_-p-1,y=f.generate(k,V),e="";for(o=0;o<V;o++)e+=String.fromCharCode(P.charCodeAt(o)^y.charCodeAt(o));var A=65280>>8*_-C&255;return(e=String.fromCharCode(e.charCodeAt(0)&~A)+e.substr(1))+k+String.fromCharCode(188)},verify:function(d,u,o){var g,C=o-1,_=Math.ceil(C/8);if(u=u.substr(-_),_<p+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==u.charCodeAt(_-1))throw new Error("Encoded message does not end in 0xBC.");var b=_-p-1,E=u.substr(0,b),k=u.substr(b,p),L=65280>>8*_-C&255;if(0!=(E.charCodeAt(0)&L))throw new Error("Bits beyond keysize not zero as expected.");var P=f.generate(k,b),V="";for(g=0;g<b;g++)V+=String.fromCharCode(E.charCodeAt(g)^P.charCodeAt(g));V=String.fromCharCode(V.charCodeAt(0)&~L)+V.substr(1);var y=_-p-s-2;for(g=0;g<y;g++)if(0!==V.charCodeAt(g))throw new Error("Leftmost octets not zero as expected");if(1!==V.charCodeAt(y))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var e=V.substr(-s),A=new r.util.ByteBuffer;return A.fillWithByte(0,8),A.putBytes(d),A.putBytes(e),m.start(),m.update(A.getBytes()),k===m.digest().getBytes()}}}},{"./forge":16,"./random":39,"./util":48}],39:[function(D,Q,Z){var r=D("./forge");D("./aes"),D("./sha256"),D("./prng"),D("./util"),r.random&&r.random.getBytes?Q.exports=r.random:function(t){var s={},m=new Array(4),f=r.util.createBuffer();function p(){var C=r.prng.create(s);return C.getBytes=function(_,b){return C.generate(_,b)},C.getBytesSync=function(_){return C.generate(_)},C}s.formatKey=function(C){var _=r.util.createBuffer(C);return(C=new Array(4))[0]=_.getInt32(),C[1]=_.getInt32(),C[2]=_.getInt32(),C[3]=_.getInt32(),r.aes._expandKey(C,!1)},s.formatSeed=function(C){var _=r.util.createBuffer(C);return(C=new Array(4))[0]=_.getInt32(),C[1]=_.getInt32(),C[2]=_.getInt32(),C[3]=_.getInt32(),C},s.cipher=function(C,_){return r.aes._updateBlock(C,_,m,!1),f.putInt32(m[0]),f.putInt32(m[1]),f.putInt32(m[2]),f.putInt32(m[3]),f.getBytes()},s.increment=function(C){return++C[3],C},s.md=r.md.sha256;var n=p(),v=null,d=r.util.globalScope,u=d.crypto||d.msCrypto;if(u&&u.getRandomValues&&(v=function(C){return u.getRandomValues(C)}),r.options.usePureJavaScript||!r.util.isNodejs&&!v){if("undefined"==typeof window||window,n.collectInt(+new Date,32),"undefined"!=typeof navigator){var o="";for(var g in navigator)try{"string"==typeof navigator[g]&&(o+=navigator[g])}catch(C){}n.collect(o),o=null}t&&(t().mousemove(function(C){n.collectInt(C.clientX,16),n.collectInt(C.clientY,16)}),t().keypress(function(C){n.collectInt(C.charCode,8)}))}if(r.random)for(var g in n)r.random[g]=n[g];else r.random=n;r.random.createInstance=p,Q.exports=r.random}("undefined"!=typeof jQuery?jQuery:null)},{"./aes":7,"./forge":16,"./prng":37,"./sha256":43,"./util":48}],40:[function(D,Q,Z){var r=D("./forge");D("./util");var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5];Q.exports=r.rc2=r.rc2||{},r.rc2.expandKey=function(f,p){"string"==typeof f&&(f=r.util.createBuffer(f)),p=p||128;var n,v=f,d=f.length(),u=p,o=Math.ceil(u/8),g=255>>(7&u);for(n=d;n<128;n++)v.putByte(t[v.at(n-1)+v.at(n-d)&255]);for(v.setAt(128-o,t[v.at(128-o)&g]),n=127-o;n>=0;n--)v.setAt(n,t[v.at(n+1)^v.at(n+o)]);return v};var m=function(f,p,n){var v,d,u,o,g=!1,C=null,_=null,b=null,E=[];for(f=r.rc2.expandKey(f,p),u=0;u<64;u++)E.push(f.getInt16Le());n?(v=function(P){for(u=0;u<4;u++)P[u]+=E[o]+(P[(u+3)%4]&P[(u+2)%4])+(~P[(u+3)%4]&P[(u+1)%4]),P[u]=(V=P[u])<<(y=s[u])&65535|(65535&V)>>16-y,o++;var V,y},d=function(P){for(u=0;u<4;u++)P[u]+=E[63&P[(u+3)%4]]}):(v=function(P){for(u=3;u>=0;u--)P[u]=(65535&(V=P[u]))>>(y=s[u])|V<<16-y&65535,P[u]-=E[o]+(P[(u+3)%4]&P[(u+2)%4])+(~P[(u+3)%4]&P[(u+1)%4]),o--;var V,y},d=function(P){for(u=3;u>=0;u--)P[u]-=E[63&P[(u+3)%4]]});var k=function(P){var V=[];for(u=0;u<4;u++){var y=C.getInt16Le();null!==b&&(n?y^=b.getInt16Le():b.putInt16Le(y)),V.push(65535&y)}o=n?0:63;for(var e=0;e<P.length;e++)for(var A=0;A<P[e][0];A++)P[e][1](V);for(u=0;u<4;u++)null!==b&&(n?b.putInt16Le(V[u]):V[u]^=b.getInt16Le()),_.putInt16Le(V[u])},L=null;return L={start:function(P,V){P&&"string"==typeof P&&(P=r.util.createBuffer(P)),g=!1,C=r.util.createBuffer(),_=V||new r.util.createBuffer,b=P,L.output=_},update:function(P){for(g||C.putBuffer(P);C.length()>=8;)k([[5,v],[1,d],[6,v],[1,d],[5,v]])},finish:function(P){var V=!0;if(n)if(P)V=P(8,C,!n);else{var y=8===C.length()?8:8-C.length();C.fillWithByte(y,y)}if(V&&(g=!0,L.update()),!n&&(V=0===C.length()))if(P)V=P(8,_,!n);else{var e=_.length(),A=_.at(e-1);A>e?V=!1:_.truncate(A)}return V}}};r.rc2.startEncrypting=function(f,p,n){var v=r.rc2.createEncryptionCipher(f,128);return v.start(p,n),v},r.rc2.createEncryptionCipher=function(f,p){return m(f,p,!0)},r.rc2.startDecrypting=function(f,p,n){var v=r.rc2.createDecryptionCipher(f,128);return v.start(p,n),v},r.rc2.createDecryptionCipher=function(f,p){return m(f,p,!1)}},{"./forge":16,"./util":48}],41:[function(D,Q,Z){var r=D("./forge");if(D("./asn1"),D("./jsbn"),D("./oids"),D("./pkcs1"),D("./prime"),D("./random"),D("./util"),void 0===t)var t=r.jsbn.BigInteger;var s=r.util.isNodejs?D("crypto"):null,m=r.asn1,f=r.util;r.pki=r.pki||{},Q.exports=r.pki.rsa=r.rsa=r.rsa||{};var p=r.pki,n=[6,4,2,4,2,4,6,2],v={name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},d={name:"RSAPrivateKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},u={name:"RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},o=r.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},g=function(e){if(!(e.algorithm in p.oids)){var R=new Error("Unknown message digest algorithm.");throw R.algorithm=e.algorithm,R}var a=m.oidToDer(p.oids[e.algorithm]).getBytes(),S=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]),i=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]);i.value.push(m.create(m.Class.UNIVERSAL,m.Type.OID,!1,a)),i.value.push(m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,""));var l=m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,e.digest().getBytes());return S.value.push(i),S.value.push(l),m.toDer(S).getBytes()},C=function(e,A,R){if(R)return e.modPow(A.e,A.n);if(!A.p||!A.q)return e.modPow(A.d,A.n);var a;A.dP||(A.dP=A.d.mod(A.p.subtract(t.ONE))),A.dQ||(A.dQ=A.d.mod(A.q.subtract(t.ONE))),A.qInv||(A.qInv=A.q.modInverse(A.p));do{a=new t(r.util.bytesToHex(r.random.getBytes(A.n.bitLength()/8)),16)}while(a.compareTo(A.n)>=0||!a.gcd(A.n).equals(t.ONE));for(var S=(e=e.multiply(a.modPow(A.e,A.n)).mod(A.n)).mod(A.p).modPow(A.dP,A.p),i=e.mod(A.q).modPow(A.dQ,A.q);S.compareTo(i)<0;)S=S.add(A.p);return S.subtract(i).multiply(A.qInv).mod(A.p).multiply(A.q).add(i).multiply(a.modInverse(A.n)).mod(A.n)};function _(e,A,R){var a=r.util.createBuffer(),S=Math.ceil(A.n.bitLength()/8);if(e.length>S-11){var i=new Error("Message is too long for PKCS#1 v1.5 padding.");throw i.length=e.length,i.max=S-11,i}a.putByte(0),a.putByte(R);var l,h=S-3-e.length;if(0===R||1===R){l=0===R?0:255;for(var I=0;I<h;++I)a.putByte(l)}else for(;h>0;){var N=0,U=r.random.getBytes(h);for(I=0;I<h;++I)0===(l=U.charCodeAt(I))?++N:a.putByte(l);h=N}return a.putByte(0),a.putBytes(e),a}function b(e,A,R,a){var S=Math.ceil(A.n.bitLength()/8),i=r.util.createBuffer(e),l=i.getByte(),h=i.getByte();if(0!==l||R&&0!==h&&1!==h||!R&&2!=h||R&&0===h&&void 0===a)throw new Error("Encryption block is invalid.");var I=0;if(0===h){I=S-3-a;for(var N=0;N<I;++N)if(0!==i.getByte())throw new Error("Encryption block is invalid.")}else if(1===h)for(I=0;i.length()>1;){if(255!==i.getByte()){--i.read;break}++I}else if(2===h)for(I=0;i.length()>1;){if(0===i.getByte()){--i.read;break}++I}if(0!==i.getByte()||I!==S-3-i.length())throw new Error("Encryption block is invalid.");return i.getBytes()}function E(e){var A=e.toString(16);A[0]>="8"&&(A="00"+A);var R=r.util.hexToBytes(A);return R.length>1&&(0===R.charCodeAt(0)&&0==(128&R.charCodeAt(1))||255===R.charCodeAt(0)&&128==(128&R.charCodeAt(1)))?R.substr(1):R}function k(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function L(e){return r.util.isNodejs&&"function"==typeof s[e]}function P(e){return void 0!==f.globalScope&&"object"==typeof f.globalScope.crypto&&"object"==typeof f.globalScope.crypto.subtle&&"function"==typeof f.globalScope.crypto.subtle[e]}function V(e){return void 0!==f.globalScope&&"object"==typeof f.globalScope.msCrypto&&"object"==typeof f.globalScope.msCrypto.subtle&&"function"==typeof f.globalScope.msCrypto.subtle[e]}function y(e){for(var A=r.util.hexToBytes(e.toString(16)),R=new Uint8Array(A.length),a=0;a<A.length;++a)R[a]=A.charCodeAt(a);return R}p.rsa.encrypt=function(e,A,R){var a,S=R,i=Math.ceil(A.n.bitLength()/8);!1!==R&&!0!==R?(S=2===R,a=_(e,A,R)):(a=r.util.createBuffer()).putBytes(e);for(var l=new t(a.toHex(),16),h=C(l,A,S).toString(16),I=r.util.createBuffer(),N=i-Math.ceil(h.length/2);N>0;)I.putByte(0),--N;return I.putBytes(r.util.hexToBytes(h)),I.getBytes()},p.rsa.decrypt=function(e,A,R,a){var S=Math.ceil(A.n.bitLength()/8);if(e.length!==S){var i=new Error("Encrypted message length is invalid.");throw i.length=e.length,i.expected=S,i}var l=new t(r.util.createBuffer(e).toHex(),16);if(l.compareTo(A.n)>=0)throw new Error("Encrypted message is invalid.");for(var h=C(l,A,R).toString(16),I=r.util.createBuffer(),N=S-Math.ceil(h.length/2);N>0;)I.putByte(0),--N;return I.putBytes(r.util.hexToBytes(h)),!1!==a?b(I.getBytes(),A,R):I.getBytes()},p.rsa.createKeyPairGenerationState=function(e,A,R){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var a,S=(R=R||{}).prng||r.random,i={nextBytes:function(h){for(var I=S.getBytesSync(h.length),N=0;N<h.length;++N)h[N]=I.charCodeAt(N)}},l=R.algorithm||"PRIMEINC";if("PRIMEINC"!==l)throw new Error("Invalid key generation algorithm: "+l);return(a={algorithm:l,state:0,bits:e,rng:i,eInt:A||65537,e:new t(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(a.eInt),a},p.rsa.stepKeyPairGenerationState=function(e,A){"algorithm"in e||(e.algorithm="PRIMEINC");var R=new t(null);R.fromInt(30);for(var a,S=0,i=function(W,Y){return W|Y},l=+new Date,h=0;null===e.keys&&(A<=0||h<A);){if(0===e.state){var I=null===e.p?e.pBits:e.qBits,N=I-1;0===e.pqState?(e.num=new t(I,e.rng),e.num.testBit(N)||e.num.bitwiseTo(t.ONE.shiftLeft(N),i,e.num),e.num.dAddOffset(31-e.num.mod(R).byteValue(),0),S=0,++e.pqState):1===e.pqState?e.num.bitLength()>I?e.pqState=0:e.num.isProbablePrime(k(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(n[S++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(t.ONE).gcd(e.e).compareTo(t.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(t.ONE),e.q1=e.q.subtract(t.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(t.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var U=e.e.modInverse(e.phi);e.keys={privateKey:p.rsa.setPrivateKey(e.n,e.e,U,e.p,e.q,U.mod(e.p1),U.mod(e.q1),e.q.modInverse(e.p)),publicKey:p.rsa.setPublicKey(e.n,e.e)}}h+=(a=+new Date)-l,l=a}return null!==e.keys},p.rsa.generateKeyPair=function(e,A,R,a){if(1===arguments.length?"object"==typeof e?(R=e,e=void 0):"function"==typeof e&&(a=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof A?(a=A,A=void 0):"number"!=typeof A&&(R=A,A=void 0):(R=e,a=A,e=void 0,A=void 0):3===arguments.length&&("number"==typeof A?"function"==typeof R&&(a=R,R=void 0):(a=R,R=A,A=void 0)),R=R||{},void 0===e&&(e=R.bits||2048),void 0===A&&(A=R.e||65537),!r.options.usePureJavaScript&&!R.prng&&e>=256&&e<=16384&&(65537===A||3===A))if(a){if(L("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:e,publicExponent:A,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(h,I,N){if(h)return a(h);a(null,{privateKey:p.privateKeyFromPem(N),publicKey:p.publicKeyFromPem(I)})});if(P("generateKey")&&P("exportKey"))return f.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:y(A),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(h){return f.globalScope.crypto.subtle.exportKey("pkcs8",h.privateKey)}).then(void 0,function(h){a(h)}).then(function(h){if(h){var I=p.privateKeyFromAsn1(m.fromDer(r.util.createBuffer(h)));a(null,{privateKey:I,publicKey:p.setRsaPublicKey(I.n,I.e)})}});if(V("generateKey")&&V("exportKey")){var S=f.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:y(A),hash:{name:"SHA-256"}},!0,["sign","verify"]);return S.oncomplete=function(h){var N=f.globalScope.msCrypto.subtle.exportKey("pkcs8",h.target.result.privateKey);N.oncomplete=function(U){var Y=p.privateKeyFromAsn1(m.fromDer(r.util.createBuffer(U.target.result)));a(null,{privateKey:Y,publicKey:p.setRsaPublicKey(Y.n,Y.e)})},N.onerror=function(U){a(U)}},void(S.onerror=function(h){a(h)})}}else if(L("generateKeyPairSync")){var i=s.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:A,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:p.privateKeyFromPem(i.privateKey),publicKey:p.publicKeyFromPem(i.publicKey)}}var l=p.rsa.createKeyPairGenerationState(e,A,R);if(!a)return p.rsa.stepKeyPairGenerationState(l,0),l.keys;!function(h,I,N){"function"==typeof I&&(N=I,I={});var U={algorithm:{name:(I=I||{}).algorithm||"PRIMEINC",options:{workers:I.workers||2,workLoad:I.workLoad||100,workerScript:I.workerScript}}};function W(){Y(h.pBits,function(q,$){return q?N(q):(h.p=$,null!==h.q?et(q,h.q):void Y(h.qBits,et))})}function Y(q,$){r.prime.generateProbablePrime(q,U,$)}function et(q,$){if(q)return N(q);if(h.q=$,h.p.compareTo(h.q)<0){var z=h.p;h.p=h.q,h.q=z}if(0!==h.p.subtract(t.ONE).gcd(h.e).compareTo(t.ONE))return h.p=null,void W();if(0!==h.q.subtract(t.ONE).gcd(h.e).compareTo(t.ONE))return h.q=null,void Y(h.qBits,et);if(h.p1=h.p.subtract(t.ONE),h.q1=h.q.subtract(t.ONE),h.phi=h.p1.multiply(h.q1),0!==h.phi.gcd(h.e).compareTo(t.ONE))return h.p=h.q=null,void W();if(h.n=h.p.multiply(h.q),h.n.bitLength()!==h.bits)return h.q=null,void Y(h.qBits,et);var w=h.e.modInverse(h.phi);h.keys={privateKey:p.rsa.setPrivateKey(h.n,h.e,w,h.p,h.q,w.mod(h.p1),w.mod(h.q1),h.q.modInverse(h.p)),publicKey:p.rsa.setPublicKey(h.n,h.e)},N(null,h.keys)}"prng"in I&&(U.prng=I.prng),W()}(l,R,a)},p.setRsaPublicKey=p.rsa.setPublicKey=function(e,A){var R={n:e,e:A,encrypt:function(a,S,i){if("string"==typeof S?S=S.toUpperCase():void 0===S&&(S="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===S)S={encode:function(h,I,N){return _(h,I,2).getBytes()}};else if("RSA-OAEP"===S||"RSAES-OAEP"===S)S={encode:function(h,I){return r.pkcs1.encode_rsa_oaep(I,h,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(S))S={encode:function(h){return h}};else if("string"==typeof S)throw new Error('Unsupported encryption scheme: "'+S+'".');var l=S.encode(a,R,!0);return p.rsa.encrypt(l,R,!0)},verify:function(a,S,i){"string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===i?i={verify:function(h,I){return I=b(I,R,!0),h===m.fromDer(I).value[1].value}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(h,I){return h===b(I,R,!0)}});var l=p.rsa.decrypt(S,R,!0,!1);return i.verify(a,l,R.n.bitLength())}};return R},p.setRsaPrivateKey=p.rsa.setPrivateKey=function(e,A,R,a,S,i,l,h){var I={n:e,e:A,d:R,p:a,q:S,dP:i,dQ:l,qInv:h,decrypt:function(N,U,W){"string"==typeof U?U=U.toUpperCase():void 0===U&&(U="RSAES-PKCS1-V1_5");var Y=p.rsa.decrypt(N,I,!1,!1);if("RSAES-PKCS1-V1_5"===U)U={decode:b};else if("RSA-OAEP"===U||"RSAES-OAEP"===U)U={decode:function(et,q){return r.pkcs1.decode_rsa_oaep(q,et,W)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(U))throw new Error('Unsupported encryption scheme: "'+U+'".');U={decode:function(et){return et}}}return U.decode(Y,I,!1)},sign:function(N,U){var W=!1;"string"==typeof U&&(U=U.toUpperCase()),void 0===U||"RSASSA-PKCS1-V1_5"===U?(U={encode:g},W=1):"NONE"!==U&&"NULL"!==U&&null!==U||(U={encode:function(){return N}},W=1);var Y=U.encode(N,I.n.bitLength());return p.rsa.encrypt(Y,I,W)}};return I},p.wrapRsaPrivateKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(p.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,m.toDer(e).getBytes())])},p.privateKeyFromAsn1=function(e){var A,R,a,S,i,l,h,I,N={},U=[];if(m.validate(e,v,N,U)&&(e=m.fromDer(r.util.createBuffer(N.privateKey))),!m.validate(e,d,N={},U=[])){var W=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw W.errors=U,W}return A=r.util.createBuffer(N.privateKeyModulus).toHex(),R=r.util.createBuffer(N.privateKeyPublicExponent).toHex(),a=r.util.createBuffer(N.privateKeyPrivateExponent).toHex(),S=r.util.createBuffer(N.privateKeyPrime1).toHex(),i=r.util.createBuffer(N.privateKeyPrime2).toHex(),l=r.util.createBuffer(N.privateKeyExponent1).toHex(),h=r.util.createBuffer(N.privateKeyExponent2).toHex(),I=r.util.createBuffer(N.privateKeyCoefficient).toHex(),p.setRsaPrivateKey(new t(A,16),new t(R,16),new t(a,16),new t(S,16),new t(i,16),new t(l,16),new t(h,16),new t(I,16))},p.privateKeyToAsn1=p.privateKeyToRSAPrivateKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,E(e.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,E(e.e)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,E(e.d)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,E(e.p)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,E(e.q)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,E(e.dP)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,E(e.dQ)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,E(e.qInv))])},p.publicKeyFromAsn1=function(e){var A={},R=[];if(m.validate(e,o,A,R)){var a,S=m.derToOid(A.publicKeyOid);if(S!==p.oids.rsaEncryption)throw(a=new Error("Cannot read public key. Unknown OID.")).oid=S,a;e=A.rsaPublicKey}if(!m.validate(e,u,A,R=[]))throw(a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=R,a;var i=r.util.createBuffer(A.publicKeyModulus).toHex(),l=r.util.createBuffer(A.publicKeyExponent).toHex();return p.setRsaPublicKey(new t(i,16),new t(l,16))},p.publicKeyToAsn1=p.publicKeyToSubjectPublicKeyInfo=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(p.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.BITSTRING,!1,[p.publicKeyToRSAPublicKey(e)])])},p.publicKeyToRSAPublicKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,E(e.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,E(e.e))])}},{"./asn1":9,"./forge":16,"./jsbn":19,"./oids":27,"./pkcs1":31,"./prime":36,"./random":39,"./util":48,crypto:6}],42:[function(D,Q,Z){var r=D("./forge");D("./md"),D("./util");var t=Q.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=t,t.create=function(){m||(s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),m=!0);var p=null,n=r.util.createBuffer(),v=new Array(80),d={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){d.messageLength=0,d.fullMessageLength=d.messageLength64=[];for(var u=d.messageLengthSize/4,o=0;o<u;++o)d.fullMessageLength.push(0);return n=r.util.createBuffer(),p={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},d}};return d.start(),d.update=function(u,o){"utf8"===o&&(u=r.util.encodeUtf8(u));var g=u.length;d.messageLength+=g,g=[g/4294967296>>>0,g>>>0];for(var C=d.fullMessageLength.length-1;C>=0;--C)d.fullMessageLength[C]+=g[1],g[1]=g[0]+(d.fullMessageLength[C]/4294967296>>>0),d.fullMessageLength[C]=d.fullMessageLength[C]>>>0,g[0]=g[1]/4294967296>>>0;return n.putBytes(u),f(p,v,n),(n.read>2048||0===n.length())&&n.compact(),d},d.digest=function(){var o,u=r.util.createBuffer();u.putBytes(n.bytes()),u.putBytes(s.substr(0,d.blockLength-(d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize&d.blockLength-1)));for(var C=8*d.fullMessageLength[0],_=0;_<d.fullMessageLength.length-1;++_)C+=(o=8*d.fullMessageLength[_+1])/4294967296>>>0,u.putInt32(C>>>0),C=o>>>0;u.putInt32(C);var b={h0:p.h0,h1:p.h1,h2:p.h2,h3:p.h3,h4:p.h4};f(b,v,u);var E=r.util.createBuffer();return E.putInt32(b.h0),E.putInt32(b.h1),E.putInt32(b.h2),E.putInt32(b.h3),E.putInt32(b.h4),E},d};var s=null,m=!1;function f(p,n,v){for(var d,u,o,g,C,_,b,E=v.length();E>=64;){for(u=p.h0,o=p.h1,g=p.h2,C=p.h3,_=p.h4,b=0;b<16;++b)d=v.getInt32(),n[b]=d,d=(u<<5|u>>>27)+(C^o&(g^C))+_+1518500249+d,_=C,C=g,g=(o<<30|o>>>2)>>>0,o=u,u=d;for(;b<20;++b)d=(d=n[b-3]^n[b-8]^n[b-14]^n[b-16])<<1|d>>>31,n[b]=d,d=(u<<5|u>>>27)+(C^o&(g^C))+_+1518500249+d,_=C,C=g,g=(o<<30|o>>>2)>>>0,o=u,u=d;for(;b<32;++b)d=(d=n[b-3]^n[b-8]^n[b-14]^n[b-16])<<1|d>>>31,n[b]=d,d=(u<<5|u>>>27)+(o^g^C)+_+1859775393+d,_=C,C=g,g=(o<<30|o>>>2)>>>0,o=u,u=d;for(;b<40;++b)d=(d=n[b-6]^n[b-16]^n[b-28]^n[b-32])<<2|d>>>30,n[b]=d,d=(u<<5|u>>>27)+(o^g^C)+_+1859775393+d,_=C,C=g,g=(o<<30|o>>>2)>>>0,o=u,u=d;for(;b<60;++b)d=(d=n[b-6]^n[b-16]^n[b-28]^n[b-32])<<2|d>>>30,n[b]=d,d=(u<<5|u>>>27)+(o&g|C&(o^g))+_+2400959708+d,_=C,C=g,g=(o<<30|o>>>2)>>>0,o=u,u=d;for(;b<80;++b)d=(d=n[b-6]^n[b-16]^n[b-28]^n[b-32])<<2|d>>>30,n[b]=d,d=(u<<5|u>>>27)+(o^g^C)+_+3395469782+d,_=C,C=g,g=(o<<30|o>>>2)>>>0,o=u,u=d;p.h0=p.h0+u|0,p.h1=p.h1+o|0,p.h2=p.h2+g|0,p.h3=p.h3+C|0,p.h4=p.h4+_|0,E-=64}}},{"./forge":16,"./md":23,"./util":48}],43:[function(D,Q,Z){var r=D("./forge");D("./md"),D("./util");var t=Q.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=t,t.create=function(){m||(s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=!0);var n=null,v=r.util.createBuffer(),d=new Array(64),u={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){u.messageLength=0,u.fullMessageLength=u.messageLength64=[];for(var o=u.messageLengthSize/4,g=0;g<o;++g)u.fullMessageLength.push(0);return v=r.util.createBuffer(),n={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},u}};return u.start(),u.update=function(o,g){"utf8"===g&&(o=r.util.encodeUtf8(o));var C=o.length;u.messageLength+=C,C=[C/4294967296>>>0,C>>>0];for(var _=u.fullMessageLength.length-1;_>=0;--_)u.fullMessageLength[_]+=C[1],C[1]=C[0]+(u.fullMessageLength[_]/4294967296>>>0),u.fullMessageLength[_]=u.fullMessageLength[_]>>>0,C[0]=C[1]/4294967296>>>0;return v.putBytes(o),p(n,d,v),(v.read>2048||0===v.length())&&v.compact(),u},u.digest=function(){var g,o=r.util.createBuffer();o.putBytes(v.bytes()),o.putBytes(s.substr(0,u.blockLength-(u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize&u.blockLength-1)));for(var _=8*u.fullMessageLength[0],b=0;b<u.fullMessageLength.length-1;++b)_+=(g=8*u.fullMessageLength[b+1])/4294967296>>>0,o.putInt32(_>>>0),_=g>>>0;o.putInt32(_);var E={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3,h4:n.h4,h5:n.h5,h6:n.h6,h7:n.h7};p(E,d,o);var k=r.util.createBuffer();return k.putInt32(E.h0),k.putInt32(E.h1),k.putInt32(E.h2),k.putInt32(E.h3),k.putInt32(E.h4),k.putInt32(E.h5),k.putInt32(E.h6),k.putInt32(E.h7),k},u};var s=null,m=!1,f=null;function p(n,v,d){for(var u,o,C,_,b,E,k,L,P,V,y,e,A=d.length();A>=64;){for(_=0;_<16;++_)v[_]=d.getInt32();for(;_<64;++_)u=((u=v[_-2])>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,o=((o=v[_-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,v[_]=u+v[_-7]+o+v[_-16]|0;for(b=n.h0,E=n.h1,k=n.h2,L=n.h3,P=n.h4,V=n.h5,y=n.h6,e=n.h7,_=0;_<64;++_)C=b&E|k&(b^E),u=e+((P>>>6|P<<26)^(P>>>11|P<<21)^(P>>>25|P<<7))+(y^P&(V^y))+f[_]+v[_],e=y,y=V,V=P,P=L+u>>>0,L=k,k=E,E=b,b=u+(o=((b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10))+C)>>>0;n.h0=n.h0+b|0,n.h1=n.h1+E|0,n.h2=n.h2+k|0,n.h3=n.h3+L|0,n.h4=n.h4+P|0,n.h5=n.h5+V|0,n.h6=n.h6+y|0,n.h7=n.h7+e|0,A-=64}}},{"./forge":16,"./md":23,"./util":48}],44:[function(D,Q,Z){var r=D("./forge");D("./md"),D("./util");var t=Q.exports=r.sha512=r.sha512||{};r.md.sha512=r.md.algorithms.sha512=t;var s=r.sha384=r.sha512.sha384=r.sha512.sha384||{};s.create=function(){return t.create("SHA-384")},r.md.sha384=r.md.algorithms.sha384=s,r.sha512.sha256=r.sha512.sha256||{create:function(){return t.create("SHA-512/256")}},r.md["sha512/256"]=r.md.algorithms["sha512/256"]=r.sha512.sha256,r.sha512.sha224=r.sha512.sha224||{create:function(){return t.create("SHA-512/224")}},r.md["sha512/224"]=r.md.algorithms["sha512/224"]=r.sha512.sha224,t.create=function(d){if(f||(m=String.fromCharCode(128),m+=r.util.fillString(String.fromCharCode(0),128),p=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(n={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],n["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],n["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],n["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],f=!0),void 0===d&&(d="SHA-512"),!(d in n))throw new Error("Invalid SHA-512 algorithm: "+d);for(var u=n[d],o=null,g=r.util.createBuffer(),C=new Array(80),_=0;_<80;++_)C[_]=new Array(2);var b=64;switch(d){case"SHA-384":b=48;break;case"SHA-512/256":b=32;break;case"SHA-512/224":b=28}var E={algorithm:d.replace("-","").toLowerCase(),blockLength:128,digestLength:b,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){E.messageLength=0,E.fullMessageLength=E.messageLength128=[];for(var k=E.messageLengthSize/4,L=0;L<k;++L)E.fullMessageLength.push(0);for(g=r.util.createBuffer(),o=new Array(u.length),L=0;L<u.length;++L)o[L]=u[L].slice(0);return E}};return E.start(),E.update=function(k,L){"utf8"===L&&(k=r.util.encodeUtf8(k));var P=k.length;E.messageLength+=P,P=[P/4294967296>>>0,P>>>0];for(var V=E.fullMessageLength.length-1;V>=0;--V)E.fullMessageLength[V]+=P[1],P[1]=P[0]+(E.fullMessageLength[V]/4294967296>>>0),E.fullMessageLength[V]=E.fullMessageLength[V]>>>0,P[0]=P[1]/4294967296>>>0;return g.putBytes(k),v(o,C,g),(g.read>2048||0===g.length())&&g.compact(),E},E.digest=function(){var L,k=r.util.createBuffer();k.putBytes(g.bytes()),k.putBytes(m.substr(0,E.blockLength-(E.fullMessageLength[E.fullMessageLength.length-1]+E.messageLengthSize&E.blockLength-1)));for(var V=8*E.fullMessageLength[0],y=0;y<E.fullMessageLength.length-1;++y)V+=(L=8*E.fullMessageLength[y+1])/4294967296>>>0,k.putInt32(V>>>0),V=L>>>0;k.putInt32(V);var e=new Array(o.length);for(y=0;y<o.length;++y)e[y]=o[y].slice(0);v(e,C,k);var A,R=r.util.createBuffer();for(A="SHA-512"===d?e.length:"SHA-384"===d?e.length-2:e.length-4,y=0;y<A;++y)R.putInt32(e[y][0]),y===A-1&&"SHA-512/224"===d||R.putInt32(e[y][1]);return R},E};var m=null,f=!1,p=null,n=null;function v(d,u,o){for(var g,C,_,b,e,A,R,a,S,i,l,h,I,N,U,W,Y,et,q,$,z,w,x,ot,T,O,M,K=o.length();K>=128;){for(z=0;z<16;++z)u[z][0]=o.getInt32()>>>0,u[z][1]=o.getInt32()>>>0;for(;z<80;++z)g=(((w=(ot=u[z-2])[0])>>>19|(x=ot[1])<<13)^(x>>>29|w<<3)^w>>>6)>>>0,C=((w<<13|x>>>19)^(x<<3|w>>>29)^(w<<26|x>>>6))>>>0,_=(((w=(O=u[z-15])[0])>>>1|(x=O[1])<<31)^(w>>>8|x<<24)^w>>>7)>>>0,u[z][0]=g+(T=u[z-7])[0]+_+(M=u[z-16])[0]+((x=C+T[1]+(b=((w<<31|x>>>1)^(w<<24|x>>>8)^(w<<25|x>>>7))>>>0)+M[1])/4294967296>>>0)>>>0,u[z][1]=x>>>0;for(e=d[0][0],A=d[0][1],R=d[1][0],a=d[1][1],S=d[2][0],i=d[2][1],l=d[3][0],h=d[3][1],I=d[4][0],N=d[4][1],U=d[5][0],W=d[5][1],Y=d[6][0],et=d[6][1],q=d[7][0],$=d[7][1],z=0;z<80;++z)g=q+(((I>>>14|N<<18)^(I>>>18|N<<14)^(N>>>9|I<<23))>>>0)+((Y^I&(U^Y))>>>0)+p[z][0]+u[z][0]+((x=$+(((I<<18|N>>>14)^(I<<14|N>>>18)^(N<<23|I>>>9))>>>0)+((et^N&(W^et))>>>0)+p[z][1]+u[z][1])/4294967296>>>0)>>>0,C=x>>>0,_=(((e>>>28|A<<4)^(A>>>2|e<<30)^(A>>>7|e<<25))>>>0)+((e&R|S&(e^R))>>>0)+((x=(((e<<4|A>>>28)^(A<<30|e>>>2)^(A<<25|e>>>7))>>>0)+((A&a|i&(A^a))>>>0))/4294967296>>>0)>>>0,b=x>>>0,q=Y,$=et,Y=U,et=W,U=I,W=N,I=l+g+((x=h+C)/4294967296>>>0)>>>0,N=x>>>0,l=S,h=i,S=R,i=a,R=e,a=A,e=g+_+((x=C+b)/4294967296>>>0)>>>0,A=x>>>0;d[0][0]=d[0][0]+e+((x=d[0][1]+A)/4294967296>>>0)>>>0,d[0][1]=x>>>0,d[1][0]=d[1][0]+R+((x=d[1][1]+a)/4294967296>>>0)>>>0,d[1][1]=x>>>0,d[2][0]=d[2][0]+S+((x=d[2][1]+i)/4294967296>>>0)>>>0,d[2][1]=x>>>0,d[3][0]=d[3][0]+l+((x=d[3][1]+h)/4294967296>>>0)>>>0,d[3][1]=x>>>0,d[4][0]=d[4][0]+I+((x=d[4][1]+N)/4294967296>>>0)>>>0,d[4][1]=x>>>0,d[5][0]=d[5][0]+U+((x=d[5][1]+W)/4294967296>>>0)>>>0,d[5][1]=x>>>0,d[6][0]=d[6][0]+Y+((x=d[6][1]+et)/4294967296>>>0)>>>0,d[6][1]=x>>>0,d[7][0]=d[7][0]+q+((x=d[7][1]+$)/4294967296>>>0)>>>0,d[7][1]=x>>>0,K-=128}}},{"./forge":16,"./md":23,"./util":48}],45:[function(D,Q,Z){var r=D("./forge");D("./aes"),D("./hmac"),D("./md5"),D("./sha1"),D("./util");var t=Q.exports=r.ssh=r.ssh||{};function s(p,n){var v=n.toString(16);v[0]>="8"&&(v="00"+v);var d=r.util.hexToBytes(v);p.putInt32(d.length),p.putBytes(d)}function m(p,n){p.putInt32(n.length),p.putString(n)}function f(){for(var p=r.md.sha1.create(),n=arguments.length,v=0;v<n;++v)p.update(arguments[v]);return p.digest()}t.privateKeyToPutty=function(p,n,v){var d=""===(n=n||"")?"none":"aes256-cbc",u="PuTTY-User-Key-File-2: ssh-rsa\r\n";u+="Encryption: "+d+"\r\n",u+="Comment: "+(v=v||"")+"\r\n";var o=r.util.createBuffer();m(o,"ssh-rsa"),s(o,p.e),s(o,p.n);var g=r.util.encode64(o.bytes(),64),C=Math.floor(g.length/66)+1;u+="Public-Lines: "+C+"\r\n",u+=g;var _,b=r.util.createBuffer();if(s(b,p.d),s(b,p.p),s(b,p.q),s(b,p.qInv),n){var E=b.length()+16-1;E-=E%16;var k=f(b.bytes());k.truncate(k.length()-E+b.length()),b.putBuffer(k);var L=r.util.createBuffer();L.putBuffer(f("\0\0\0\0",n)),L.putBuffer(f("\0\0\0\x01",n));var P=r.aes.createEncryptionCipher(L.truncate(8),"CBC");P.start(r.util.createBuffer().fillWithByte(0,16)),P.update(b.copy()),P.finish();var V=P.output;V.truncate(16),_=r.util.encode64(V.bytes(),64)}else _=r.util.encode64(b.bytes(),64);u+="\r\nPrivate-Lines: "+(C=Math.floor(_.length/66)+1)+"\r\n",u+=_;var y=f("putty-private-key-file-mac-key",n),e=r.util.createBuffer();m(e,"ssh-rsa"),m(e,d),m(e,v),e.putInt32(o.length()),e.putBuffer(o),e.putInt32(b.length()),e.putBuffer(b);var A=r.hmac.create();return A.start("sha1",y),A.update(e.bytes()),u+"\r\nPrivate-MAC: "+A.digest().toHex()+"\r\n"},t.publicKeyToOpenSSH=function(p,n){n=n||"";var v=r.util.createBuffer();return m(v,"ssh-rsa"),s(v,p.e),s(v,p.n),"ssh-rsa "+r.util.encode64(v.bytes())+" "+n},t.privateKeyToOpenSSH=function(p,n){return n?r.pki.encryptRsaPrivateKey(p,n,{legacy:!0,algorithm:"aes128"}):r.pki.privateKeyToPem(p)},t.getPublicKeyFingerprint=function(p,n){var v=(n=n||{}).md||r.md.md5.create(),d=r.util.createBuffer();m(d,"ssh-rsa"),s(d,p.e),s(d,p.n),v.start(),v.update(d.getBytes());var u=v.digest();if("hex"===n.encoding){var o=u.toHex();return n.delimiter?o.match(/.{2}/g).join(n.delimiter):o}if("binary"===n.encoding)return u.getBytes();if(n.encoding)throw new Error('Unknown encoding "'+n.encoding+'".');return u}},{"./aes":7,"./forge":16,"./hmac":17,"./md5":24,"./sha1":42,"./util":48}],46:[function(D,Q,Z){var r=D("./forge");D("./debug"),D("./log"),D("./util");var t="forge.task",s={},m=0;r.debug.set(t,"tasks",s);var f={};r.debug.set(t,"queues",f);var p="ready",n="running",v="blocked",d="sleeping",u="done",o="error",g={ready:{}};g.ready.stop=p,g.ready.start=n,g.ready.cancel=u,g.ready.fail=o,g.running={},g.running.stop=p,g.running.start=n,g.running.block=v,g.running.unblock=n,g.running.sleep=d,g.running.wakeup=n,g.running.cancel=u,g.running.fail=o,g.blocked={},g.blocked.stop=v,g.blocked.start=v,g.blocked.block=v,g.blocked.unblock=v,g.blocked.sleep=v,g.blocked.wakeup=v,g.blocked.cancel=u,g.blocked.fail=o,g.sleeping={},g.sleeping.stop=d,g.sleeping.start=d,g.sleeping.block=d,g.sleeping.unblock=d,g.sleeping.sleep=d,g.sleeping.wakeup=d,g.sleeping.cancel=u,g.sleeping.fail=o,g.done={},g.done.stop=u,g.done.start=u,g.done.block=u,g.done.unblock=u,g.done.sleep=u,g.done.wakeup=u,g.done.cancel=u,g.done.fail=o,g.error={},g.error.stop=o,g.error.start=o,g.error.block=o,g.error.unblock=o,g.error.sleep=o,g.error.wakeup=o,g.error.cancel=o,g.error.fail=o;var C=function(E){this.id=-1,this.name=E.name||"?",this.parent=E.parent||null,this.run=E.run,this.subtasks=[],this.error=!1,this.state=p,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=m++,s[this.id]=this};C.prototype.debug=function(E){r.log.debug(t,E=E||"","[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",f)},C.prototype.next=function(E,k){"function"==typeof E&&(k=E,E=this.name);var L=new C({run:k,name:E,parent:this});return L.state=n,L.type=this.type,L.successCallback=this.successCallback||null,L.failureCallback=this.failureCallback||null,this.subtasks.push(L),this},C.prototype.parallel=function(E,k){return r.util.isArray(E)&&(k=E,E=this.name),this.next(E,function(L){var P=L;P.block(k.length);for(var V=function(e,A){r.task.start({type:e,run:function(R){k[A](R)},success:function(R){P.unblock()},failure:function(R){P.unblock()}})},y=0;y<k.length;y++)V(E+"__parallel-"+L.id+"-"+y,y)})},C.prototype.stop=function(){this.state=g[this.state].stop},C.prototype.start=function(){this.error=!1,this.state=g[this.state].start,this.state===n&&(this.start=new Date,this.run(this),_(this,0))},C.prototype.block=function(E){this.blocks+=E=void 0===E?1:E,this.blocks>0&&(this.state=g[this.state].block)},C.prototype.unblock=function(E){return this.blocks-=E=void 0===E?1:E,0===this.blocks&&this.state!==u&&(this.state=n,_(this,0)),this.blocks},C.prototype.sleep=function(E){E=void 0===E?0:E,this.state=g[this.state].sleep;var k=this;this.timeoutId=setTimeout(function(){k.timeoutId=null,k.state=n,_(k,0)},E)},C.prototype.wait=function(E){E.wait(this)},C.prototype.wakeup=function(){this.state===d&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=n,_(this,0))},C.prototype.cancel=function(){this.state=g[this.state].cancel,this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},C.prototype.fail=function(E){if(this.error=!0,b(this,!0),E)E.error=this.error,E.swapTime=this.swapTime,E.userData=this.userData,_(E,0);else{if(null!==this.parent){for(var k=this.parent;null!==k.parent;)k.error=this.error,k.swapTime=this.swapTime,k.userData=this.userData,k=k.parent;b(k,!0)}this.failureCallback&&this.failureCallback(this)}};var _=function(E,k){var L=k>30||+new Date-E.swapTime>20,P=function(V){if(V++,E.state===n)if(L&&(E.swapTime=+new Date),E.subtasks.length>0){var y=E.subtasks.shift();y.error=E.error,y.swapTime=E.swapTime,y.userData=E.userData,y.run(y),y.error||_(y,V)}else b(E),E.error||null!==E.parent&&(E.parent.error=E.error,E.parent.swapTime=E.swapTime,E.parent.userData=E.userData,_(E.parent,V))};L?setTimeout(P,0):P(k)},b=function(E,k){E.state=u,delete s[E.id],null===E.parent&&(E.type in f?0===f[E.type].length?r.log.error(t,"[%s][%s] task queue empty [%s]",E.id,E.name,E.type):f[E.type][0]!==E?r.log.error(t,"[%s][%s] task not first in queue [%s]",E.id,E.name,E.type):(f[E.type].shift(),0===f[E.type].length?delete f[E.type]:f[E.type][0].start()):r.log.error(t,"[%s][%s] task queue missing [%s]",E.id,E.name,E.type),k||(E.error&&E.failureCallback?E.failureCallback(E):!E.error&&E.successCallback&&E.successCallback(E)))};Q.exports=r.task=r.task||{},r.task.start=function(E){var L,k=new C({run:E.run,name:E.name||"?"});k.type=E.type,k.successCallback=E.success||null,k.failureCallback=E.failure||null,k.type in f?f[E.type].push(k):(f[k.type]=[k],(L=k).error=!1,L.state=g[L.state].start,setTimeout(function(){L.state===n&&(L.swapTime=+new Date,L.run(L),_(L,0))},0))},r.task.cancel=function(E){E in f&&(f[E]=[f[E][0]])},r.task.createCondition=function(){var E={tasks:{},wait:function(k){k.id in E.tasks||(k.block(),E.tasks[k.id]=k)},notify:function(){var k=E.tasks;for(var L in E.tasks={},k)k[L].unblock()}};return E}},{"./debug":13,"./forge":16,"./log":21,"./util":48}],47:[function(D,Q,Z){var r=D("./forge");D("./asn1"),D("./hmac"),D("./md5"),D("./pem"),D("./pki"),D("./random"),D("./sha1"),D("./util");var t=function(T,O,M,K){var G=r.util.createBuffer(),X=T.length>>1,j=X+(1&T.length),tt=T.substr(0,j),rt=T.substr(X,j),nt=r.util.createBuffer(),it=r.hmac.create();M=O+M;var lt=Math.ceil(K/16),ct=Math.ceil(K/20);it.start("MD5",tt);var pt=r.util.createBuffer();nt.putBytes(M);for(var ut=0;ut<lt;++ut)it.start(null,null),it.update(nt.getBytes()),nt.putBuffer(it.digest()),it.start(null,null),it.update(nt.bytes()+M),pt.putBuffer(it.digest());it.start("SHA1",rt);var gt=r.util.createBuffer();for(nt.clear(),nt.putBytes(M),ut=0;ut<ct;++ut)it.start(null,null),it.update(nt.getBytes()),nt.putBuffer(it.digest()),it.start(null,null),it.update(nt.bytes()+M),gt.putBuffer(it.digest());return G.putBytes(r.util.xorBytes(pt.getBytes(),gt.getBytes(),K)),G},s=function(T,O,M){var K=!1;try{var G=T.deflate(O.fragment.getBytes());O.fragment=r.util.createBuffer(G),O.length=G.length,K=!0}catch(X){}return K},m=function(T,O,M){var K=!1;try{var G=T.inflate(O.fragment.getBytes());O.fragment=r.util.createBuffer(G),O.length=G.length,K=!0}catch(X){}return K},f=function(T,O){var M=0;switch(O){case 1:M=T.getByte();break;case 2:M=T.getInt16();break;case 3:M=T.getInt24();break;case 4:M=T.getInt32()}return r.util.createBuffer(T.getBytes(M))},p=function(T,O,M){T.putInt(M.length(),O<<3),T.putBuffer(M)},n={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};n.SupportedVersions=[n.Versions.TLS_1_1,n.Versions.TLS_1_0],n.Version=n.SupportedVersions[0],n.MaxFragment=15360,n.ConnectionEnd={server:0,client:1},n.PRFAlgorithm={tls_prf_sha256:0},n.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},n.CipherType={stream:0,block:1,aead:2},n.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},n.CompressionMethod={none:0,deflate:1},n.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},n.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},n.Alert={},n.Alert.Level={warning:1,fatal:2},n.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},n.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},n.CipherSuites={},n.getCipherSuite=function(T){var O=null;for(var M in n.CipherSuites){var K=n.CipherSuites[M];if(K.id[0]===T.charCodeAt(0)&&K.id[1]===T.charCodeAt(1)){O=K;break}}return O},n.handleUnexpected=function(T,O){!T.open&&T.entity===n.ConnectionEnd.client||T.error(T,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.unexpected_message}})},n.handleHelloRequest=function(T,O,M){!T.handshaking&&T.handshakes>0&&(n.queue(T,n.createAlert(T,{level:n.Alert.Level.warning,description:n.Alert.Description.no_renegotiation})),n.flush(T)),T.process()},n.parseHelloMessage=function(T,O,M){var K=null,G=T.entity===n.ConnectionEnd.client;if(M<38)T.error(T,{message:G?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}});else{var X=O.fragment,j=X.length();if(K={version:{major:X.getByte(),minor:X.getByte()},random:r.util.createBuffer(X.getBytes(32)),session_id:f(X,1),extensions:[]},G?(K.cipher_suite=X.getBytes(2),K.compression_method=X.getByte()):(K.cipher_suites=f(X,2),K.compression_methods=f(X,1)),(j=M-(j-X.length()))>0){for(var tt=f(X,2);tt.length()>0;)K.extensions.push({type:[tt.getByte(),tt.getByte()],data:f(tt,2)});if(!G)for(var rt=0;rt<K.extensions.length;++rt){var nt=K.extensions[rt];if(0===nt.type[0]&&0===nt.type[1])for(var it=f(nt.data,2);it.length()>0&&0===it.getByte();)T.session.extensions.server_name.serverNameList.push(f(it,2).getBytes())}}if(T.session.version&&(K.version.major!==T.session.version.major||K.version.minor!==T.session.version.minor))return T.error(T,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.protocol_version}});if(G)T.session.cipherSuite=n.getCipherSuite(K.cipher_suite);else for(var lt=r.util.createBuffer(K.cipher_suites.bytes());lt.length()>0&&(T.session.cipherSuite=n.getCipherSuite(lt.getBytes(2)),null===T.session.cipherSuite););if(null===T.session.cipherSuite)return T.error(T,{message:"No cipher suites in common.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.handshake_failure},cipherSuite:r.util.bytesToHex(K.cipher_suite)});T.session.compressionMethod=G?K.compression_method:n.CompressionMethod.none}return K},n.createSecurityParameters=function(T,O){var M=T.entity===n.ConnectionEnd.client,K=O.random.bytes(),G=M?T.session.sp.client_random:K,X=M?K:n.createRandom().getBytes();T.session.sp={entity:T.entity,prf_algorithm:n.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:T.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:G,server_random:X}},n.handleServerHello=function(T,O,M){var K=n.parseHelloMessage(T,O,M);if(!T.fail){if(!(K.version.minor<=T.version.minor))return T.error(T,{message:"Incompatible TLS version.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.protocol_version}});T.version.minor=K.version.minor,T.session.version=T.version;var G=K.session_id.bytes();G.length>0&&G===T.session.id?(T.expect=g,T.session.resuming=!0,T.session.sp.server_random=K.random.bytes()):(T.expect=v,T.session.resuming=!1,n.createSecurityParameters(T,K)),T.session.id=G,T.process()}},n.handleClientHello=function(T,O,M){var K=n.parseHelloMessage(T,O,M);if(!T.fail){var G=K.session_id.bytes(),X=null;if(T.sessionCache&&(null===(X=T.sessionCache.getSession(G))?G="":(X.version.major!==K.version.major||X.version.minor>K.version.minor)&&(X=null,G="")),0===G.length&&(G=r.random.getBytes(32)),T.session.id=G,T.session.clientHelloVersion=K.version,T.session.sp={},X)T.version=T.session.version=X.version,T.session.sp=X.sp;else{for(var j,tt=1;tt<n.SupportedVersions.length&&!((j=n.SupportedVersions[tt]).minor<=K.version.minor);++tt);T.version={major:j.major,minor:j.minor},T.session.version=T.version}null!==X?(T.expect=P,T.session.resuming=!0,T.session.sp.client_random=K.random.bytes()):(T.expect=!1!==T.verifyClient?E:k,T.session.resuming=!1,n.createSecurityParameters(T,K)),T.open=!0,n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createServerHello(T)})),T.session.resuming?(n.queue(T,n.createRecord(T,{type:n.ContentType.change_cipher_spec,data:n.createChangeCipherSpec()})),T.state.pending=n.createConnectionState(T),T.state.current.write=T.state.pending.write,n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createFinished(T)}))):(n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createCertificate(T)})),T.fail||(n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createServerKeyExchange(T)})),!1!==T.verifyClient&&n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createCertificateRequest(T)})),n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createServerHelloDone(T)})))),n.flush(T),T.process()}},n.handleCertificate=function(T,O,M){if(M<3)return T.error(T,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}});var K,G,j={certificate_list:f(O.fragment,3)},tt=[];try{for(;j.certificate_list.length()>0;)K=f(j.certificate_list,3),G=r.asn1.fromDer(K),K=r.pki.certificateFromAsn1(G,!0),tt.push(K)}catch(nt){return T.error(T,{message:"Could not parse certificate list.",cause:nt,send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.bad_certificate}})}var rt=T.entity===n.ConnectionEnd.client;!rt&&!0!==T.verifyClient||0!==tt.length?0===tt.length?T.expect=rt?d:k:(rt?T.session.serverCertificate=tt[0]:T.session.clientCertificate=tt[0],n.verifyCertificateChain(T,tt)&&(T.expect=rt?d:k)):T.error(T,{message:rt?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}}),T.process()},n.handleServerKeyExchange=function(T,O,M){if(M>0)return T.error(T,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.unsupported_certificate}});T.expect=u,T.process()},n.handleClientKeyExchange=function(T,O,M){if(M<48)return T.error(T,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.unsupported_certificate}});var G={enc_pre_master_secret:f(O.fragment,2).getBytes()},X=null;if(T.getPrivateKey)try{X=T.getPrivateKey(T,T.session.serverCertificate),X=r.pki.privateKeyFromPem(X)}catch(rt){T.error(T,{message:"Could not get private key.",cause:rt,send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}})}if(null===X)return T.error(T,{message:"No private key set.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}});try{var j=T.session.sp;j.pre_master_secret=X.decrypt(G.enc_pre_master_secret);var tt=T.session.clientHelloVersion;if(tt.major!==j.pre_master_secret.charCodeAt(0)||tt.minor!==j.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(rt){j.pre_master_secret=r.random.getBytes(48)}T.expect=P,null!==T.session.clientCertificate&&(T.expect=L),T.process()},n.handleCertificateRequest=function(T,O,M){if(M<3)return T.error(T,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}});var K=O.fragment,G={certificate_types:f(K,1),certificate_authorities:f(K,2)};T.session.certificateRequest=G,T.expect=o,T.process()},n.handleCertificateVerify=function(T,O,M){if(M<2)return T.error(T,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}});var K=O.fragment;K.read-=4;var G=K.bytes();K.read+=4;var X={signature:f(K,2).getBytes()},j=r.util.createBuffer();j.putBuffer(T.session.md5.digest()),j.putBuffer(T.session.sha1.digest()),j=j.getBytes();try{if(!T.session.clientCertificate.publicKey.verify(j,X.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");T.session.md5.update(G),T.session.sha1.update(G)}catch(tt){return T.error(T,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.handshake_failure}})}T.expect=P,T.process()},n.handleServerHelloDone=function(T,O,M){if(M>0)return T.error(T,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.record_overflow}});if(null===T.serverCertificate){var K={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.insufficient_security}},G=T.verify(T,K.alert.description,0,[]);if(!0!==G)return(G||0===G)&&("object"!=typeof G||r.util.isArray(G)?"number"==typeof G&&(K.alert.description=G):(G.message&&(K.message=G.message),G.alert&&(K.alert.description=G.alert))),T.error(T,K)}null!==T.session.certificateRequest&&(O=n.createRecord(T,{type:n.ContentType.handshake,data:n.createCertificate(T)}),n.queue(T,O)),O=n.createRecord(T,{type:n.ContentType.handshake,data:n.createClientKeyExchange(T)}),n.queue(T,O),T.expect=b;var X=function(j,tt){null!==j.session.certificateRequest&&null!==j.session.clientCertificate&&n.queue(j,n.createRecord(j,{type:n.ContentType.handshake,data:n.createCertificateVerify(j,tt)})),n.queue(j,n.createRecord(j,{type:n.ContentType.change_cipher_spec,data:n.createChangeCipherSpec()})),j.state.pending=n.createConnectionState(j),j.state.current.write=j.state.pending.write,n.queue(j,n.createRecord(j,{type:n.ContentType.handshake,data:n.createFinished(j)})),j.expect=g,n.flush(j),j.process()};if(null===T.session.certificateRequest||null===T.session.clientCertificate)return X(T,null);n.getClientSignature(T,X)},n.handleChangeCipherSpec=function(T,O){if(1!==O.fragment.getByte())return T.error(T,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}});var M=T.entity===n.ConnectionEnd.client;(T.session.resuming&&M||!T.session.resuming&&!M)&&(T.state.pending=n.createConnectionState(T)),T.state.current.read=T.state.pending.read,(!T.session.resuming&&M||T.session.resuming&&!M)&&(T.state.pending=null),T.expect=M?C:V,T.process()},n.handleFinished=function(T,O,M){var K=O.fragment;K.read-=4;var G=K.bytes();K.read+=4;var X=O.fragment.getBytes();(K=r.util.createBuffer()).putBuffer(T.session.md5.digest()),K.putBuffer(T.session.sha1.digest());var j=T.entity===n.ConnectionEnd.client;if((K=t(T.session.sp.master_secret,j?"server finished":"client finished",K.getBytes(),12)).getBytes()!==X)return T.error(T,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.decrypt_error}});T.session.md5.update(G),T.session.sha1.update(G),(T.session.resuming&&j||!T.session.resuming&&!j)&&(n.queue(T,n.createRecord(T,{type:n.ContentType.change_cipher_spec,data:n.createChangeCipherSpec()})),T.state.current.write=T.state.pending.write,T.state.pending=null,n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createFinished(T)}))),T.expect=j?_:y,T.handshaking=!1,++T.handshakes,T.peerCertificate=j?T.session.serverCertificate:T.session.clientCertificate,n.flush(T),T.isConnected=!0,T.connected(T),T.process()},n.handleAlert=function(T,O){var M,K=O.fragment,G={level:K.getByte(),description:K.getByte()};switch(G.description){case n.Alert.Description.close_notify:M="Connection closed.";break;case n.Alert.Description.unexpected_message:M="Unexpected message.";break;case n.Alert.Description.bad_record_mac:M="Bad record MAC.";break;case n.Alert.Description.decryption_failed:M="Decryption failed.";break;case n.Alert.Description.record_overflow:M="Record overflow.";break;case n.Alert.Description.decompression_failure:M="Decompression failed.";break;case n.Alert.Description.handshake_failure:M="Handshake failure.";break;case n.Alert.Description.bad_certificate:M="Bad certificate.";break;case n.Alert.Description.unsupported_certificate:M="Unsupported certificate.";break;case n.Alert.Description.certificate_revoked:M="Certificate revoked.";break;case n.Alert.Description.certificate_expired:M="Certificate expired.";break;case n.Alert.Description.certificate_unknown:M="Certificate unknown.";break;case n.Alert.Description.illegal_parameter:M="Illegal parameter.";break;case n.Alert.Description.unknown_ca:M="Unknown certificate authority.";break;case n.Alert.Description.access_denied:M="Access denied.";break;case n.Alert.Description.decode_error:M="Decode error.";break;case n.Alert.Description.decrypt_error:M="Decrypt error.";break;case n.Alert.Description.export_restriction:M="Export restriction.";break;case n.Alert.Description.protocol_version:M="Unsupported protocol version.";break;case n.Alert.Description.insufficient_security:M="Insufficient security.";break;case n.Alert.Description.internal_error:M="Internal error.";break;case n.Alert.Description.user_canceled:M="User canceled.";break;case n.Alert.Description.no_renegotiation:M="Renegotiation not supported.";break;default:M="Unknown error."}if(G.description===n.Alert.Description.close_notify)return T.close();T.error(T,{message:M,send:!1,origin:T.entity===n.ConnectionEnd.client?"server":"client",alert:G}),T.process()},n.handleHandshake=function(T,O){var M=O.fragment,K=M.getByte(),G=M.getInt24();if(G>M.length())return T.fragmented=O,O.fragment=r.util.createBuffer(),M.read-=4,T.process();T.fragmented=null,M.read-=4;var X=M.bytes(G+4);M.read+=4,K in q[T.entity][T.expect]?(T.entity!==n.ConnectionEnd.server||T.open||T.fail||(T.handshaking=!0,T.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:r.md.md5.create(),sha1:r.md.sha1.create()}),K!==n.HandshakeType.hello_request&&K!==n.HandshakeType.certificate_verify&&K!==n.HandshakeType.finished&&(T.session.md5.update(X),T.session.sha1.update(X)),q[T.entity][T.expect][K](T,O,G)):n.handleUnexpected(T,O)},n.handleApplicationData=function(T,O){T.data.putBuffer(O.fragment),T.dataReady(T),T.process()},n.handleHeartbeat=function(T,O){var M=O.fragment,K=M.getByte(),G=M.getInt16(),X=M.getBytes(G);if(K===n.HeartbeatMessageType.heartbeat_request){if(T.handshaking||G>X.length)return T.process();n.queue(T,n.createRecord(T,{type:n.ContentType.heartbeat,data:n.createHeartbeat(n.HeartbeatMessageType.heartbeat_response,X)})),n.flush(T)}else if(K===n.HeartbeatMessageType.heartbeat_response){if(X!==T.expectedHeartbeatPayload)return T.process();T.heartbeatReceived&&T.heartbeatReceived(T,r.util.createBuffer(X))}T.process()};var v=1,d=2,u=3,o=4,g=5,C=6,_=7,b=8,E=1,k=2,L=3,P=4,V=5,y=6,e=n.handleUnexpected,A=n.handleChangeCipherSpec,R=n.handleAlert,a=n.handleHandshake,S=n.handleApplicationData,i=n.handleHeartbeat,l=[];l[n.ConnectionEnd.client]=[[e,R,a,e,i],[e,R,a,e,i],[e,R,a,e,i],[e,R,a,e,i],[e,R,a,e,i],[A,R,e,e,i],[e,R,a,e,i],[e,R,a,S,i],[e,R,a,e,i]],l[n.ConnectionEnd.server]=[[e,R,a,e,i],[e,R,a,e,i],[e,R,a,e,i],[e,R,a,e,i],[A,R,e,e,i],[e,R,a,e,i],[e,R,a,S,i],[e,R,a,e,i]];var h=n.handleHelloRequest,N=n.handleCertificate,U=n.handleServerKeyExchange,W=n.handleCertificateRequest,Y=n.handleServerHelloDone,et=n.handleFinished,q=[];q[n.ConnectionEnd.client]=[[e,e,n.handleServerHello,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[h,e,e,e,e,e,e,e,e,e,e,N,U,W,Y,e,e,e,e,e,e],[h,e,e,e,e,e,e,e,e,e,e,e,U,W,Y,e,e,e,e,e,e],[h,e,e,e,e,e,e,e,e,e,e,e,e,W,Y,e,e,e,e,e,e],[h,e,e,e,e,e,e,e,e,e,e,e,e,e,Y,e,e,e,e,e,e],[h,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[h,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,et],[h,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[h,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e]],q[n.ConnectionEnd.server]=[[e,n.handleClientHello,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,N,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,n.handleClientKeyExchange,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,n.handleCertificateVerify,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,et],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e]],n.generateKeys=function(T,O){var M=t,K=O.client_random+O.server_random;T.session.resuming||(O.master_secret=M(O.pre_master_secret,"master secret",K,48).bytes(),O.pre_master_secret=null);var G=2*O.mac_key_length+2*O.enc_key_length,X=T.version.major===n.Versions.TLS_1_0.major&&T.version.minor===n.Versions.TLS_1_0.minor;X&&(G+=2*O.fixed_iv_length);var j=M(O.master_secret,"key expansion",K=O.server_random+O.client_random,G),tt={client_write_MAC_key:j.getBytes(O.mac_key_length),server_write_MAC_key:j.getBytes(O.mac_key_length),client_write_key:j.getBytes(O.enc_key_length),server_write_key:j.getBytes(O.enc_key_length)};return X&&(tt.client_write_IV=j.getBytes(O.fixed_iv_length),tt.server_write_IV=j.getBytes(O.fixed_iv_length)),tt},n.createConnectionState=function(T){var O=T.entity===n.ConnectionEnd.client,M=function(){var X={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(j){return!0},compressionState:null,compressFunction:function(j){return!0},updateSequenceNumber:function(){4294967295===X.sequenceNumber[1]?(X.sequenceNumber[1]=0,++X.sequenceNumber[0]):++X.sequenceNumber[1]}};return X},K={read:M(),write:M()};if(K.read.update=function(X,j){return K.read.cipherFunction(j,K.read)?K.read.compressFunction(X,j,K.read)||X.error(X,{message:"Could not decompress record.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.decompression_failure}}):X.error(X,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.bad_record_mac}}),!X.fail},K.write.update=function(X,j){return K.write.compressFunction(X,j,K.write)?K.write.cipherFunction(j,K.write)||X.error(X,{message:"Could not encrypt record.",send:!1,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}}):X.error(X,{message:"Could not compress record.",send:!1,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}}),!X.fail},T.session){var G=T.session.sp;switch(T.session.cipherSuite.initSecurityParameters(G),G.keys=n.generateKeys(T,G),K.read.macKey=O?G.keys.server_write_MAC_key:G.keys.client_write_MAC_key,K.write.macKey=O?G.keys.client_write_MAC_key:G.keys.server_write_MAC_key,T.session.cipherSuite.initConnectionState(K,T,G),G.compression_algorithm){case n.CompressionMethod.none:break;case n.CompressionMethod.deflate:K.read.compressFunction=m,K.write.compressFunction=s;break;default:throw new Error("Unsupported compression algorithm.")}}return K},n.createRandom=function(){var T=new Date,O=+T+6e4*T.getTimezoneOffset(),M=r.util.createBuffer();return M.putInt32(O),M.putBytes(r.random.getBytes(28)),M},n.createRecord=function(T,O){return O.data?{type:O.type,version:{major:T.version.major,minor:T.version.minor},length:O.data.length(),fragment:O.data}:null},n.createAlert=function(T,O){var M=r.util.createBuffer();return M.putByte(O.level),M.putByte(O.description),n.createRecord(T,{type:n.ContentType.alert,data:M})},n.createClientHello=function(T){T.session.clientHelloVersion={major:T.version.major,minor:T.version.minor};for(var O=r.util.createBuffer(),M=0;M<T.cipherSuites.length;++M){var K=T.cipherSuites[M];O.putByte(K.id[0]),O.putByte(K.id[1])}var G=O.length(),X=r.util.createBuffer();X.putByte(n.CompressionMethod.none);var j=X.length(),tt=r.util.createBuffer();if(T.virtualHost){var rt=r.util.createBuffer();rt.putByte(0),rt.putByte(0);var nt=r.util.createBuffer();nt.putByte(0),p(nt,2,r.util.createBuffer(T.virtualHost));var it=r.util.createBuffer();p(it,2,nt),p(rt,2,it),tt.putBuffer(rt)}var lt=tt.length();lt>0&&(lt+=2);var ct=T.session.id,pt=ct.length+1+2+4+28+2+G+1+j+lt,ut=r.util.createBuffer();return ut.putByte(n.HandshakeType.client_hello),ut.putInt24(pt),ut.putByte(T.version.major),ut.putByte(T.version.minor),ut.putBytes(T.session.sp.client_random),p(ut,1,r.util.createBuffer(ct)),p(ut,2,O),p(ut,1,X),lt>0&&p(ut,2,tt),ut},n.createServerHello=function(T){var O=T.session.id,M=O.length+1+2+4+28+2+1,K=r.util.createBuffer();return K.putByte(n.HandshakeType.server_hello),K.putInt24(M),K.putByte(T.version.major),K.putByte(T.version.minor),K.putBytes(T.session.sp.server_random),p(K,1,r.util.createBuffer(O)),K.putByte(T.session.cipherSuite.id[0]),K.putByte(T.session.cipherSuite.id[1]),K.putByte(T.session.compressionMethod),K},n.createCertificate=function(T){var M=T.entity===n.ConnectionEnd.client,K=null;T.getCertificate&&(K=T.getCertificate(T,M?T.session.certificateRequest:T.session.extensions.server_name.serverNameList));var G=r.util.createBuffer();if(null!==K)try{r.util.isArray(K)||(K=[K]);for(var X=null,j=0;j<K.length;++j){var tt=r.pem.decode(K[j])[0];if("CERTIFICATE"!==tt.type&&"X509 CERTIFICATE"!==tt.type&&"TRUSTED CERTIFICATE"!==tt.type){var rt=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw rt.headerType=tt.type,rt}if(tt.procType&&"ENCRYPTED"===tt.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var nt=r.util.createBuffer(tt.body);null===X&&(X=r.asn1.fromDer(nt.bytes(),!1));var it=r.util.createBuffer();p(it,3,nt),G.putBuffer(it)}K=r.pki.certificateFromAsn1(X),M?T.session.clientCertificate=K:T.session.serverCertificate=K}catch(pt){return T.error(T,{message:"Could not send certificate list.",cause:pt,send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.bad_certificate}})}var lt=3+G.length(),ct=r.util.createBuffer();return ct.putByte(n.HandshakeType.certificate),ct.putInt24(lt),p(ct,3,G),ct},n.createClientKeyExchange=function(T){var O=r.util.createBuffer();O.putByte(T.session.clientHelloVersion.major),O.putByte(T.session.clientHelloVersion.minor),O.putBytes(r.random.getBytes(46));var M=T.session.sp;M.pre_master_secret=O.getBytes();var K=(O=T.session.serverCertificate.publicKey.encrypt(M.pre_master_secret)).length+2,G=r.util.createBuffer();return G.putByte(n.HandshakeType.client_key_exchange),G.putInt24(K),G.putInt16(O.length),G.putBytes(O),G},n.createServerKeyExchange=function(T){return r.util.createBuffer()},n.getClientSignature=function(T,O){var M=r.util.createBuffer();M.putBuffer(T.session.md5.digest()),M.putBuffer(T.session.sha1.digest()),M=M.getBytes(),T.getSignature=T.getSignature||function(K,G,X){var j=null;if(K.getPrivateKey)try{j=K.getPrivateKey(K,K.session.clientCertificate),j=r.pki.privateKeyFromPem(j)}catch(tt){K.error(K,{message:"Could not get private key.",cause:tt,send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}})}null===j?K.error(K,{message:"No private key set.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}}):G=j.sign(G,null),X(K,G)},T.getSignature(T,M,O)},n.createCertificateVerify=function(T,O){var M=O.length+2,K=r.util.createBuffer();return K.putByte(n.HandshakeType.certificate_verify),K.putInt24(M),K.putInt16(O.length),K.putBytes(O),K},n.createCertificateRequest=function(T){var O=r.util.createBuffer();O.putByte(1);var M=r.util.createBuffer();for(var K in T.caStore.certs){var X=r.pki.distinguishedNameToAsn1(T.caStore.certs[K].subject),j=r.asn1.toDer(X);M.putInt16(j.length()),M.putBuffer(j)}var tt=1+O.length()+2+M.length(),rt=r.util.createBuffer();return rt.putByte(n.HandshakeType.certificate_request),rt.putInt24(tt),p(rt,1,O),p(rt,2,M),rt},n.createServerHelloDone=function(T){var O=r.util.createBuffer();return O.putByte(n.HandshakeType.server_hello_done),O.putInt24(0),O},n.createChangeCipherSpec=function(){var T=r.util.createBuffer();return T.putByte(1),T},n.createFinished=function(T){var O=r.util.createBuffer();O.putBuffer(T.session.md5.digest()),O.putBuffer(T.session.sha1.digest()),O=t(T.session.sp.master_secret,T.entity===n.ConnectionEnd.client?"client finished":"server finished",O.getBytes(),12);var X=r.util.createBuffer();return X.putByte(n.HandshakeType.finished),X.putInt24(O.length()),X.putBuffer(O),X},n.createHeartbeat=function(T,O,M){void 0===M&&(M=O.length);var K=r.util.createBuffer();K.putByte(T),K.putInt16(M),K.putBytes(O);var G=K.length(),X=Math.max(16,G-M-3);return K.putBytes(r.random.getBytes(X)),K},n.queue=function(T,O){if(O&&(0!==O.fragment.length()||O.type!==n.ContentType.handshake&&O.type!==n.ContentType.alert&&O.type!==n.ContentType.change_cipher_spec)){if(O.type===n.ContentType.handshake){var M=O.fragment.bytes();T.session.md5.update(M),T.session.sha1.update(M),M=null}var K;if(O.fragment.length()<=n.MaxFragment)K=[O];else{K=[];for(var G=O.fragment.bytes();G.length>n.MaxFragment;)K.push(n.createRecord(T,{type:O.type,data:r.util.createBuffer(G.slice(0,n.MaxFragment))})),G=G.slice(n.MaxFragment);G.length>0&&K.push(n.createRecord(T,{type:O.type,data:r.util.createBuffer(G)}))}for(var X=0;X<K.length&&!T.fail;++X){var j=K[X];T.state.current.write.update(T,j)&&T.records.push(j)}}},n.flush=function(T){for(var O=0;O<T.records.length;++O){var M=T.records[O];T.tlsData.putByte(M.type),T.tlsData.putByte(M.version.major),T.tlsData.putByte(M.version.minor),T.tlsData.putInt16(M.fragment.length()),T.tlsData.putBuffer(T.records[O].fragment)}return T.records=[],T.tlsDataReady(T)};var x=function(T){switch(T){case!0:return!0;case r.pki.certificateError.bad_certificate:return n.Alert.Description.bad_certificate;case r.pki.certificateError.unsupported_certificate:return n.Alert.Description.unsupported_certificate;case r.pki.certificateError.certificate_revoked:return n.Alert.Description.certificate_revoked;case r.pki.certificateError.certificate_expired:return n.Alert.Description.certificate_expired;case r.pki.certificateError.certificate_unknown:return n.Alert.Description.certificate_unknown;case r.pki.certificateError.unknown_ca:return n.Alert.Description.unknown_ca;default:return n.Alert.Description.bad_certificate}};for(var ot in n.verifyCertificateChain=function(T,O){try{var M={};for(var K in T.verifyOptions)M[K]=T.verifyOptions[K];M.verify=function(X,j,tt){x(X);var rt=T.verify(T,X,j,tt);if(!0!==rt){if("object"==typeof rt&&!r.util.isArray(rt)){var nt=new Error("The application rejected the certificate.");throw nt.send=!0,nt.alert={level:n.Alert.Level.fatal,description:n.Alert.Description.bad_certificate},rt.message&&(nt.message=rt.message),rt.alert&&(nt.alert.description=rt.alert),nt}rt!==X&&(rt=function(it){switch(rt){case!0:return!0;case n.Alert.Description.bad_certificate:return r.pki.certificateError.bad_certificate;case n.Alert.Description.unsupported_certificate:return r.pki.certificateError.unsupported_certificate;case n.Alert.Description.certificate_revoked:return r.pki.certificateError.certificate_revoked;case n.Alert.Description.certificate_expired:return r.pki.certificateError.certificate_expired;case n.Alert.Description.certificate_unknown:return r.pki.certificateError.certificate_unknown;case n.Alert.Description.unknown_ca:return r.pki.certificateError.unknown_ca;default:return r.pki.certificateError.bad_certificate}}())}return rt},r.pki.verifyCertificateChain(T.caStore,O,M)}catch(X){var G=X;("object"!=typeof G||r.util.isArray(G))&&(G={send:!0,alert:{level:n.Alert.Level.fatal,description:x(X)}}),"send"in G||(G.send=!0),"alert"in G||(G.alert={level:n.Alert.Level.fatal,description:x(G.error)}),T.error(T,G)}return!T.fail},n.createSessionCache=function(T,O){var M=null;if(T&&T.getSession&&T.setSession&&T.order)M=T;else{for(var K in(M={}).cache=T||{},M.capacity=Math.max(O||100,1),M.order=[],T)M.order.length<=O?M.order.push(K):delete T[K];M.getSession=function(G){var X=null,j=null;if(G?j=r.util.bytesToHex(G):M.order.length>0&&(j=M.order[0]),null!==j&&j in M.cache)for(var tt in X=M.cache[j],delete M.cache[j],M.order)if(M.order[tt]===j){M.order.splice(tt,1);break}return X},M.setSession=function(G,X){if(M.order.length===M.capacity){var j=M.order.shift();delete M.cache[j]}j=r.util.bytesToHex(G),M.order.push(j),M.cache[j]=X}}return M},n.createConnection=function(T){var O;O=T.caStore?r.util.isArray(T.caStore)?r.pki.createCaStore(T.caStore):T.caStore:r.pki.createCaStore();var M=T.cipherSuites||null;if(null===M)for(var K in M=[],n.CipherSuites)M.push(n.CipherSuites[K]);var G=T.server?n.ConnectionEnd.server:n.ConnectionEnd.client,X=T.sessionCache?n.createSessionCache(T.sessionCache):null,j={version:{major:n.Version.major,minor:n.Version.minor},entity:G,sessionId:T.sessionId,caStore:O,sessionCache:X,cipherSuites:M,connected:T.connected,virtualHost:T.virtualHost||null,verifyClient:T.verifyClient||!1,verify:T.verify||function(tt,rt,nt,it){return rt},verifyOptions:T.verifyOptions||{},getCertificate:T.getCertificate||null,getPrivateKey:T.getPrivateKey||null,getSignature:T.getSignature||null,input:r.util.createBuffer(),tlsData:r.util.createBuffer(),data:r.util.createBuffer(),tlsDataReady:T.tlsDataReady,dataReady:T.dataReady,heartbeatReceived:T.heartbeatReceived,closed:T.closed,error:function(tt,rt){rt.origin=rt.origin||(tt.entity===n.ConnectionEnd.client?"client":"server"),rt.send&&(n.queue(tt,n.createAlert(tt,rt.alert)),n.flush(tt));var nt=!1!==rt.fatal;nt&&(tt.fail=!0),T.error(tt,rt),nt&&tt.close(!1)},deflate:T.deflate||null,inflate:T.inflate||null,reset:function(tt){j.version={major:n.Version.major,minor:n.Version.minor},j.record=null,j.session=null,j.peerCertificate=null,j.state={pending:null,current:null},j.expect=0,j.fragmented=null,j.records=[],j.open=!1,j.handshakes=0,j.handshaking=!1,j.isConnected=!1,j.fail=!(tt||void 0===tt),j.input.clear(),j.tlsData.clear(),j.data.clear(),j.state.current=n.createConnectionState(j)}};return j.reset(),j.handshake=function(tt){if(j.entity!==n.ConnectionEnd.client)j.error(j,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(j.handshaking)j.error(j,{message:"Handshake already in progress.",fatal:!1});else{j.fail&&!j.open&&0===j.handshakes&&(j.fail=!1),j.handshaking=!0;var rt=null;(tt=tt||"").length>0&&(j.sessionCache&&(rt=j.sessionCache.getSession(tt)),null===rt&&(tt="")),0===tt.length&&j.sessionCache&&null!==(rt=j.sessionCache.getSession())&&(tt=rt.id),j.session={id:tt,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:r.md.md5.create(),sha1:r.md.sha1.create()},rt&&(j.version=rt.version,j.session.sp=rt.sp),j.session.sp.client_random=n.createRandom().getBytes(),j.open=!0,n.queue(j,n.createRecord(j,{type:n.ContentType.handshake,data:n.createClientHello(j)})),n.flush(j)}},j.process=function(tt){var nt,it,lt,ct,rt=0;return tt&&j.input.putBytes(tt),j.fail||(null!==j.record&&j.record.ready&&j.record.fragment.isEmpty()&&(j.record=null),null===j.record&&(rt=function(nt){var it=0,lt=nt.input,ct=lt.length();if(ct<5)it=5-ct;else{nt.record={type:lt.getByte(),version:{major:lt.getByte(),minor:lt.getByte()},length:lt.getInt16(),fragment:r.util.createBuffer(),ready:!1};var pt=nt.record.version.major===nt.version.major;pt&&nt.session&&nt.session.version&&(pt=nt.record.version.minor===nt.version.minor),pt||nt.error(nt,{message:"Incompatible TLS version.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.protocol_version}})}return it}(j)),j.fail||null===j.record||j.record.ready||(it=0,(ct=(lt=(nt=j).input).length())<nt.record.length?it=nt.record.length-ct:(nt.record.fragment.putBytes(lt.getBytes(nt.record.length)),lt.compact(),nt.state.current.read.update(nt,nt.record)&&(null!==nt.fragmented&&(nt.fragmented.type===nt.record.type?(nt.fragmented.fragment.putBuffer(nt.record.fragment),nt.record=nt.fragmented):nt.error(nt,{message:"Invalid fragmented record.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.unexpected_message}})),nt.record.ready=!0)),rt=it),!j.fail&&null!==j.record&&j.record.ready&&function(nt,it){var lt=it.type-n.ContentType.change_cipher_spec,ct=l[nt.entity][nt.expect];lt in ct?ct[lt](nt,it):n.handleUnexpected(nt,it)}(j,j.record)),rt},j.prepare=function(tt){return n.queue(j,n.createRecord(j,{type:n.ContentType.application_data,data:r.util.createBuffer(tt)})),n.flush(j)},j.prepareHeartbeatRequest=function(tt,rt){return tt instanceof r.util.ByteBuffer&&(tt=tt.bytes()),void 0===rt&&(rt=tt.length),j.expectedHeartbeatPayload=tt,n.queue(j,n.createRecord(j,{type:n.ContentType.heartbeat,data:n.createHeartbeat(n.HeartbeatMessageType.heartbeat_request,tt,rt)})),n.flush(j)},j.close=function(tt){if(!j.fail&&j.sessionCache&&j.session){var rt={id:j.session.id,version:j.session.version,sp:j.session.sp};rt.sp.keys=null,j.sessionCache.setSession(rt.id,rt)}j.open&&(j.open=!1,j.input.clear(),(j.isConnected||j.handshaking)&&(j.isConnected=j.handshaking=!1,n.queue(j,n.createAlert(j,{level:n.Alert.Level.warning,description:n.Alert.Description.close_notify})),n.flush(j)),j.closed(j)),j.reset(tt)},j},Q.exports=r.tls=r.tls||{},n)"function"!=typeof n[ot]&&(r.tls[ot]=n[ot]);r.tls.prf_tls1=t,r.tls.hmac_sha1=function(T,O,M){var K=r.hmac.create();K.start("SHA1",T);var G=r.util.createBuffer();return G.putInt32(O[0]),G.putInt32(O[1]),G.putByte(M.type),G.putByte(M.version.major),G.putByte(M.version.minor),G.putInt16(M.length),G.putBytes(M.fragment.bytes()),K.update(G.getBytes()),K.digest().getBytes()},r.tls.createSessionCache=n.createSessionCache,r.tls.createConnection=n.createConnection},{"./asn1":9,"./forge":16,"./hmac":17,"./md5":24,"./pem":30,"./pki":35,"./random":39,"./sha1":42,"./util":48}],48:[function(D,Q,Z){(function(r,t,s,m,f,p,n,v){var d=D("./forge"),u=D("./baseN"),o=Q.exports=d.util=d.util||{};function g(a){if(8!==a&&16!==a&&24!==a&&32!==a)throw new Error("Only 8, 16, 24, or 32 bits supported: "+a)}function C(a){if(this.data="",this.read=0,"string"==typeof a)this.data=a;else if(o.isArrayBuffer(a)||o.isArrayBufferView(a))if(void 0!==s&&a instanceof s)this.data=a.toString("binary");else{var S=new Uint8Array(a);try{this.data=String.fromCharCode.apply(null,S)}catch(l){for(var i=0;i<S.length;++i)this.putByte(S[i])}}else(a instanceof C||"object"==typeof a&&"string"==typeof a.data&&"number"==typeof a.read)&&(this.data=a.data,this.read=a.read);this._constructedStringLength=0}(function(){if(void 0!==r&&r.nextTick&&!r.browser)return o.nextTick=r.nextTick,void(o.setImmediate="function"==typeof v?v:o.nextTick);if("function"==typeof v)return o.setImmediate=function(){return v.apply(void 0,arguments)},void(o.nextTick=function(N){return v(N)});if(o.setImmediate=function(N){setTimeout(N,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var a="forge.setImmediate",S=[];o.setImmediate=function(N){S.push(N),1===S.length&&window.postMessage(a,"*")},window.addEventListener("message",function(N){if(N.source===window&&N.data===a){N.stopPropagation();var U=S.slice();S.length=0,U.forEach(function(W){W()})}},!0)}if("undefined"!=typeof MutationObserver){var i=Date.now(),l=!0,h=document.createElement("div");S=[],new MutationObserver(function(){var N=S.slice();S.length=0,N.forEach(function(U){U()})}).observe(h,{attributes:!0});var I=o.setImmediate;o.setImmediate=function(N){Date.now()-i>15?(i=Date.now(),I(N)):(S.push(N),1===S.length&&h.setAttribute("a",l=!l))}}o.nextTick=o.setImmediate})(),o.isNodejs=void 0!==r&&r.versions&&r.versions.node,o.globalScope=o.isNodejs?t:"undefined"==typeof self?window:self,o.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},o.isArrayBuffer=function(a){return"undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer},o.isArrayBufferView=function(a){return a&&o.isArrayBuffer(a.buffer)&&void 0!==a.byteLength},o.ByteBuffer=C,o.ByteStringBuffer=C,o.ByteStringBuffer.prototype._optimizeConstructedString=function(a){this._constructedStringLength+=a,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},o.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},o.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},o.ByteStringBuffer.prototype.putByte=function(a){return this.putBytes(String.fromCharCode(a))},o.ByteStringBuffer.prototype.fillWithByte=function(a,S){a=String.fromCharCode(a);for(var i=this.data;S>0;)1&S&&(i+=a),(S>>>=1)>0&&(a+=a);return this.data=i,this._optimizeConstructedString(S),this},o.ByteStringBuffer.prototype.putBytes=function(a){return this.data+=a,this._optimizeConstructedString(a.length),this},o.ByteStringBuffer.prototype.putString=function(a){return this.putBytes(o.encodeUtf8(a))},o.ByteStringBuffer.prototype.putInt16=function(a){return this.putBytes(String.fromCharCode(a>>8&255)+String.fromCharCode(255&a))},o.ByteStringBuffer.prototype.putInt24=function(a){return this.putBytes(String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a))},o.ByteStringBuffer.prototype.putInt32=function(a){return this.putBytes(String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a))},o.ByteStringBuffer.prototype.putInt16Le=function(a){return this.putBytes(String.fromCharCode(255&a)+String.fromCharCode(a>>8&255))},o.ByteStringBuffer.prototype.putInt24Le=function(a){return this.putBytes(String.fromCharCode(255&a)+String.fromCharCode(a>>8&255)+String.fromCharCode(a>>16&255))},o.ByteStringBuffer.prototype.putInt32Le=function(a){return this.putBytes(String.fromCharCode(255&a)+String.fromCharCode(a>>8&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>24&255))},o.ByteStringBuffer.prototype.putInt=function(a,S){g(S);var i="";do{S-=8,i+=String.fromCharCode(a>>S&255)}while(S>0);return this.putBytes(i)},o.ByteStringBuffer.prototype.putSignedInt=function(a,S){return a<0&&(a+=2<<S-1),this.putInt(a,S)},o.ByteStringBuffer.prototype.putBuffer=function(a){return this.putBytes(a.getBytes())},o.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},o.ByteStringBuffer.prototype.getInt16=function(){var a=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,a},o.ByteStringBuffer.prototype.getInt24=function(){var a=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,a},o.ByteStringBuffer.prototype.getInt32=function(){var a=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,a},o.ByteStringBuffer.prototype.getInt16Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,a},o.ByteStringBuffer.prototype.getInt24Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,a},o.ByteStringBuffer.prototype.getInt32Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,a},o.ByteStringBuffer.prototype.getInt=function(a){g(a);var S=0;do{S=(S<<8)+this.data.charCodeAt(this.read++),a-=8}while(a>0);return S},o.ByteStringBuffer.prototype.getSignedInt=function(a){var S=this.getInt(a),i=2<<a-2;return S>=i&&(S-=i<<1),S},o.ByteStringBuffer.prototype.getBytes=function(a){var S;return a?(a=Math.min(this.length(),a),S=this.data.slice(this.read,this.read+a),this.read+=a):0===a?S="":(S=0===this.read?this.data:this.data.slice(this.read),this.clear()),S},o.ByteStringBuffer.prototype.bytes=function(a){return void 0===a?this.data.slice(this.read):this.data.slice(this.read,this.read+a)},o.ByteStringBuffer.prototype.at=function(a){return this.data.charCodeAt(this.read+a)},o.ByteStringBuffer.prototype.setAt=function(a,S){return this.data=this.data.substr(0,this.read+a)+String.fromCharCode(S)+this.data.substr(this.read+a+1),this},o.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},o.ByteStringBuffer.prototype.copy=function(){var a=o.createBuffer(this.data);return a.read=this.read,a},o.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},o.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},o.ByteStringBuffer.prototype.truncate=function(a){var S=Math.max(0,this.length()-a);return this.data=this.data.substr(this.read,S),this.read=0,this},o.ByteStringBuffer.prototype.toHex=function(){for(var a="",S=this.read;S<this.data.length;++S){var i=this.data.charCodeAt(S);i<16&&(a+="0"),a+=i.toString(16)}return a},o.ByteStringBuffer.prototype.toString=function(){return o.decodeUtf8(this.bytes())},o.DataBuffer=function(a,S){this.read=(S=S||{}).readOffset||0,this.growSize=S.growSize||1024;var i=o.isArrayBuffer(a),l=o.isArrayBufferView(a);if(i||l)return this.data=i?new DataView(a):new DataView(a.buffer,a.byteOffset,a.byteLength),void(this.write="writeOffset"in S?S.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=a&&this.putBytes(a),"writeOffset"in S&&(this.write=S.writeOffset)},o.DataBuffer.prototype.length=function(){return this.write-this.read},o.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},o.DataBuffer.prototype.accommodate=function(a,S){if(this.length()>=a)return this;S=Math.max(S||this.growSize,a);var i=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),l=new Uint8Array(this.length()+S);return l.set(i),this.data=new DataView(l.buffer),this},o.DataBuffer.prototype.putByte=function(a){return this.accommodate(1),this.data.setUint8(this.write++,a),this},o.DataBuffer.prototype.fillWithByte=function(a,S){this.accommodate(S);for(var i=0;i<S;++i)this.data.setUint8(a);return this},o.DataBuffer.prototype.putBytes=function(a,S){if(o.isArrayBufferView(a)){var i=(l=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)).byteLength-l.byteOffset;return this.accommodate(i),new Uint8Array(this.data.buffer,this.write).set(l),this.write+=i,this}if(o.isArrayBuffer(a)){var l=new Uint8Array(a);return this.accommodate(l.byteLength),new Uint8Array(this.data.buffer).set(l,this.write),this.write+=l.byteLength,this}if(a instanceof o.DataBuffer||"object"==typeof a&&"number"==typeof a.read&&"number"==typeof a.write&&o.isArrayBufferView(a.data))return l=new Uint8Array(a.data.byteLength,a.read,a.length()),this.accommodate(l.byteLength),new Uint8Array(a.data.byteLength,this.write).set(l),this.write+=l.byteLength,this;if(a instanceof o.ByteStringBuffer&&(a=a.data,S="binary"),S=S||"binary","string"==typeof a){var h;if("hex"===S)return this.accommodate(Math.ceil(a.length/2)),h=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.hex.decode(a,h,this.write),this;if("base64"===S)return this.accommodate(3*Math.ceil(a.length/4)),h=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.base64.decode(a,h,this.write),this;if("utf8"===S&&(a=o.encodeUtf8(a),S="binary"),"binary"===S||"raw"===S)return this.accommodate(a.length),h=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.raw.decode(h),this;if("utf16"===S)return this.accommodate(2*a.length),h=new Uint16Array(this.data.buffer,this.write),this.write+=o.text.utf16.encode(h),this;throw new Error("Invalid encoding: "+S)}throw Error("Invalid parameter: "+a)},o.DataBuffer.prototype.putBuffer=function(a){return this.putBytes(a),a.clear(),this},o.DataBuffer.prototype.putString=function(a){return this.putBytes(a,"utf16")},o.DataBuffer.prototype.putInt16=function(a){return this.accommodate(2),this.data.setInt16(this.write,a),this.write+=2,this},o.DataBuffer.prototype.putInt24=function(a){return this.accommodate(3),this.data.setInt16(this.write,a>>8&65535),this.data.setInt8(this.write,a>>16&255),this.write+=3,this},o.DataBuffer.prototype.putInt32=function(a){return this.accommodate(4),this.data.setInt32(this.write,a),this.write+=4,this},o.DataBuffer.prototype.putInt16Le=function(a){return this.accommodate(2),this.data.setInt16(this.write,a,!0),this.write+=2,this},o.DataBuffer.prototype.putInt24Le=function(a){return this.accommodate(3),this.data.setInt8(this.write,a>>16&255),this.data.setInt16(this.write,a>>8&65535,!0),this.write+=3,this},o.DataBuffer.prototype.putInt32Le=function(a){return this.accommodate(4),this.data.setInt32(this.write,a,!0),this.write+=4,this},o.DataBuffer.prototype.putInt=function(a,S){g(S),this.accommodate(S/8);do{S-=8,this.data.setInt8(this.write++,a>>S&255)}while(S>0);return this},o.DataBuffer.prototype.putSignedInt=function(a,S){return g(S),this.accommodate(S/8),a<0&&(a+=2<<S-1),this.putInt(a,S)},o.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},o.DataBuffer.prototype.getInt16=function(){var a=this.data.getInt16(this.read);return this.read+=2,a},o.DataBuffer.prototype.getInt24=function(){var a=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,a},o.DataBuffer.prototype.getInt32=function(){var a=this.data.getInt32(this.read);return this.read+=4,a},o.DataBuffer.prototype.getInt16Le=function(){var a=this.data.getInt16(this.read,!0);return this.read+=2,a},o.DataBuffer.prototype.getInt24Le=function(){var a=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,a},o.DataBuffer.prototype.getInt32Le=function(){var a=this.data.getInt32(this.read,!0);return this.read+=4,a},o.DataBuffer.prototype.getInt=function(a){g(a);var S=0;do{S=(S<<8)+this.data.getInt8(this.read++),a-=8}while(a>0);return S},o.DataBuffer.prototype.getSignedInt=function(a){var S=this.getInt(a),i=2<<a-2;return S>=i&&(S-=i<<1),S},o.DataBuffer.prototype.getBytes=function(a){var S;return a?(a=Math.min(this.length(),a),S=this.data.slice(this.read,this.read+a),this.read+=a):0===a?S="":(S=0===this.read?this.data:this.data.slice(this.read),this.clear()),S},o.DataBuffer.prototype.bytes=function(a){return void 0===a?this.data.slice(this.read):this.data.slice(this.read,this.read+a)},o.DataBuffer.prototype.at=function(a){return this.data.getUint8(this.read+a)},o.DataBuffer.prototype.setAt=function(a,S){return this.data.setUint8(a,S),this},o.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},o.DataBuffer.prototype.copy=function(){return new o.DataBuffer(this)},o.DataBuffer.prototype.compact=function(){if(this.read>0){var a=new Uint8Array(this.data.buffer,this.read),S=new Uint8Array(a.byteLength);S.set(a),this.data=new DataView(S),this.write-=this.read,this.read=0}return this},o.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},o.DataBuffer.prototype.truncate=function(a){return this.write=Math.max(0,this.length()-a),this.read=Math.min(this.read,this.write),this},o.DataBuffer.prototype.toHex=function(){for(var a="",S=this.read;S<this.data.byteLength;++S){var i=this.data.getUint8(S);i<16&&(a+="0"),a+=i.toString(16)}return a},o.DataBuffer.prototype.toString=function(a){var S=new Uint8Array(this.data,this.read,this.length());if("binary"===(a=a||"utf8")||"raw"===a)return o.binary.raw.encode(S);if("hex"===a)return o.binary.hex.encode(S);if("base64"===a)return o.binary.base64.encode(S);if("utf8"===a)return o.text.utf8.decode(S);if("utf16"===a)return o.text.utf16.decode(S);throw new Error("Invalid encoding: "+a)},o.createBuffer=function(a,S){return S=S||"raw",void 0!==a&&"utf8"===S&&(a=o.encodeUtf8(a)),new o.ByteBuffer(a)},o.fillString=function(a,S){for(var i="";S>0;)1&S&&(i+=a),(S>>>=1)>0&&(a+=a);return i},o.xorBytes=function(a,S,i){for(var l="",h="",I="",N=0,U=0;i>0;--i,++N)h=a.charCodeAt(N)^S.charCodeAt(N),U>=10&&(l+=I,I="",U=0),I+=String.fromCharCode(h),++U;return l+I},o.hexToBytes=function(a){var S="",i=0;for(!0&a.length&&(i=1,S+=String.fromCharCode(parseInt(a[0],16)));i<a.length;i+=2)S+=String.fromCharCode(parseInt(a.substr(i,2),16));return S},o.bytesToHex=function(a){return o.createBuffer(a).toHex()},o.int32ToBytes=function(a){return String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a)};var _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],E="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";o.encode64=function(a,S){for(var i,l,h,I="",N="",U=0;U<a.length;)i=a.charCodeAt(U++),l=a.charCodeAt(U++),h=a.charCodeAt(U++),I+=_.charAt(i>>2),I+=_.charAt((3&i)<<4|l>>4),isNaN(l)?I+="==":(I+=_.charAt((15&l)<<2|h>>6),I+=isNaN(h)?"=":_.charAt(63&h)),S&&I.length>S&&(N+=I.substr(0,S)+"\r\n",I=I.substr(S));return N+I},o.decode64=function(a){a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var S,i,l,h,I="",N=0;N<a.length;)S=b[a.charCodeAt(N++)-43],i=b[a.charCodeAt(N++)-43],l=b[a.charCodeAt(N++)-43],h=b[a.charCodeAt(N++)-43],I+=String.fromCharCode(S<<2|i>>4),64!==l&&(I+=String.fromCharCode((15&i)<<4|l>>2),64!==h&&(I+=String.fromCharCode((3&l)<<6|h)));return I},o.encodeUtf8=function(a){return unescape(encodeURIComponent(a))},o.decodeUtf8=function(a){return decodeURIComponent(escape(a))},o.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:u.encode,decode:u.decode}},o.binary.raw.encode=function(a){return String.fromCharCode.apply(null,a)},o.binary.raw.decode=function(a,S,i){var l=S;l||(l=new Uint8Array(a.length));for(var h=i=i||0,I=0;I<a.length;++I)l[h++]=a.charCodeAt(I);return S?h-i:l},o.binary.hex.encode=o.bytesToHex,o.binary.hex.decode=function(a,S,i){var l=S;l||(l=new Uint8Array(Math.ceil(a.length/2)));var h=0,I=i=i||0;for(1&a.length&&(h=1,l[I++]=parseInt(a[0],16));h<a.length;h+=2)l[I++]=parseInt(a.substr(h,2),16);return S?I-i:l},o.binary.base64.encode=function(a,S){for(var i,l,h,I="",N="",U=0;U<a.byteLength;)i=a[U++],l=a[U++],h=a[U++],I+=_.charAt(i>>2),I+=_.charAt((3&i)<<4|l>>4),isNaN(l)?I+="==":(I+=_.charAt((15&l)<<2|h>>6),I+=isNaN(h)?"=":_.charAt(63&h)),S&&I.length>S&&(N+=I.substr(0,S)+"\r\n",I=I.substr(S));return N+I},o.binary.base64.decode=function(a,S,i){var l,h,I,N,U=S;U||(U=new Uint8Array(3*Math.ceil(a.length/4))),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var W=0,Y=i=i||0;W<a.length;)l=b[a.charCodeAt(W++)-43],h=b[a.charCodeAt(W++)-43],I=b[a.charCodeAt(W++)-43],N=b[a.charCodeAt(W++)-43],U[Y++]=l<<2|h>>4,64!==I&&(U[Y++]=(15&h)<<4|I>>2,64!==N&&(U[Y++]=(3&I)<<6|N));return S?Y-i:U.subarray(0,Y)},o.binary.base58.encode=function(a,S){return o.binary.baseN.encode(a,E,S)},o.binary.base58.decode=function(a,S){return o.binary.baseN.decode(a,E,S)},o.text={utf8:{},utf16:{}},o.text.utf8.encode=function(a,S,i){a=o.encodeUtf8(a);var l=S;l||(l=new Uint8Array(a.length));for(var h=i=i||0,I=0;I<a.length;++I)l[h++]=a.charCodeAt(I);return S?h-i:l},o.text.utf8.decode=function(a){return o.decodeUtf8(String.fromCharCode.apply(null,a))},o.text.utf16.encode=function(a,S,i){var l=S;l||(l=new Uint8Array(2*a.length));for(var h=new Uint16Array(l.buffer),I=i=i||0,N=i,U=0;U<a.length;++U)h[N++]=a.charCodeAt(U),I+=2;return S?I-i:l},o.text.utf16.decode=function(a){return String.fromCharCode.apply(null,new Uint16Array(a.buffer))},o.deflate=function(a,S,i){if(S=o.decode64(a.deflate(o.encode64(S)).rval),i){var l=2;32&S.charCodeAt(1)&&(l=6),S=S.substring(l,S.length-4)}return S},o.inflate=function(a,S,i){var l=a.inflate(o.encode64(S)).rval;return null===l?null:o.decode64(l)};var k=function(a,S,i){if(!a)throw new Error("WebStorage not available.");var l;if(null===i?l=a.removeItem(S):(i=o.encode64(JSON.stringify(i)),l=a.setItem(S,i)),void 0!==l&&!0!==l.rval){var h=new Error(l.error.message);throw h.id=l.error.id,h.name=l.error.name,h}},L=function(a,S){if(!a)throw new Error("WebStorage not available.");var i=a.getItem(S);if(a.init)if(null===i.rval){if(i.error){var l=new Error(i.error.message);throw l.id=i.error.id,l.name=i.error.name,l}i=null}else i=i.rval;return null!==i&&(i=JSON.parse(o.decode64(i))),i},P=function(a,S,i,l){var h=L(a,S);null===h&&(h={}),h[i]=l,k(a,S,h)},V=function(a,S,i){var l=L(a,S);return null!==l&&(l=i in l?l[i]:null),l},y=function(a,S,i){var l=L(a,S);if(null!==l&&i in l){delete l[i];var h=!0;for(var I in l){h=!1;break}h&&(l=null),k(a,S,l)}},e=function(a,S){k(a,S,null)},A=function(a,S,i){var l,h=null;void 0===i&&(i=["web","flash"]);var I=!1,N=null;for(var U in i){l=i[U];try{if("flash"===l||"both"===l){if(null===S[0])throw new Error("Flash local storage not available.");h=a.apply(this,S),I="flash"===l}"web"!==l&&"both"!==l||(S[0]=localStorage,h=a.apply(this,S),I=!0)}catch(W){N=W}if(I)break}if(!I)throw N;return h};o.setItem=function(a,S,i,l,h){A(P,arguments,h)},o.getItem=function(a,S,i,l){return A(V,arguments,l)},o.removeItem=function(a,S,i,l){A(y,arguments,l)},o.clearItems=function(a,S,i){A(e,arguments,i)},o.parseUrl=function(a){var S=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;S.lastIndex=0;var i=S.exec(a),l=null===i?null:{full:a,scheme:i[1],host:i[2],port:i[3],path:i[4]};return l&&(l.fullHost=l.host,l.port?(80!==l.port&&"http"===l.scheme||443!==l.port&&"https"===l.scheme)&&(l.fullHost+=":"+l.port):"http"===l.scheme?l.port=80:"https"===l.scheme&&(l.port=443),l.full=l.scheme+"://"+l.fullHost),l};var R=null;o.getQueryVariables=function(a){var S,i=function(l){for(var h={},I=l.split("&"),N=0;N<I.length;N++){var U,W,Y=I[N].indexOf("=");Y>0?(U=I[N].substring(0,Y),W=I[N].substring(Y+1)):(U=I[N],W=null),U in h||(h[U]=[]),U in Object.prototype||null===W||h[U].push(unescape(W))}return h};return void 0===a?(null===R&&(R="undefined"!=typeof window&&window.location&&window.location.search?i(window.location.search.substring(1)):{}),S=R):S=i(a),S},o.parseFragment=function(a){var S=a,i="",l=a.indexOf("?");l>0&&(S=a.substring(0,l),i=a.substring(l+1));var h=S.split("/");return h.length>0&&""===h[0]&&h.shift(),{pathString:S,queryString:i,path:h,query:""===i?{}:o.getQueryVariables(i)}},o.makeRequest=function(a){var S=o.parseFragment(a),i={path:S.pathString,query:S.queryString,getPath:function(l){return void 0===l?S.path:S.path[l]},getQuery:function(l,h){var I;return void 0===l?I=S.query:(I=S.query[l])&&void 0!==h&&(I=I[h]),I},getQueryLast:function(l,h){var I=i.getQuery(l);return I?I[I.length-1]:h}};return i},o.makeLink=function(a,S,i){a=jQuery.isArray(a)?a.join("/"):a;var l=jQuery.param(S||{});return a+(l.length>0?"?"+l:"")+((i=i||"").length>0?"#"+i:"")},o.setPath=function(a,S,i){if("object"==typeof a&&null!==a)for(var l=0,h=S.length;l<h;){var I=S[l++];if(l==h)a[I]=i;else{var N=I in a;(!N||N&&"object"!=typeof a[I]||N&&null===a[I])&&(a[I]={}),a=a[I]}}},o.getPath=function(a,S,i){for(var l=0,h=S.length,I=!0;I&&l<h&&"object"==typeof a&&null!==a;){var N=S[l++];(I=N in a)&&(a=a[N])}return I?a:i},o.deletePath=function(a,S){if("object"==typeof a&&null!==a)for(var i=0,l=S.length;i<l;){var h=S[i++];if(i==l)delete a[h];else{if(!(h in a)||"object"!=typeof a[h]||null===a[h])break;a=a[h]}}},o.isEmpty=function(a){for(var S in a)if(a.hasOwnProperty(S))return!1;return!0},o.format=function(a){for(var S,i,l=/%./g,h=0,I=[],N=0;S=l.exec(a);){(i=a.substring(N,l.lastIndex-2)).length>0&&I.push(i),N=l.lastIndex;var U=S[0][1];switch(U){case"s":case"o":I.push(h<arguments.length?arguments[1+h++]:"<?>");break;case"%":I.push("%");break;default:I.push("<%"+U+"?>")}}return I.push(a.substring(N)),I.join("")},o.formatNumber=function(a,S,i,l){var h=a,I=isNaN(S=Math.abs(S))?2:S,N=void 0===i?",":i,U=void 0===l?".":l,W=h<0?"-":"",Y=parseInt(h=Math.abs(+h||0).toFixed(I),10)+"",et=Y.length>3?Y.length%3:0;return W+(et?Y.substr(0,et)+U:"")+Y.substr(et).replace(/(\d{3})(?=\d)/g,"$1"+U)+(I?N+Math.abs(h-Y).toFixed(I).slice(2):"")},o.formatSize=function(a){return a>=1073741824?o.formatNumber(a/1073741824,2,".","")+" GiB":a>=1048576?o.formatNumber(a/1048576,2,".","")+" MiB":a>=1024?o.formatNumber(a/1024,0)+" KiB":o.formatNumber(a,0)+" bytes"},o.bytesFromIP=function(a){return-1!==a.indexOf(".")?o.bytesFromIPv4(a):-1!==a.indexOf(":")?o.bytesFromIPv6(a):null},o.bytesFromIPv4=function(a){if(4!==(a=a.split(".")).length)return null;for(var S=o.createBuffer(),i=0;i<a.length;++i){var l=parseInt(a[i],10);if(isNaN(l))return null;S.putByte(l)}return S.getBytes()},o.bytesFromIPv6=function(a){for(var S=0,i=2*(8-(a=a.split(":").filter(function(N){return 0===N.length&&++S,!0})).length+S),l=o.createBuffer(),h=0;h<8;++h)if(a[h]&&0!==a[h].length){var I=o.hexToBytes(a[h]);I.length<2&&l.putByte(0),l.putBytes(I)}else l.fillWithByte(0,i),i=0;return l.getBytes()},o.bytesToIP=function(a){return 4===a.length?o.bytesToIPv4(a):16===a.length?o.bytesToIPv6(a):null},o.bytesToIPv4=function(a){if(4!==a.length)return null;for(var S=[],i=0;i<a.length;++i)S.push(a.charCodeAt(i));return S.join(".")},o.bytesToIPv6=function(a){if(16!==a.length)return null;for(var S=[],i=[],l=0,h=0;h<a.length;h+=2){for(var I=o.bytesToHex(a[h]+a[h+1]);"0"===I[0]&&"0"!==I;)I=I.substr(1);if("0"===I){var N=i[i.length-1],U=S.length;N&&U===N.end+1?(N.end=U,N.end-N.start>i[l].end-i[l].start&&(l=i.length-1)):i.push({start:U,end:U})}S.push(I)}if(i.length>0){var W=i[l];W.end-W.start>0&&(S.splice(W.start,W.end-W.start+1,""),0===W.start&&S.unshift(""),7===W.end&&S.push(""))}return S.join(":")},o.estimateCores=function(a,S){if("function"==typeof a&&(S=a,a={}),a=a||{},"cores"in o&&!a.update)return S(null,o.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return o.cores=navigator.hardwareConcurrency,S(null,o.cores);if("undefined"==typeof Worker)return o.cores=1,S(null,o.cores);if("undefined"==typeof Blob)return o.cores=2,S(null,o.cores);var i=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(l){for(var h=Date.now(),I=h+4;Date.now()<I;);self.postMessage({st:h,et:I})})}.toString(),")()"],{type:"application/javascript"}));!function l(h,I,N){if(0===I){var U=Math.floor(h.reduce(function(W,Y){return W+Y},0)/h.length);return o.cores=Math.max(1,U),URL.revokeObjectURL(i),S(null,o.cores)}!function(W,Y){for(var et=[],q=[],$=0;$<W;++$){var z=new Worker(i);z.addEventListener("message",function(w){if(q.push(w.data),q.length===W){for(var x=0;x<W;++x)et[x].terminate();Y(0,q)}}),et.push(z)}for($=0;$<W;++$)et[$].postMessage($)}(N,function(W,Y){h.push(function(et,q){for(var $=[],z=0;z<et;++z)for(var w=q[z],x=$[z]=[],ot=0;ot<et;++ot)if(z!==ot){var T=q[ot];(w.st>T.st&&w.st<T.et||T.st>w.st&&T.st<w.et)&&x.push(ot)}return $.reduce(function(O,M){return Math.max(O,M.length)},0)}(N,Y)),l(h,I-1,N)})}([],5,16)}}).call(this,D("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},D("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],D("timers").setImmediate)},{"./baseN":10,"./forge":16,_process:50,buffer:6,timers:51}],49:[function(D,Q,Z){var r=D("./forge");D("./aes"),D("./asn1"),D("./des"),D("./md"),D("./mgf"),D("./oids"),D("./pem"),D("./pss"),D("./rsa"),D("./util");var t=r.asn1,s=Q.exports=r.pki=r.pki||{},m=s.oids,f={};f.CN=m.commonName,f.commonName="CN",f.C=m.countryName,f.countryName="C",f.L=m.localityName,f.localityName="L",f.ST=m.stateOrProvinceName,f.stateOrProvinceName="ST",f.O=m.organizationName,f.organizationName="O",f.OU=m.organizationalUnitName,f.organizationalUnitName="OU",f.E=m.emailAddress,f.emailAddress="E";var p=r.pki.rsa.publicKeyValidator,n={name:"Certificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},p,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},v={name:"rsapss",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},u={name:"CertificationRequest",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[{name:"CertificationRequestInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},p,{name:"CertificationRequestInfo.attributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},{name:"CertificationRequest.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function o(y,e){"string"==typeof e&&(e={shortName:e});for(var A,R=null,a=0;null===R&&a<y.attributes.length;++a)A=y.attributes[a],(e.type&&e.type===A.type||e.name&&e.name===A.name||e.shortName&&e.shortName===A.shortName)&&(R=A);return R}s.RDNAttributesAsArray=function(y,e){for(var A,R,a,S=[],i=0;i<y.value.length;++i){A=y.value[i];for(var l=0;l<A.value.length;++l)(a={}).type=t.derToOid((R=A.value[l]).value[0].value),a.value=R.value[1].value,a.valueTagClass=R.value[1].type,a.type in m&&(a.name=m[a.type],a.name in f&&(a.shortName=f[a.name])),e&&(e.update(a.type),e.update(a.value)),S.push(a)}return S},s.CRIAttributesAsArray=function(y){for(var e=[],A=0;A<y.length;++A)for(var R=y[A],a=t.derToOid(R.value[0].value),S=R.value[1].value,i=0;i<S.length;++i){var l={};if(l.type=a,l.value=S[i].value,l.valueTagClass=S[i].type,l.type in m&&(l.name=m[l.type],l.name in f&&(l.shortName=f[l.name])),l.type===m.extensionRequest){l.extensions=[];for(var h=0;h<l.value.length;++h)l.extensions.push(s.certificateExtensionFromAsn1(l.value[h]))}e.push(l)}return e};var g=function(y,e,A){var R={};if(y!==m["RSASSA-PSS"])return R;A&&(R={hash:{algorithmOid:m.sha1},mgf:{algorithmOid:m.mgf1,hash:{algorithmOid:m.sha1}},saltLength:20});var a={},S=[];if(!t.validate(e,v,a,S)){var i=new Error("Cannot read RSASSA-PSS parameter block.");throw i.errors=S,i}return void 0!==a.hashOid&&(R.hash=R.hash||{},R.hash.algorithmOid=t.derToOid(a.hashOid)),void 0!==a.maskGenOid&&(R.mgf=R.mgf||{},R.mgf.algorithmOid=t.derToOid(a.maskGenOid),R.mgf.hash=R.mgf.hash||{},R.mgf.hash.algorithmOid=t.derToOid(a.maskGenHashOid)),void 0!==a.saltLength&&(R.saltLength=a.saltLength.charCodeAt(0)),R};function C(y){for(var e,A,R=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),a=y.attributes,S=0;S<a.length;++S){var i=(e=a[S]).value,l=t.Type.PRINTABLESTRING;"valueTagClass"in e&&(l=e.valueTagClass)===t.Type.UTF8&&(i=r.util.encodeUtf8(i)),A=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.UNIVERSAL,l,!1,i)])]),R.value.push(A)}return R}function _(y){for(var e,A=0;A<y.length;++A){if(void 0===(e=y[A]).name&&(e.type&&e.type in s.oids?e.name=s.oids[e.type]:e.shortName&&e.shortName in f&&(e.name=s.oids[f[e.shortName]])),void 0===e.type){if(!e.name||!(e.name in s.oids))throw(a=new Error("Attribute type not specified.")).attribute=e,a;e.type=s.oids[e.name]}if(void 0===e.shortName&&e.name&&e.name in f&&(e.shortName=f[e.name]),e.type===m.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=t.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var R=0;R<e.extensions.length;++R)e.value.push(s.certificateExtensionToAsn1(b(e.extensions[R])))}var a;if(void 0===e.value)throw(a=new Error("Attribute value not specified.")).attribute=e,a}}function b(y,e){if(e=e||{},void 0===y.name&&y.id&&y.id in s.oids&&(y.name=s.oids[y.id]),void 0===y.id){if(!y.name||!(y.name in s.oids))throw($=new Error("Extension ID not specified.")).extension=y,$;y.id=s.oids[y.name]}if(void 0!==y.value)return y;if("keyUsage"===y.name){var A=0,R=0,a=0;y.digitalSignature&&(R|=128,A=7),y.nonRepudiation&&(R|=64,A=6),y.keyEncipherment&&(R|=32,A=5),y.dataEncipherment&&(R|=16,A=4),y.keyAgreement&&(R|=8,A=3),y.keyCertSign&&(R|=4,A=2),y.cRLSign&&(R|=2,A=1),y.encipherOnly&&(R|=1,A=0),y.decipherOnly&&(a|=128,A=7);var S=String.fromCharCode(A);0!==a?S+=String.fromCharCode(R)+String.fromCharCode(a):0!==R&&(S+=String.fromCharCode(R)),y.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,S)}else if("basicConstraints"===y.name)y.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),y.cA&&y.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in y&&y.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(y.pathLenConstraint).getBytes()));else if("extKeyUsage"===y.name){y.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var i=y.value.value;for(var l in y)!0===y[l]&&(l in m?i.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(m[l]).getBytes())):-1!==l.indexOf(".")&&i.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(l).getBytes())))}else if("nsCertType"===y.name)A=0,R=0,y.client&&(R|=128,A=7),y.server&&(R|=64,A=6),y.email&&(R|=32,A=5),y.objsign&&(R|=16,A=4),y.reserved&&(R|=8,A=3),y.sslCA&&(R|=4,A=2),y.emailCA&&(R|=2,A=1),y.objCA&&(R|=1,A=0),S=String.fromCharCode(A),0!==R&&(S+=String.fromCharCode(R)),y.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,S);else if("subjectAltName"===y.name||"issuerAltName"===y.name){y.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var h=0;h<y.altNames.length;++h){if(S=(Y=y.altNames[h]).value,7===Y.type&&Y.ip){if(null===(S=r.util.bytesFromIP(Y.ip)))throw($=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=y,$}else 8===Y.type&&(S=t.oidToDer(Y.oid?t.oidToDer(Y.oid):S));y.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,Y.type,!1,S))}}else if("nsComment"===y.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(y.comment)||y.comment.length<1||y.comment.length>128)throw new Error('Invalid "nsComment" content.');y.value=t.create(t.Class.UNIVERSAL,t.Type.IA5STRING,!1,y.comment)}else if("subjectKeyIdentifier"===y.name&&e.cert){var I=e.cert.generateSubjectKeyIdentifier();y.subjectKeyIdentifier=I.toHex(),y.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,I.getBytes())}else if("authorityKeyIdentifier"===y.name&&e.cert){if(y.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),i=y.value.value,y.keyIdentifier){var N=!0===y.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():y.keyIdentifier;i.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,N))}if(y.authorityCertIssuer){var U=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[C(!0===y.authorityCertIssuer?e.cert.issuer:y.authorityCertIssuer)])];i.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,U))}if(y.serialNumber){var W=r.util.hexToBytes(!0===y.serialNumber?e.cert.serialNumber:y.serialNumber);i.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,W))}}else if("cRLDistributionPoints"===y.name){y.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),i=y.value.value;var Y,et=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),q=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(h=0;h<y.altNames.length;++h){if(S=(Y=y.altNames[h]).value,7===Y.type&&Y.ip){if(null===(S=r.util.bytesFromIP(Y.ip)))throw($=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=y,$}else 8===Y.type&&(S=t.oidToDer(Y.oid?t.oidToDer(Y.oid):S));q.value.push(t.create(t.Class.CONTEXT_SPECIFIC,Y.type,!1,S))}et.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[q])),i.push(et)}var $;if(void 0===y.value)throw($=new Error("Extension value not specified.")).extension=y,$;return y}function E(y,e){if(y===m["RSASSA-PSS"]){var A=[];return void 0!==e.hash.algorithmOid&&A.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&A.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&A.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,A)}return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")}function k(y){var e=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===y.attributes.length)return e;for(var A=y.attributes,R=0;R<A.length;++R){var a=A[R],S=a.value,i=t.Type.UTF8;"valueTagClass"in a&&(i=a.valueTagClass),i===t.Type.UTF8&&(S=r.util.encodeUtf8(S));var l=!1;"valueConstructed"in a&&(l=a.valueConstructed);var h=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(a.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,i,l,S)])]);e.value.push(h)}return e}s.certificateFromPem=function(y,e,A){var R=r.pem.decode(y)[0];if("CERTIFICATE"!==R.type&&"X509 CERTIFICATE"!==R.type&&"TRUSTED CERTIFICATE"!==R.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=R.type,a}if(R.procType&&"ENCRYPTED"===R.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var S=t.fromDer(R.body,A);return s.certificateFromAsn1(S,e)},s.certificateToPem=function(y,e){var A={type:"CERTIFICATE",body:t.toDer(s.certificateToAsn1(y)).getBytes()};return r.pem.encode(A,{maxline:e})},s.publicKeyFromPem=function(y){var e=r.pem.decode(y)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var A=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw A.headerType=e.type,A}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var R=t.fromDer(e.body);return s.publicKeyFromAsn1(R)},s.publicKeyToPem=function(y,e){var A={type:"PUBLIC KEY",body:t.toDer(s.publicKeyToAsn1(y)).getBytes()};return r.pem.encode(A,{maxline:e})},s.publicKeyToRSAPublicKeyPem=function(y,e){var A={type:"RSA PUBLIC KEY",body:t.toDer(s.publicKeyToRSAPublicKey(y)).getBytes()};return r.pem.encode(A,{maxline:e})},s.getPublicKeyFingerprint=function(y,e){var A,R=(e=e||{}).md||r.md.sha1.create();switch(e.type||"RSAPublicKey"){case"RSAPublicKey":A=t.toDer(s.publicKeyToRSAPublicKey(y)).getBytes();break;case"SubjectPublicKeyInfo":A=t.toDer(s.publicKeyToAsn1(y)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}R.start(),R.update(A);var a=R.digest();if("hex"===e.encoding){var S=a.toHex();return e.delimiter?S.match(/.{2}/g).join(e.delimiter):S}if("binary"===e.encoding)return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return a},s.certificationRequestFromPem=function(y,e,A){var R=r.pem.decode(y)[0];if("CERTIFICATE REQUEST"!==R.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=R.type,a}if(R.procType&&"ENCRYPTED"===R.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var S=t.fromDer(R.body,A);return s.certificationRequestFromAsn1(S,e)},s.certificationRequestToPem=function(y,e){var A={type:"CERTIFICATE REQUEST",body:t.toDer(s.certificationRequestToAsn1(y)).getBytes()};return r.pem.encode(A,{maxline:e})},s.createCertificate=function(){var y={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return y.siginfo.algorithmOid=null,y.validity={},y.validity.notBefore=new Date,y.validity.notAfter=new Date,y.issuer={},y.issuer.getField=function(e){return o(y.issuer,e)},y.issuer.addField=function(e){_([e]),y.issuer.attributes.push(e)},y.issuer.attributes=[],y.issuer.hash=null,y.subject={},y.subject.getField=function(e){return o(y.subject,e)},y.subject.addField=function(e){_([e]),y.subject.attributes.push(e)},y.subject.attributes=[],y.subject.hash=null,y.extensions=[],y.publicKey=null,y.md=null,y.setSubject=function(e,A){_(e),y.subject.attributes=e,delete y.subject.uniqueId,A&&(y.subject.uniqueId=A),y.subject.hash=null},y.setIssuer=function(e,A){_(e),y.issuer.attributes=e,delete y.issuer.uniqueId,A&&(y.issuer.uniqueId=A),y.issuer.hash=null},y.setExtensions=function(e){for(var A=0;A<e.length;++A)b(e[A],{cert:y});y.extensions=e},y.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var A,R=null,a=0;null===R&&a<y.extensions.length;++a)A=y.extensions[a],(e.id&&A.id===e.id||e.name&&A.name===e.name)&&(R=A);return R},y.sign=function(e,A){y.md=A||r.md.sha1.create();var R=m[y.md.algorithm+"WithRSAEncryption"];if(!R){var a=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw a.algorithm=y.md.algorithm,a}y.signatureOid=y.siginfo.algorithmOid=R,y.tbsCertificate=s.getTBSCertificate(y);var S=t.toDer(y.tbsCertificate);y.md.update(S.getBytes()),y.signature=e.sign(y.md)},y.verify=function(e){var A=!1;if(!y.issued(e)){var R=e.issuer,a=y.subject;throw(U=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=R.attributes,U.actualIssuer=a.attributes,U}var S=e.md;if(null===S){if(e.signatureOid in m)switch(m[e.signatureOid]){case"sha1WithRSAEncryption":S=r.md.sha1.create();break;case"md5WithRSAEncryption":S=r.md.md5.create();break;case"sha256WithRSAEncryption":case"RSASSA-PSS":S=r.md.sha256.create();break;case"sha384WithRSAEncryption":S=r.md.sha384.create();break;case"sha512WithRSAEncryption":S=r.md.sha512.create()}if(null===S)throw(U=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=e.signatureOid,U;var i=e.tbsCertificate||s.getTBSCertificate(e),l=t.toDer(i);S.update(l.getBytes())}if(null!==S){var h;switch(e.signatureOid){case m.sha1WithRSAEncryption:h=void 0;break;case m["RSASSA-PSS"]:var I,N,U;if(void 0===(I=m[e.signatureParameters.mgf.hash.algorithmOid])||void 0===r.md[I])throw(U=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,U.name=I,U;if(void 0===(N=m[e.signatureParameters.mgf.algorithmOid])||void 0===r.mgf[N])throw(U=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,U.name=N,U;if(N=r.mgf[N].create(r.md[I].create()),void 0===(I=m[e.signatureParameters.hash.algorithmOid])||void 0===r.md[I])throw{message:"Unsupported RSASSA-PSS hash function.",oid:e.signatureParameters.hash.algorithmOid,name:I};h=r.pss.create(r.md[I].create(),N,e.signatureParameters.saltLength)}A=y.publicKey.verify(S.digest().getBytes(),e.signature,h)}return A},y.isIssuer=function(e){var A=!1,R=y.issuer,a=e.subject;if(R.hash&&a.hash)A=R.hash===a.hash;else if(R.attributes.length===a.attributes.length){var S,i;A=!0;for(var l=0;A&&l<R.attributes.length;++l)(S=R.attributes[l]).type===(i=a.attributes[l]).type&&S.value===i.value||(A=!1)}return A},y.issued=function(e){return e.isIssuer(y)},y.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(y.publicKey,{type:"RSAPublicKey"})},y.verifySubjectKeyIdentifier=function(){for(var e=m.subjectKeyIdentifier,A=0;A<y.extensions.length;++A){var R=y.extensions[A];if(R.id===e){var a=y.generateSubjectKeyIdentifier().getBytes();return r.util.hexToBytes(R.subjectKeyIdentifier)===a}}return!1},y},s.certificateFromAsn1=function(y,e){var A={},R=[];if(!t.validate(y,n,A,R))throw(l=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=R,l;if(t.derToOid(A.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=s.createCertificate();a.version=A.certVersion?A.certVersion.charCodeAt(0):0;var S=r.util.createBuffer(A.certSerialNumber);a.serialNumber=S.toHex(),a.signatureOid=r.asn1.derToOid(A.certSignatureOid),a.signatureParameters=g(a.signatureOid,A.certSignatureParams,!0),a.siginfo.algorithmOid=r.asn1.derToOid(A.certinfoSignatureOid),a.siginfo.parameters=g(a.siginfo.algorithmOid,A.certinfoSignatureParams,!1),a.signature=A.certSignature;var i=[];if(void 0!==A.certValidity1UTCTime&&i.push(t.utcTimeToDate(A.certValidity1UTCTime)),void 0!==A.certValidity2GeneralizedTime&&i.push(t.generalizedTimeToDate(A.certValidity2GeneralizedTime)),void 0!==A.certValidity3UTCTime&&i.push(t.utcTimeToDate(A.certValidity3UTCTime)),void 0!==A.certValidity4GeneralizedTime&&i.push(t.generalizedTimeToDate(A.certValidity4GeneralizedTime)),i.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(i.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=i[0],a.validity.notAfter=i[1],a.tbsCertificate=A.tbsCertificate,e){var l;if(a.md=null,a.signatureOid in m)switch(m[a.signatureOid]){case"sha1WithRSAEncryption":a.md=r.md.sha1.create();break;case"md5WithRSAEncryption":a.md=r.md.md5.create();break;case"sha256WithRSAEncryption":case"RSASSA-PSS":a.md=r.md.sha256.create();break;case"sha384WithRSAEncryption":a.md=r.md.sha384.create();break;case"sha512WithRSAEncryption":a.md=r.md.sha512.create()}if(null===a.md)throw(l=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=a.signatureOid,l;var h=t.toDer(a.tbsCertificate);a.md.update(h.getBytes())}var I=r.md.sha1.create();a.issuer.getField=function(U){return o(a.issuer,U)},a.issuer.addField=function(U){_([U]),a.issuer.attributes.push(U)},a.issuer.attributes=s.RDNAttributesAsArray(A.certIssuer,I),A.certIssuerUniqueId&&(a.issuer.uniqueId=A.certIssuerUniqueId),a.issuer.hash=I.digest().toHex();var N=r.md.sha1.create();return a.subject.getField=function(U){return o(a.subject,U)},a.subject.addField=function(U){_([U]),a.subject.attributes.push(U)},a.subject.attributes=s.RDNAttributesAsArray(A.certSubject,N),A.certSubjectUniqueId&&(a.subject.uniqueId=A.certSubjectUniqueId),a.subject.hash=N.digest().toHex(),a.extensions=A.certExtensions?s.certificateExtensionsFromAsn1(A.certExtensions):[],a.publicKey=s.publicKeyFromAsn1(A.subjectPublicKeyInfo),a},s.certificateExtensionsFromAsn1=function(y){for(var e=[],A=0;A<y.value.length;++A)for(var R=y.value[A],a=0;a<R.value.length;++a)e.push(s.certificateExtensionFromAsn1(R.value[a]));return e},s.certificateExtensionFromAsn1=function(y){var e={};if(e.id=t.derToOid(y.value[0].value),e.critical=!1,y.value[1].type===t.Type.BOOLEAN?(e.critical=0!==y.value[1].value.charCodeAt(0),e.value=y.value[2].value):e.value=y.value[1].value,e.id in m)if(e.name=m[e.id],"keyUsage"===e.name){var A=0,R=0;(S=t.fromDer(e.value)).value.length>1&&(A=S.value.charCodeAt(1),R=S.value.length>2?S.value.charCodeAt(2):0),e.digitalSignature=128==(128&A),e.nonRepudiation=64==(64&A),e.keyEncipherment=32==(32&A),e.dataEncipherment=16==(16&A),e.keyAgreement=8==(8&A),e.keyCertSign=4==(4&A),e.cRLSign=2==(2&A),e.encipherOnly=1==(1&A),e.decipherOnly=128==(128&R)}else if("basicConstraints"===e.name){e.cA=(S=t.fromDer(e.value)).value.length>0&&S.value[0].type===t.Type.BOOLEAN&&0!==S.value[0].value.charCodeAt(0);var a=null;S.value.length>0&&S.value[0].type===t.Type.INTEGER?a=S.value[0].value:S.value.length>1&&(a=S.value[1].value),null!==a&&(e.pathLenConstraint=t.derToInteger(a))}else if("extKeyUsage"===e.name)for(var S=t.fromDer(e.value),i=0;i<S.value.length;++i){var l=t.derToOid(S.value[i].value);l in m?e[m[l]]=!0:e[l]=!0}else if("nsCertType"===e.name)A=0,(S=t.fromDer(e.value)).value.length>1&&(A=S.value.charCodeAt(1)),e.client=128==(128&A),e.server=64==(64&A),e.email=32==(32&A),e.objsign=16==(16&A),e.reserved=8==(8&A),e.sslCA=4==(4&A),e.emailCA=2==(2&A),e.objCA=1==(1&A);else if("subjectAltName"===e.name||"issuerAltName"===e.name){var h;e.altNames=[],S=t.fromDer(e.value);for(var I=0;I<S.value.length;++I){var N={type:(h=S.value[I]).type,value:h.value};switch(e.altNames.push(N),h.type){case 1:case 2:case 6:break;case 7:N.ip=r.util.bytesToIP(h.value);break;case 8:N.oid=t.derToOid(h.value)}}}else"subjectKeyIdentifier"===e.name&&(S=t.fromDer(e.value),e.subjectKeyIdentifier=r.util.bytesToHex(S.value));return e},s.certificationRequestFromAsn1=function(y,e){var A={},R=[];if(!t.validate(y,u,A,R))throw(S=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=R,S;if(t.derToOid(A.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=s.createCertificationRequest();if(a.version=A.csrVersion?A.csrVersion.charCodeAt(0):0,a.signatureOid=r.asn1.derToOid(A.csrSignatureOid),a.signatureParameters=g(a.signatureOid,A.csrSignatureParams,!0),a.siginfo.algorithmOid=r.asn1.derToOid(A.csrSignatureOid),a.siginfo.parameters=g(a.siginfo.algorithmOid,A.csrSignatureParams,!1),a.signature=A.csrSignature,a.certificationRequestInfo=A.certificationRequestInfo,e){var S;if(a.md=null,a.signatureOid in m)switch(m[a.signatureOid]){case"sha1WithRSAEncryption":a.md=r.md.sha1.create();break;case"md5WithRSAEncryption":a.md=r.md.md5.create();break;case"sha256WithRSAEncryption":case"RSASSA-PSS":a.md=r.md.sha256.create();break;case"sha384WithRSAEncryption":a.md=r.md.sha384.create();break;case"sha512WithRSAEncryption":a.md=r.md.sha512.create()}if(null===a.md)throw(S=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=a.signatureOid,S;var i=t.toDer(a.certificationRequestInfo);a.md.update(i.getBytes())}var l=r.md.sha1.create();return a.subject.getField=function(h){return o(a.subject,h)},a.subject.addField=function(h){_([h]),a.subject.attributes.push(h)},a.subject.attributes=s.RDNAttributesAsArray(A.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=s.publicKeyFromAsn1(A.subjectPublicKeyInfo),a.getAttribute=function(h){return o(a,h)},a.addAttribute=function(h){_([h]),a.attributes.push(h)},a.attributes=s.CRIAttributesAsArray(A.certificationRequestInfoAttributes||[]),a},s.createCertificationRequest=function(){var y={version:0,signatureOid:null,signature:null,siginfo:{}};return y.siginfo.algorithmOid=null,y.subject={},y.subject.getField=function(e){return o(y.subject,e)},y.subject.addField=function(e){_([e]),y.subject.attributes.push(e)},y.subject.attributes=[],y.subject.hash=null,y.publicKey=null,y.attributes=[],y.getAttribute=function(e){return o(y,e)},y.addAttribute=function(e){_([e]),y.attributes.push(e)},y.md=null,y.setSubject=function(e){_(e),y.subject.attributes=e,y.subject.hash=null},y.setAttributes=function(e){_(e),y.attributes=e},y.sign=function(e,A){y.md=A||r.md.sha1.create();var R=m[y.md.algorithm+"WithRSAEncryption"];if(!R){var a=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw a.algorithm=y.md.algorithm,a}y.signatureOid=y.siginfo.algorithmOid=R,y.certificationRequestInfo=s.getCertificationRequestInfo(y);var S=t.toDer(y.certificationRequestInfo);y.md.update(S.getBytes()),y.signature=e.sign(y.md)},y.verify=function(){var e=!1,A=y.md;if(null===A){if(y.signatureOid in m)switch(m[y.signatureOid]){case"sha1WithRSAEncryption":A=r.md.sha1.create();break;case"md5WithRSAEncryption":A=r.md.md5.create();break;case"sha256WithRSAEncryption":case"RSASSA-PSS":A=r.md.sha256.create();break;case"sha384WithRSAEncryption":A=r.md.sha384.create();break;case"sha512WithRSAEncryption":A=r.md.sha512.create()}if(null===A)throw(h=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=y.signatureOid,h;var R=y.certificationRequestInfo||s.getCertificationRequestInfo(y),a=t.toDer(R);A.update(a.getBytes())}if(null!==A){var S;switch(y.signatureOid){case m.sha1WithRSAEncryption:break;case m["RSASSA-PSS"]:var i,l,h;if(void 0===(i=m[y.signatureParameters.mgf.hash.algorithmOid])||void 0===r.md[i])throw(h=new Error("Unsupported MGF hash function.")).oid=y.signatureParameters.mgf.hash.algorithmOid,h.name=i,h;if(void 0===(l=m[y.signatureParameters.mgf.algorithmOid])||void 0===r.mgf[l])throw(h=new Error("Unsupported MGF function.")).oid=y.signatureParameters.mgf.algorithmOid,h.name=l,h;if(l=r.mgf[l].create(r.md[i].create()),void 0===(i=m[y.signatureParameters.hash.algorithmOid])||void 0===r.md[i])throw(h=new Error("Unsupported RSASSA-PSS hash function.")).oid=y.signatureParameters.hash.algorithmOid,h.name=i,h;S=r.pss.create(r.md[i].create(),l,y.signatureParameters.saltLength)}e=y.publicKey.verify(A.digest().getBytes(),y.signature,S)}return e},y};var L=new Date("1950-01-01T00:00:00Z"),P=new Date("2050-01-01T00:00:00Z");function V(y){return y>=L&&y<P?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(y)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(y))}s.getTBSCertificate=function(y){var e=V(y.validity.notBefore),A=V(y.validity.notAfter),R=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(y.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,r.util.hexToBytes(y.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.siginfo.algorithmOid).getBytes()),E(y.siginfo.algorithmOid,y.siginfo.parameters)]),C(y.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[e,A]),C(y.subject),s.publicKeyToAsn1(y.publicKey)]);return y.issuer.uniqueId&&R.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+y.issuer.uniqueId)])),y.subject.uniqueId&&R.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+y.subject.uniqueId)])),y.extensions.length>0&&R.value.push(s.certificateExtensionsToAsn1(y.extensions)),R},s.getCertificationRequestInfo=function(y){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(y.version).getBytes()),C(y.subject),s.publicKeyToAsn1(y.publicKey),k(y)])},s.distinguishedNameToAsn1=function(y){return C(y)},s.certificateToAsn1=function(y){var e=y.tbsCertificate||s.getTBSCertificate(y);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[e,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.signatureOid).getBytes()),E(y.signatureOid,y.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+y.signature)])},s.certificateExtensionsToAsn1=function(y){var e=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),A=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);e.value.push(A);for(var R=0;R<y.length;++R)A.value.push(s.certificateExtensionToAsn1(y[R]));return e},s.certificateExtensionToAsn1=function(y){var e=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);e.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.id).getBytes())),y.critical&&e.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255)));var A=y.value;return"string"!=typeof y.value&&(A=t.toDer(A).getBytes()),e.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,A)),e},s.certificationRequestToAsn1=function(y){var e=y.certificationRequestInfo||s.getCertificationRequestInfo(y);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[e,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(y.signatureOid).getBytes()),E(y.signatureOid,y.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+y.signature)])},s.createCaStore=function(y){var e={certs:{}};function A(i){return R(i),e.certs[i.hash]||null}function R(i){if(!i.hash){var l=r.md.sha1.create();i.attributes=s.RDNAttributesAsArray(C(i),l),i.hash=l.digest().toHex()}}if(e.getIssuer=function(i){return A(i.issuer)},e.addCertificate=function(i){if("string"==typeof i&&(i=r.pki.certificateFromPem(i)),R(i.subject),!e.hasCertificate(i))if(i.subject.hash in e.certs){var l=e.certs[i.subject.hash];r.util.isArray(l)||(l=[l]),l.push(i),e.certs[i.subject.hash]=l}else e.certs[i.subject.hash]=i},e.hasCertificate=function(i){"string"==typeof i&&(i=r.pki.certificateFromPem(i));var l=A(i.subject);if(!l)return!1;r.util.isArray(l)||(l=[l]);for(var h=t.toDer(s.certificateToAsn1(i)).getBytes(),I=0;I<l.length;++I)if(h===t.toDer(s.certificateToAsn1(l[I])).getBytes())return!0;return!1},e.listAllCertificates=function(){var i=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var h=e.certs[l];if(r.util.isArray(h))for(var I=0;I<h.length;++I)i.push(h[I]);else i.push(h)}return i},e.removeCertificate=function(i){var l;if("string"==typeof i&&(i=r.pki.certificateFromPem(i)),R(i.subject),!e.hasCertificate(i))return null;var h=A(i.subject);if(!r.util.isArray(h))return l=e.certs[i.subject.hash],delete e.certs[i.subject.hash],l;for(var I=t.toDer(s.certificateToAsn1(i)).getBytes(),N=0;N<h.length;++N)I===t.toDer(s.certificateToAsn1(h[N])).getBytes()&&(l=h[N],h.splice(N,1));return 0===h.length&&delete e.certs[i.subject.hash],l},y)for(var a=0;a<y.length;++a)e.addCertificate(y[a]);return e},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(y,e,A){"function"==typeof A&&(A={verify:A}),A=A||{};var R=(e=e.slice(0)).slice(0),a=A.validityCheckDate;void 0===a&&(a=new Date);var S=!0,i=null,l=0;do{var h=e.shift(),I=null,N=!1;if(a&&(a<h.validity.notBefore||a>h.validity.notAfter)&&(i={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:h.validity.notBefore,notAfter:h.validity.notAfter,now:a}),null===i){if(null===(I=e[0]||y.getIssuer(h))&&h.isIssuer(h)&&(N=!0,I=h),I){var U=I;r.util.isArray(U)||(U=[U]);for(var W=!1;!W&&U.length>0;){I=U.shift();try{W=I.verify(h)}catch(ot){}}W||(i={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==i||I&&!N||y.hasCertificate(h)||(i={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===i&&I&&!h.isIssuer(I)&&(i={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===i)for(var Y={keyUsage:!0,basicConstraints:!0},et=0;null===i&&et<h.extensions.length;++et){var q=h.extensions[et];!q.critical||q.name in Y||(i={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===i&&(!S||0===e.length&&(!I||N))){var $=h.getExtension("basicConstraints"),z=h.getExtension("keyUsage");null!==z&&(z.keyCertSign&&null!==$||(i={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==i||null===$||$.cA||(i={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===i&&null!==z&&"pathLenConstraint"in $&&l-1>$.pathLenConstraint&&(i={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}var w=null===i||i.error,x=A.verify?A.verify(w,l,R):w;if(!0!==x)throw!0===w&&(i={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(x||0===x)&&("object"!=typeof x||r.util.isArray(x)?"string"==typeof x&&(i.error=x):(x.message&&(i.message=x.message),x.error&&(i.error=x.error))),i;i=null,S=!1,++l}while(e.length>0);return!0}},{"./aes":7,"./asn1":9,"./des":14,"./forge":16,"./md":23,"./mgf":25,"./oids":27,"./pem":30,"./pss":38,"./rsa":41,"./util":48}],50:[function(D,Q,Z){var r,t,s=Q.exports={};function m(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function p(b){if(r===setTimeout)return setTimeout(b,0);if((r===m||!r)&&setTimeout)return r=setTimeout,setTimeout(b,0);try{return r(b,0)}catch(E){try{return r.call(null,b,0)}catch(k){return r.call(this,b,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:m}catch(b){r=m}try{t="function"==typeof clearTimeout?clearTimeout:f}catch(b){t=f}}();var n,v=[],d=!1,u=-1;function o(){d&&n&&(d=!1,n.length?v=n.concat(v):u=-1,v.length&&g())}function g(){if(!d){var b=p(o);d=!0;for(var E=v.length;E;){for(n=v,v=[];++u<E;)n&&n[u].run();u=-1,E=v.length}n=null,d=!1,function(k){if(t===clearTimeout)return clearTimeout(k);if((t===f||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(k);try{t(k)}catch(L){try{return t.call(null,k)}catch(P){return t.call(this,k)}}}(b)}}function C(b,E){this.fun=b,this.array=E}function _(){}s.nextTick=function(b){var E=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)E[k-1]=arguments[k];v.push(new C(b,E)),1!==v.length||d||p(g)},C.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=_,s.addListener=_,s.once=_,s.off=_,s.removeListener=_,s.removeAllListeners=_,s.emit=_,s.prependListener=_,s.prependOnceListener=_,s.listeners=function(b){return[]},s.binding=function(b){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(b){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],51:[function(D,Q,Z){(function(r,t){var s=D("process/browser.js").nextTick,m=Function.prototype.apply,f=Array.prototype.slice,p={},n=0;function v(d,u){this._id=d,this._clearFn=u}Z.setTimeout=function(){return new v(m.call(setTimeout,window,arguments),clearTimeout)},Z.setInterval=function(){return new v(m.call(setInterval,window,arguments),clearInterval)},Z.clearTimeout=Z.clearInterval=function(d){d.close()},v.prototype.unref=v.prototype.ref=function(){},v.prototype.close=function(){this._clearFn.call(window,this._id)},Z.enroll=function(d,u){clearTimeout(d._idleTimeoutId),d._idleTimeout=u},Z.unenroll=function(d){clearTimeout(d._idleTimeoutId),d._idleTimeout=-1},Z._unrefActive=Z.active=function(d){clearTimeout(d._idleTimeoutId);var u=d._idleTimeout;u>=0&&(d._idleTimeoutId=setTimeout(function(){d._onTimeout&&d._onTimeout()},u))},Z.setImmediate="function"==typeof r?r:function(d){var u=n++,o=!(arguments.length<2)&&f.call(arguments,1);return p[u]=!0,s(function(){p[u]&&(o?d.apply(null,o):d.call(null),Z.clearImmediate(u))}),u},Z.clearImmediate="function"==typeof t?t:function(d){delete p[d]}}).call(this,D("timers").setImmediate,D("timers").clearImmediate)},{"process/browser.js":50,timers:51}],52:[function(D,Q,Z){Q.exports={name:"hybrid-crypto-js",version:"0.2.2",description:"Hybrid (RSA+AES) encryption and decryption toolkit for JavaScript",main:"lib/index.js",scripts:{prepublish:"npm run build",webpack:"browserify lib/webpack.js -o web/hybrid-crypto.js",uglify:"uglifyjs web/hybrid-crypto.js -o web/hybrid-crypto.min.js",flow:"flow",babel:"babel src/ -d lib/",build:"npm run babel && npm run webpack && npm run uglify",test:"npm run babel && mocha -R spec"},repository:{type:"git",url:"https://github.com/juhoen/hybrid-crypto-js.git"},keywords:["rsa","aes","rsa+aes","react","node","react-native"],author:"Juho Enala <juho.enala@gmail.com>",license:"MIT",bugs:{url:"https://github.com/juhoen/hybrid-crypto-js/issues"},homepage:"https://github.com/juhoen/hybrid-crypto-js",dependencies:{"node-forge":"^0.8.5"},devDependencies:{"@babel/cli":"^7.5.5","@babel/core":"^7.5.5","@babel/preset-env":"^7.5.5","@babel/preset-flow":"^7.0.0","babel-core":"^6.26.0","babel-preset-env":"1.6.0","babel-preset-es2015":"^6.24.1",babelify:"^8.0.0",browserify:"^16.5.0",chai:"^4.1.2","flow-bin":"^0.107.0",mocha:"^4.0.1",prettier:"^1.18.2","uglify-js":"^3.2.1"},browserslist:"> 0.25%, not dead"}},{}]},{},[5]),function(){var D=document.querySelector('script[src="https://checkout.epayco.co/checkout.js"]');D&&1===D.src.split("&").length&&(D.src=D.src+"?version="+(new Date).getTime())}.call(this),function(D,Q){"use strict";"function"==typeof define&&define.amd?define(function(){return Q(D)}):"function"==typeof module&&module.exports?module.exports=Q(D):Q(D)}(this,function(D){"use strict";var Q,Z,r,t,s,m,f,p,n,v=D.document,d=v.createElement("_"),u="DOMAttrModified";function o(){var C,_={};for(r=0,f=(Z=this.attributes).length;r<f;r+=1)(p=(Q=Z[r]).name.match(s))&&(_[(C=p[1],C.replace(t,function(b,E){return E.toUpperCase()}))]=Q.value);return _}function g(){m?d.removeEventListener(u,g,!1):d.detachEvent("on"+u,g),n=!0}void 0===d.dataset&&(t=/\-([a-z])/gi,s=/^data\-(.+)/,n=!1,(m=!!v.addEventListener)?d.addEventListener(u,g,!1):d.attachEvent("on"+u,g),d.setAttribute("foo","bar"),Object.defineProperty(D.Element.prototype,"dataset",{get:n?function(){return this._datasetCache||(this._datasetCache=o.call(this)),this._datasetCache}:o}),n&&m&&v.addEventListener(u,function(C){delete C.target._datasetCache},!1))}),function(){var D,Q="EpaycoCheckout.require".split("."),Z=Q[Q.length-1],r=this;for(D=0;D<Q.length-1;D+=1)r=r[Q[D]]=r[Q[D]]||{};void 0===r[Z]&&(r[Z]=function(){var t={},s={},m=function(p,n){for(var v,d,u=[],o=0,g=(v=/^\.\.?(\/|$)/.test(n)?[p,n].join("/").split("/"):n.split("/")).length;o<g;o+=1)".."==(d=v[o])?u.pop():"."!=d&&""!=d&&u.push(d);return u.join("/")},f=function(p){return function(n,v){var d,u,o=m("",n),g=m(o,"./index");if(d=s[o]||s[g])return d;if(u=t[o]||t[o=g])return s[o]=(d={id:o,exports:{}}).exports,u(d.exports,function(C){return f(C,o.split("/").slice(0,-1).join("/"))},d),s[o]=d.exports;throw"module "+n+" not found"}(p)};return f.define=function(p){for(var n in p)t[n]=p[n]},f.modules=t,f.cache=s,f}.call())}(),EpaycoCheckout.require.define({"outer/controllers/button":function(D,Q,Z){(function(){var r,t,s,m,f,p,n,v=function(d,u){return function(){return d.apply(u,arguments)}};_ref=Q("outer/lib/utils"),r=_ref.$$,s=_ref.hasClass,m=_ref.addClass,f=_ref.append,_ref,p=_ref.insertAfter,n=_ref.hasAttr,helpers=Q("lib/helpers"),utils=Q("outer/lib/utils"),Iframe=Q("outer/controllers/iframe"),t=function(){function d(u,o){u.setAttribute("src",u.getAttribute("src")+"?version="+(new Date).getTime()),this.scriptEl=u,this.dataset=this.scriptEl.dataset,this.open=v(this.open,this),this.submit=v(this.submit,this),this.parentHead=v(this.parentHead,this),this.append=v(this.append,this),this.render=v(this.render,this),this.document=this.scriptEl.ownerDocument,this.$el=document.createElement("button"),this.$el.setAttribute("style",this.dataset&&this.dataset.epaycoHidden?"display: none":"padding: 0; background: none; border: none; cursor: pointer;"),this.$el.removeAttribute("disabled"),this.$el.className="epayco-button-render",helpers.bind(this.$el,"click",this.submit),this.render(u)}return d.totalButtonId=0,d.load=function(u){var o,g;if(g=r("epayco-button"),g=(g=function(){var C,_,b;for(b=[],C=0,_=g.length;C<_;C+=1)s(o=g[C],"active")||b.push(o);return b}())[g.length-1])return m(g,"active"),new d(g,u).append()},d.prototype.render=function(u){this.$el.innerHTML="",this.$scriptIp=document.createElement("script"),this.$styleTag=document.createElement("style"),this.$styleTag.type="text/css",this.$styleTag.className="styleEpayco",this.$styleTag.appendChild(document.createTextNode(".epayco-button-render:focus {outline:0}")),this.$img=document.createElement("img");var o=this.scriptEl.dataset;this.$img.src=o&&o.epaycoButton?u.dataset.epaycoButton:"https://369969691f476073508a-60bf0867add971908d4f26a64519c2aa.ssl.cf5.rackcdn.com/btns/epayco/boton_de_cobro_epayco2.png","true"===o.epaycoAutoclick&&this.open();try{o.epaycoSignature=helpers.parseParamsForScript(o)}catch(g){console.error("error create siganture",g)}return f(this.$el,this.$img)},d.prototype.append=function(){var u=this.parentHead();this.scriptEl&&(p(this.scriptEl,this.$el),0===document.getElementsByClassName("styleEpayco").length&&p(u,this.$styleTag))},d.prototype.isDisabled=function(){return n(this.$el,"disabled")},d.prototype.parentHead=function(){var u,o;return(null!=(u=this.document)?u.head:void 0)||(null!=(o=this.document)?o.getElementsByTagName("head")[0]:void 0)||this.document.body},d.prototype.submit=function(u){return this.$el.setAttribute("style","padding: 0; background: none; border: none; cursor: pointer; pointer-events: none;"),"function"==typeof u.preventDefault&&u.preventDefault(),this.isDisabled()||this.open(this),!1},d.prototype.open=function(u){helpers.onlineCheckout(this.$el,this.scriptEl.dataset)},d}(),Z.exports=t}).call(this)}}),EpaycoCheckout.require.define({"outer/lib/utils":function(D,Q,Z){(function(){var d=[].indexOf||function(u){for(var o=0,g=this.length;o<g;o+=1)if(o in this&&this[o]===u)return o;return-1};Z.exports={$:function(u){return document.querySelectorAll(u)},$$:function(u){var o,g,C,_,b,E;if("function"==typeof document.getElementsByClassName)return document.getElementsByClassName(u);if("function"==typeof document.querySelectorAll)return document.querySelectorAll("."+u);for(g=new RegExp("(^|\\s)"+u+"(\\s|$)"),E=[],C=0,_=(b=document.getElementsByTagName("*")).length;C<_;C+=1)g.test((o=b[C]).className)&&E.push(o);return E},hasClass:function(u,o){return d.call(u.className.split(" "),o)>=0},addClass:function(u,o){return u.className+=" "+o},append:function(u,o){return u.appendChild(o)},text:function(u,o){return"innerText"in u?u.innerText=o:u.textContent=o,o},insertAfter:function(u,o){return u.parentNode.insertBefore(o,u.nextSibling)},hasAttr:function(u,o){var g;return"function"==typeof u.hasAttribute?u.hasAttribute(o):!(!(g=u.getAttributeNode(o))||!g.specified&&!g.nodeValue)}}}).call(this)}}),EpaycoCheckout.require.define({"lib/helpers":function(D,Q,Z){(function(){Iframe=Q("outer/controllers/iframe"),helpers={userAgent:window.navigator.userAgent,isMobile:function(){var r,t=!1;return r=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0),t},checkNested:function(r){for(var t=Array.prototype.slice.call(arguments,1),s=0;s<t.length;s++){if(!r||!r.hasOwnProperty(t[s]))return!1;r=r[t[s]]}return!0},isEmptyObject:function(r){for(var t in r)if(r.hasOwnProperty(t))return!1;return!0},initParams:function(r){var t={};return t.lightbox=!!helpers.checkNested(r,"data","modules","lightbox")&&r.data.modules.lightbox,t.movil=!helpers.checkNested(r,"data","modules","movil")||r.data.modules.movil,t},isExternal:function(r){return"true"==r},bind:function(r,t,s){return r.addEventListener?r.addEventListener(t,s,!1):r.attachEvent("on"+t,s)},getIpClient:function(r){if(window.XMLHttpRequest)var t=new XMLHttpRequest;else t=new ActiveXObject("Microsoft.XMLHTTP");t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(this.responseText.toLowerCase().indexOf("{")>=0?r(JSON.parse(this.responseText).data):r("0.0.0.0"))},t.open("GET","https://apify-private.epayco.co/getip",!0),t.send()},generateGuid:function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},isSession:function(){return(void 0===localStorage.getItem("keySessionPay")?localStorage.setItem("keySessionPay",helpers.generateGuid()):localStorage.getItem("keySessionPay"))||helpers.generateGuid()},getEndPoint:function(r){return r?"https://msecure.epayco.co":"https://secure.epayco.co"},parseOptions:function(r){var t={};for(var s in r)r.hasOwnProperty(s)&&(t[s]="epaycoConfirmation"===s||"epaycoResponse"===s?this.encodeUri(r[s]):r[s]);return t},generateTransactionId:function(r,t){r=this.parseOptions(r);var s=this.getEndPoint()+`/create/transaction/${r.epaycoKey}/${this.isSession()}`,m=new XMLHttpRequest;m.open("POST",s),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var f=JSON.parse(this.responseText);f?t(null,f):t("error",null)}},m.send("fname="+this.encodeUri(JSON.stringify(r)))},generateStandardCheckout:function(r){var t=this;helpers.getIpClient(function(s){r.epaycoIp=s,t.generateTransactionId(r,function(m,f){m?console.log("Error generando el checkout contacte con soporte"):window.location=t.getEndPoint()+`/payment/methods?transaction=${f.data.id_session}`})})},generateMovilCheckout:function(r){var t=this;helpers.getIpClient(function(s){r.epaycoIp=s,t.generateTransactionId(r,function(m,f){m?console.log("Error generando el checkout contacte con soporte"):window.location=t.getEndPoint(!0)+"/v1/transaction/payment.html?transaction="+f.data.id_session})})},generateUrlOnePageCheckout:function(r,t){var s=this;helpers.getIpClient(function(m){r.epaycoIp=m,s.generateTransactionId(r,function(f,p){f?console.log("Error al validar la llave del cliente, por favor compruebe"):t(helpers.getEndPoint()+`/czgvMpNW3YEaaFhLee?transaction=${p.data.id_session}`)})})},generateWithOutCheckout:function(r){this.generateUrlOnePageCheckout(r,function(t){window.location=t})},generateOnePageCheckout:function(r,t){Iframe(r,!0,t)},validateForEncrypt:function(r,t){var s,m={epaycoName:{required:!0,type:"string"},epaycoResponse:{format:"url"},epaycoConfirmation:{format:"url"},epaycoExtra1:{format:"string"},epaycoExtra2:{format:"string"},epaycoExtra3:{format:"string"},epaycoExtra4:{format:"string"},epaycoExtra5:{format:"string"},epaycoExtra6:{format:"string"},epaycoExtra7:{format:"string"},epaycoExtra8:{format:"string"},epaycoExtra9:{format:"string"},epaycoExtra10:{format:"string"}}[r];return m&&(t.replace(/\s/g,"").length>0||(t=""),typeof t===m.type&&"string"===m.type&&(t=String(t)),m.format&&"url"===m.format&&(s=t,s=String(s),t=encodeURIComponent(s))),t},selectFields:function(r){var t={},s=["epaycoName","epaycoAmount","epaycoTax","epaycoTaxBase","epaycoCurrency","epaycoCountry","epaycoInvoice","epaycoExtra1","epaycoExtra2","epaycoExtra3","epaycoExtra4","epaycoExtra5","epaycoExtra6","epaycoExtra7","epaycoExtra8","epaycoExtra9","epaycoExtra10"];return Object.keys(r).map(m=>{s.includes(m)&&(t[m]="epaycoCurrency"===m?r[m].toUpperCase():r[m])}),t},encryptObjectSiganature:function(r){var t=new Crypt;r=this.selectFields(r);try{r=JSON.stringify(r)}catch(m){throw`Error creando la firma ${m}`}const s=t.encrypt("-----BEGIN PUBLIC KEY----- MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA1Ijtd6/YfaLpfK+VSjH2 DYAfsW5EtmYDPAVAM6cIVN7+P6AIz13N5atkKR8Z6rMfErxAU6E1pH6sT2jgVL/O uArJGXROPyNYqPlILon/kpp2Azw44ILo53YW07FoQM/KpG26tY/myHGyykaegDN2 v2KFexsX5oHW0TYl4NbDqRLBCcedaXwWb+gdF1jb/J6kqTdgTxxuABsQC5y1xXw9 9uX/O+JI2SdYmUVg7qq5NQub/9fLiduTxyFJRZRxWvsAyqSV7PquZ6x4r45h6y3D nX/muBIKSyU5T0Om/M93SLzMylsxJKn8T4i6c9BL370J1pV9HAvpv/rbMMeosV/Q thfvjBVSk4yciuIwa5cr+WQx4IZ34v2rA4gazrw2x2U5u6APkyL9DnMCRc48jEo8 lxpEVwdUidhfvC/dDb4xWqj8K2eKxAnzlsnqr8VK6JwHudhyWL5U4ZRRq/JGYmrM WK0KCzBprI5aYjSAmxiqcuHC6+Zegt6+cG3IaT2DplcU8SyK9JqfnKv2Efm/ddid PsolqlR6S5vu+no5vc6OFBpv6OLtvVkWpqOLePapX+UKdNRhKUrTWFSC5a7+nDzS we3An9rHOtuS/SGSr4EjRchMCcugM5+2VpSUeSl7xmL/n1pUTzN0d694/H91ahoj af1z1U704ftu2tva8t2jPu0CAwEAAQ== -----END PUBLIC KEY-----",r);return btoa(s)},parseParamsForScript:function(r){let t={};try{Object.keys(r).map(s=>{if(r.hasOwnProperty(s)){const m=s.trim();let f=null;f="object"==typeof r[s]?r[s]:String(r[s]),t[m]=this.validateForEncrypt(m,f)}})}catch(s){throw`[FormatParamsPaycoHandler]: ${s.message}`}if(!(t.hasOwnProperty("epaycoName")&&t.hasOwnProperty("epaycoAmount")&&t.hasOwnProperty("epaycoCurrency")&&t.hasOwnProperty("epaycoCountry")))throw"Verifique si los parametros obligatorios son contenidos";return this.encryptObjectSiganature(t)},onlineCheckout:function(r,t,s){s=s||this.initParams({}),this.isMobile()&&s.movil?this.generateMovilCheckout(t):this.isExternal(t.epaycoExternal)?this.generateStandardCheckout(t):(this.loadStyle(),s.lightbox?this.generateWithOutCheckout(t):this.generateOnePageCheckout(t))},encodeUri:function(r){return encodeURIComponent(r)},b64EncodeUnicode:function(r){return btoa(encodeURIComponent(r).replace(/%([0-9A-F]{2})/g,function(t,s){return String.fromCharCode(parseInt(s,16))}))},removeAccent:function(r){var t,s,m=(r=r.split("")).length;for(t=0;t<m;t++)-1!==(s="\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5\xdf\xd2\xd3\xd4\xd5\xd5\xd6\xd8\xf2\xf3\xf4\xf5\xf6\xf8\xc8\xc9\xca\xcb\xe8\xe9\xea\xeb\xf0\xc7\xe7\xd0\xcc\xcd\xce\xcf\xec\xed\xee\xef\xd9\xda\xdb\xdc\xf9\xfa\xfb\xfc\xd1\xf1\u0160\u0161\u0178\xff\xfd\u017d\u017e".indexOf(r[t]))&&(r[t]="AAAAAAaaaaaaBOOOOOOOooooooEEEEeeeeeCcDIIIIiiiiUUUUuuuuNnSsYyyZz"[s]);return r.join("")},generateSignature:function(r,t,s){var m=t?r:r.dataset,f={};for(var p in m)if(m.hasOwnProperty(p)){const n=["epaycoConfig","epaycoTax","epaycoBaseTax","epaycoMethodsDisable","epaycoExtra9","epaycoExtra10"];f[p]=["epaycoConfirmation","epaycoResponse"].includes(p)?this.parseUrlSignature(m[p]):n.includes(p)?m[p]:this.parseTextSignature(m[p])}s(void 0,btoa(this.removeAccent(JSON.stringify(f))))},parseTextSignature:function(r){return""!==(r=String(r))?r.replace(/[|;$"<>()+,]/g,"").trim():r},parseUrlSignature:function(r){return r=String(r),encodeURIComponent(r)},loadStyle:function(){var r=document.createElement("style");r.innerHTML=".l034d,.l034d:after{border-radius:50%;width:8em;height:8em}.l034d{margin:8rem auto;font-size:10px;position:relative;text-indent:-9999em;border-top:0.5em solid rgba(0,0,0,0.2);border-right:0.5em solid rgba(0,0,0,0.2);border-bottom:0.5em solid rgba(0,0,0,0.2);border-left:0.5em solid #999;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-animation:l034d88 1.1s infinite linear;animation:l034d88 1.1s infinite linear}@-webkit-keyframes l034d88{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes l034d88{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}",document.head.appendChild(r)},generateEpaycoLogo:function(){var r=document.createElement("div");r.style.width="400px",r.style.margin="0.6rem 0",r.style.textAlign="center";var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("class","bIl"),t.setAttribute("viewBox","0 0 194 19"),t.setAttribute("width","194"),t.setAttribute("height","19"),t.setAttribute("fill","none");var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("opacity","0.8"),s.setAttribute("fill","white"),s.setAttribute("d","M24.644 9.8252V14H23.2378V3.33594H27.1709C28.3379 3.33594 29.251 3.63379 29.9102 4.22949C30.5742 4.8252 30.9062 5.61377 30.9062 6.59521C30.9062 7.63037 30.5815 8.42871 29.9321 8.99023C29.2876 9.54688 28.3623 9.8252 27.1562 9.8252H24.644ZM24.644 8.67529H27.1709C27.9229 8.67529 28.499 8.49951 28.8994 8.14795C29.2998 7.7915 29.5 7.27881 29.5 6.60986C29.5 5.9751 29.2998 5.46729 28.8994 5.08643C28.499 4.70557 27.9497 4.50781 27.2515 4.49316H24.644V8.67529ZM37.293 14C37.2148 13.8438 37.1514 13.5654 37.1025 13.165C36.4727 13.8193 35.7207 14.1465 34.8467 14.1465C34.0654 14.1465 33.4233 13.9268 32.9204 13.4873C32.4224 13.043 32.1733 12.4814 32.1733 11.8027C32.1733 10.9775 32.4858 10.3379 33.1108 9.88379C33.7407 9.4248 34.6245 9.19531 35.7622 9.19531H37.0806V8.57275C37.0806 8.09912 36.939 7.72314 36.6558 7.44482C36.3726 7.16162 35.9551 7.02002 35.4033 7.02002C34.9199 7.02002 34.5146 7.14209 34.1875 7.38623C33.8604 7.63037 33.6968 7.92578 33.6968 8.27246H32.3345C32.3345 7.87695 32.4736 7.49609 32.752 7.12988C33.0352 6.75879 33.416 6.46582 33.8945 6.25098C34.3779 6.03613 34.9077 5.92871 35.4839 5.92871C36.397 5.92871 37.1123 6.1582 37.6299 6.61719C38.1475 7.07129 38.416 7.69873 38.4355 8.49951V12.147C38.4355 12.8745 38.5283 13.4531 38.7139 13.8828V14H37.293ZM35.0444 12.9673C35.4692 12.9673 35.8721 12.8574 36.2529 12.6377C36.6338 12.418 36.9097 12.1323 37.0806 11.7808V10.1548H36.0186C34.3584 10.1548 33.5283 10.6406 33.5283 11.6123C33.5283 12.0371 33.6699 12.3691 33.9531 12.6084C34.2363 12.8477 34.6001 12.9673 35.0444 12.9673ZM40.2373 9.97168C40.2373 8.73633 40.5229 7.75488 41.0942 7.02734C41.6655 6.29492 42.4224 5.92871 43.3647 5.92871C44.3315 5.92871 45.0859 6.27051 45.6279 6.9541L45.6938 6.0752H46.9316V13.8096C46.9316 14.835 46.6265 15.6431 46.0161 16.2339C45.4106 16.8247 44.5952 17.1201 43.5698 17.1201C42.9985 17.1201 42.4395 16.998 41.8926 16.7539C41.3457 16.5098 40.9282 16.1753 40.6401 15.7505L41.3433 14.9375C41.9243 15.6553 42.6348 16.0142 43.4746 16.0142C44.1338 16.0142 44.6465 15.8286 45.0127 15.4575C45.3838 15.0864 45.5693 14.564 45.5693 13.8901V13.209C45.0273 13.834 44.2876 14.1465 43.3501 14.1465C42.4224 14.1465 41.6704 13.7729 41.0942 13.0259C40.5229 12.2788 40.2373 11.2607 40.2373 9.97168ZM41.5996 10.1255C41.5996 11.019 41.7827 11.7222 42.1489 12.2349C42.5151 12.7427 43.0278 12.9966 43.687 12.9966C44.5415 12.9966 45.1689 12.6084 45.5693 11.832V8.21387C45.1543 7.45703 44.5317 7.07861 43.7017 7.07861C43.0425 7.07861 42.5273 7.33496 42.1562 7.84766C41.7852 8.36035 41.5996 9.11963 41.5996 10.1255ZM48.6235 9.96436C48.6235 9.18799 48.7749 8.48975 49.0776 7.86963C49.3853 7.24951 49.8101 6.771 50.3521 6.43408C50.8989 6.09717 51.5215 5.92871 52.2197 5.92871C53.2988 5.92871 54.1704 6.30225 54.8345 7.04932C55.5034 7.79639 55.8379 8.79004 55.8379 10.0303V10.1255C55.8379 10.897 55.689 11.5903 55.3911 12.2056C55.0981 12.8159 54.6758 13.292 54.124 13.6338C53.5771 13.9756 52.9473 14.1465 52.2344 14.1465C51.1602 14.1465 50.2886 13.7729 49.6196 13.0259C48.9556 12.2788 48.6235 11.29 48.6235 10.0596V9.96436ZM49.9858 10.1255C49.9858 11.0044 50.1885 11.71 50.5938 12.2422C51.0039 12.7744 51.5508 13.0405 52.2344 13.0405C52.9229 13.0405 53.4697 12.772 53.875 12.2349C54.2803 11.6929 54.4829 10.936 54.4829 9.96436C54.4829 9.09521 54.2754 8.39209 53.8604 7.85498C53.4502 7.31299 52.9033 7.04199 52.2197 7.04199C51.5508 7.04199 51.0112 7.30811 50.6011 7.84033C50.1909 8.37256 49.9858 9.13428 49.9858 10.1255ZM65.8721 11.8979C65.8721 11.5317 65.7329 11.2485 65.4546 11.0483C65.1812 10.8433 64.7002 10.6675 64.0117 10.521C63.3281 10.3745 62.7837 10.1987 62.3784 9.99365C61.978 9.78857 61.6802 9.54443 61.4849 9.26123C61.2944 8.97803 61.1992 8.64111 61.1992 8.25049C61.1992 7.60107 61.4727 7.05176 62.0195 6.60254C62.5713 6.15332 63.2744 5.92871 64.1289 5.92871C65.0273 5.92871 65.7549 6.16064 66.3115 6.62451C66.873 7.08838 67.1538 7.68164 67.1538 8.4043H65.7915C65.7915 8.0332 65.6328 7.71338 65.3154 7.44482C65.0029 7.17627 64.6074 7.04199 64.1289 7.04199C63.6357 7.04199 63.25 7.14941 62.9717 7.36426C62.6934 7.5791 62.5542 7.85986 62.5542 8.20654C62.5542 8.53369 62.6836 8.78027 62.9424 8.94629C63.2012 9.1123 63.6675 9.271 64.3413 9.42236C65.02 9.57373 65.5693 9.75439 65.9893 9.96436C66.4092 10.1743 66.7192 10.4282 66.9194 10.7261C67.1245 11.019 67.2271 11.3779 67.2271 11.8027C67.2271 12.5107 66.9438 13.0796 66.3774 13.5093C65.811 13.9341 65.0762 14.1465 64.1729 14.1465C63.5381 14.1465 62.9766 14.0342 62.4883 13.8096C62 13.585 61.6167 13.2725 61.3384 12.8721C61.0649 12.4668 60.9282 12.0298 60.9282 11.561H62.2832C62.3076 12.0151 62.4883 12.3765 62.8252 12.645C63.167 12.9087 63.6162 13.0405 64.1729 13.0405C64.6855 13.0405 65.0957 12.938 65.4033 12.7329C65.7158 12.5229 65.8721 12.2446 65.8721 11.8979ZM72.2808 14.1465C71.2065 14.1465 70.3325 13.7949 69.6587 13.0918C68.9849 12.3838 68.6479 11.439 68.6479 10.2573V10.0083C68.6479 9.22217 68.7969 8.52148 69.0947 7.90625C69.3975 7.28613 69.8174 6.80273 70.3545 6.45605C70.8965 6.10449 71.4824 5.92871 72.1123 5.92871C73.1426 5.92871 73.9434 6.26807 74.5146 6.94678C75.0859 7.62549 75.3716 8.59717 75.3716 9.86182V10.4258H70.0029C70.0225 11.207 70.2495 11.8394 70.6841 12.3228C71.1235 12.8013 71.6802 13.0405 72.354 13.0405C72.8325 13.0405 73.2378 12.9429 73.5698 12.7476C73.9019 12.5522 74.1924 12.2935 74.4414 11.9712L75.269 12.6157C74.605 13.6362 73.6089 14.1465 72.2808 14.1465ZM72.1123 7.04199C71.5654 7.04199 71.1064 7.24219 70.7354 7.64258C70.3643 8.03809 70.1348 8.59473 70.0469 9.3125H74.0166V9.20996C73.9775 8.52148 73.792 7.98926 73.46 7.61328C73.1279 7.23242 72.6787 7.04199 72.1123 7.04199ZM76.624 9.97168C76.624 8.73633 76.9097 7.75488 77.481 7.02734C78.0522 6.29492 78.8091 5.92871 79.7515 5.92871C80.7183 5.92871 81.4727 6.27051 82.0146 6.9541L82.0806 6.0752H83.3184V13.8096C83.3184 14.835 83.0132 15.6431 82.4028 16.2339C81.7974 16.8247 80.9819 17.1201 79.9565 17.1201C79.3853 17.1201 78.8262 16.998 78.2793 16.7539C77.7324 16.5098 77.3149 16.1753 77.0269 15.7505L77.73 14.9375C78.311 15.6553 79.0215 16.0142 79.8613 16.0142C80.5205 16.0142 81.0332 15.8286 81.3994 15.4575C81.7705 15.0864 81.9561 14.564 81.9561 13.8901V13.209C81.4141 13.834 80.6743 14.1465 79.7368 14.1465C78.8091 14.1465 78.0571 13.7729 77.481 13.0259C76.9097 12.2788 76.624 11.2607 76.624 9.97168ZM77.9863 10.1255C77.9863 11.019 78.1694 11.7222 78.5356 12.2349C78.9019 12.7427 79.4146 12.9966 80.0737 12.9966C80.9282 12.9966 81.5557 12.6084 81.9561 11.832V8.21387C81.541 7.45703 80.9185 7.07861 80.0884 7.07861C79.4292 7.07861 78.9141 7.33496 78.543 7.84766C78.1719 8.36035 77.9863 9.11963 77.9863 10.1255ZM90.2617 13.2163C89.7344 13.8364 88.9604 14.1465 87.9399 14.1465C87.0952 14.1465 86.4507 13.9023 86.0063 13.4141C85.5669 12.9209 85.3447 12.1934 85.3398 11.2314V6.0752H86.6948V11.1948C86.6948 12.396 87.1831 12.9966 88.1597 12.9966C89.1948 12.9966 89.8833 12.6108 90.2251 11.8394V6.0752H91.5801V14H90.291L90.2617 13.2163ZM97.4761 7.29102C97.271 7.25684 97.0488 7.23975 96.8096 7.23975C95.9209 7.23975 95.3179 7.61816 95.0005 8.375V14H93.6455V6.0752H94.9639L94.9858 6.99072C95.4302 6.28271 96.0601 5.92871 96.8755 5.92871C97.1392 5.92871 97.3394 5.96289 97.4761 6.03125V7.29102ZM98.2231 9.96436C98.2231 9.18799 98.3745 8.48975 98.6772 7.86963C98.9849 7.24951 99.4097 6.771 99.9517 6.43408C100.499 6.09717 101.121 5.92871 101.819 5.92871C102.898 5.92871 103.77 6.30225 104.434 7.04932C105.103 7.79639 105.438 8.79004 105.438 10.0303V10.1255C105.438 10.897 105.289 11.5903 104.991 12.2056C104.698 12.8159 104.275 13.292 103.724 13.6338C103.177 13.9756 102.547 14.1465 101.834 14.1465C100.76 14.1465 99.8882 13.7729 99.2192 13.0259C98.5552 12.2788 98.2231 11.29 98.2231 10.0596V9.96436ZM99.5854 10.1255C99.5854 11.0044 99.7881 11.71 100.193 12.2422C100.604 12.7744 101.15 13.0405 101.834 13.0405C102.522 13.0405 103.069 12.772 103.475 12.2349C103.88 11.6929 104.083 10.936 104.083 9.96436C104.083 9.09521 103.875 8.39209 103.46 7.85498C103.05 7.31299 102.503 7.04199 101.819 7.04199C101.15 7.04199 100.611 7.30811 100.201 7.84033C99.7905 8.37256 99.5854 9.13428 99.5854 10.1255ZM117.552 10.1255C117.552 11.3315 117.276 12.3032 116.724 13.0405C116.172 13.7778 115.425 14.1465 114.483 14.1465C113.521 14.1465 112.764 13.8413 112.212 13.231V17.0469H110.857V6.0752H112.095L112.161 6.9541C112.713 6.27051 113.479 5.92871 114.461 5.92871C115.413 5.92871 116.165 6.2876 116.717 7.00537C117.273 7.72314 117.552 8.72168 117.552 10.001V10.1255ZM116.197 9.97168C116.197 9.07812 116.006 8.37256 115.625 7.85498C115.245 7.3374 114.722 7.07861 114.058 7.07861C113.238 7.07861 112.623 7.44238 112.212 8.16992V11.9565C112.618 12.6792 113.238 13.0405 114.073 13.0405C114.722 13.0405 115.237 12.7842 115.618 12.2715C116.004 11.7539 116.197 10.9873 116.197 9.97168ZM118.921 9.96436C118.921 9.18799 119.073 8.48975 119.375 7.86963C119.683 7.24951 120.108 6.771 120.65 6.43408C121.197 6.09717 121.819 5.92871 122.518 5.92871C123.597 5.92871 124.468 6.30225 125.132 7.04932C125.801 7.79639 126.136 8.79004 126.136 10.0303V10.1255C126.136 10.897 125.987 11.5903 125.689 12.2056C125.396 12.8159 124.974 13.292 124.422 13.6338C123.875 13.9756 123.245 14.1465 122.532 14.1465C121.458 14.1465 120.586 13.7729 119.917 13.0259C119.253 12.2788 118.921 11.29 118.921 10.0596V9.96436ZM120.284 10.1255C120.284 11.0044 120.486 11.71 120.892 12.2422C121.302 12.7744 121.849 13.0405 122.532 13.0405C123.221 13.0405 123.768 12.772 124.173 12.2349C124.578 11.6929 124.781 10.936 124.781 9.96436C124.781 9.09521 124.573 8.39209 124.158 7.85498C123.748 7.31299 123.201 7.04199 122.518 7.04199C121.849 7.04199 121.309 7.30811 120.899 7.84033C120.489 8.37256 120.284 9.13428 120.284 10.1255ZM131.666 7.29102C131.46 7.25684 131.238 7.23975 130.999 7.23975C130.11 7.23975 129.507 7.61816 129.19 8.375V14H127.835V6.0752H129.153L129.175 6.99072C129.62 6.28271 130.25 5.92871 131.065 5.92871C131.329 5.92871 131.529 5.96289 131.666 6.03125V7.29102Z"),t.appendChild(s);var m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("fill","#2ECC71"),m.setAttribute("d","M12.0833 7.33337H11.6666V5.66671C11.6666 3.82837 10.1716 2.33337 8.33325 2.33337C6.49492 2.33337 4.99992 3.82837 4.99992 5.66671V7.33337H4.58325C3.89436 7.33337 3.33325 7.89393 3.33325 8.58337V14.4167C3.33325 15.1062 3.89436 15.6667 4.58325 15.6667H12.0833C12.7721 15.6667 13.3333 15.1062 13.3333 14.4167V8.58337C13.3333 7.89393 12.7721 7.33337 12.0833 7.33337ZM6.11103 5.66671C6.11103 4.44115 7.1077 3.44449 8.33325 3.44449C9.55881 3.44449 10.5555 4.44115 10.5555 5.66671V7.33337H6.11103V5.66671Z"),t.appendChild(m);var f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("fill","#FF6720"),f.setAttribute("d","M147.139 12.0616C147.121 12.1471 147.104 12.2334 147.087 12.3188C146.651 12.3921 146.214 12.4409 145.776 12.4679C146.241 12.3415 146.695 12.2081 147.139 12.0616Z"),t.appendChild(f);var p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("fill","#FF6720"),p.setAttribute("d","M156.881 3.66162C155.634 7.12272 153.067 10.2473 149.604 11.6204C149.604 11.6204 149.743 10.9343 149.743 10.9343C152.555 9.31795 154.474 6.42353 155.249 3.31812C155.523 3.16817 156.271 2.74011 156.271 2.74011C156.271 2.74011 156.666 3.32771 156.881 3.66162Z"),t.appendChild(p);var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("fill","white"),n.setAttribute("d","M150.981 4.85079C151.006 4.72525 151.045 4.64679 151.187 4.63633C151.794 4.58838 152.4 4.48986 153.005 4.49509C153.753 4.50032 154.247 5.02952 154.345 5.83158C154.73 5.02516 155.032 4.18211 155.249 3.31815C155.239 3.3103 155.228 3.30332 155.218 3.29635C154.62 2.88747 153.938 2.77762 153.237 2.74798C151.805 2.68521 150.418 2.96419 149.048 3.34343C148.975 3.36435 148.891 3.47594 148.874 3.55877C148.753 4.14986 146.611 14.6709 146.611 14.6709H148.214C148.665 14.6709 149.052 14.3222 149.143 13.8741C149.144 13.8758 150.877 5.36778 150.981 4.85079Z"),t.appendChild(n);var v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("fill","white"),v.setAttribute("d","M156.41 4.81763C155.133 7.60656 152.99 10.0572 150.208 11.3597C154.714 12.6509 157.68 8.20375 156.41 4.81763Z"),t.appendChild(v);var d=document.createElementNS("http://www.w3.org/2000/svg","path");d.setAttribute("fill","white"),d.setAttribute("d","M146.053 7.03646C142.78 3.86567 137.201 7.48457 138.096 11.7966C138.652 14.4791 141.547 15.0746 143.89 14.4416C145.377 14.0406 145.2 12.5943 145.2 12.5943C143.335 13.0267 139.786 12.6379 140.077 11.209C141.512 11.6126 143.698 11.7085 145.233 10.9178C147.235 9.88554 146.893 7.98324 146.053 7.03646ZM144.681 8.84373C144.181 9.87857 141.324 9.86985 140.295 9.56733C140.941 8.0992 142.637 7.22215 144.192 7.8577C144.662 8.05037 144.87 8.44792 144.681 8.84373Z"),t.appendChild(d);var u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("fill","white"),u.setAttribute("d","M166.438 6.49759C165.052 6.04163 163.39 5.8324 162.172 5.8324C158.951 5.8324 156.924 8.7399 157.019 11.2908C157.055 12.2699 157.383 14.4921 160.333 14.7476C161.152 14.8182 161.933 14.7127 162.618 14.2053C162.623 14.2009 162.671 14.1582 162.659 14.2192C162.635 14.3613 162.58 14.6735 162.58 14.6735C162.58 14.6735 164.118 14.6735 164.848 14.6735C164.985 14.6735 165.004 14.5784 165.024 14.4817C165.548 11.9098 166.076 9.34319 166.594 6.7696C166.627 6.60744 166.595 6.54816 166.438 6.49759ZM163.938 8.03024C163.662 9.35627 163.394 10.684 163.115 12.0109C163.091 12.1251 163.031 12.2289 162.944 12.3065C162.282 12.8976 161.51 13.092 160.648 12.8932C158.994 12.5122 159.265 10.161 159.844 9.02672C160.372 7.99449 161.565 7.41125 162.779 7.56905C163.995 7.72598 163.97 7.87593 163.938 8.03024Z"),t.appendChild(u);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("fill","white"),o.setAttribute("d","M192.993 8.93518C192.824 6.9056 191.226 5.8324 189.308 5.8324C185.286 5.8324 183.958 9.20196 184.08 11.5436C184.198 13.7921 186.181 14.8391 188.179 14.6517C190.035 14.5409 191.429 13.6909 192.292 12.0258C192.791 11.0607 193.114 10.0433 192.993 8.93518ZM187.447 12.7485C185.676 12.3832 186.276 10.0354 186.646 9.34319C187.538 7.67105 188.753 7.59433 189.444 7.70418C190.357 7.84803 190.876 8.50189 190.824 9.60648C190.747 11.2786 189.506 13.1731 187.447 12.7485Z"),t.appendChild(o);var g=document.createElementNS("http://www.w3.org/2000/svg","path");g.setAttribute("fill","white"),g.setAttribute("d","M166.099 18.4589L166.399 16.9838C166.444 16.8112 166.606 16.6882 166.785 16.683C167.684 16.6577 167.991 16.5008 168.441 16.0108C168.784 15.5732 169.044 15.2218 169.333 14.8173C169.371 14.7641 169.375 14.6691 169.361 14.5994C168.874 12.1208 167.645 5.83242 167.645 5.83242C167.645 5.83242 169.885 5.81236 170.026 6.71382C170.296 8.44001 170.936 11.9299 170.966 12.0676C171.046 11.9308 173.14 8.32493 174.12 6.59612C174.601 5.74785 176.432 5.83242 177.038 5.83242C175.232 8.85848 171.725 14.7267 171.178 15.6386C169.757 18.0047 168.507 18.4772 167.198 18.4606C166.841 18.4563 166.099 18.4589 166.099 18.4589Z"),t.appendChild(g);var C=document.createElementNS("http://www.w3.org/2000/svg","path");return C.setAttribute("fill","white"),C.setAttribute("d","M182.692 12.2351C182.566 12.8567 182.335 13.9875 182.327 14.0276C182.314 14.0938 182.286 14.167 182.199 14.2002C180.989 14.6535 179.698 14.8671 178.524 14.4495C174.723 13.0999 175.743 6.97546 179.713 6.00077C181.662 5.52214 183.606 6.21524 183.701 6.24488C183.811 6.27975 183.88 6.39134 183.858 6.50468C183.789 6.84556 183.571 7.92486 183.561 7.96409C182.461 7.60752 181.306 7.34946 180.182 7.74527C177.95 8.53339 177.465 12.3746 179.685 12.8245C180.749 13.0407 181.723 12.6623 182.692 12.2351Z"),t.appendChild(C),r.appendChild(t),r},generateContainer:function(){var r=document.createElement("div");return r.id="ard3",r.style.boxShadow="0 1px 10px #0000004d",r.style.borderRadius="5px",r.style.backgroundColor="rgba(255,255,255,1)",r.style.width="400px",r.style.height="340px",r},generateSpinnerBox:function(){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 448 512"),r.setAttribute("width","20"),r.setAttribute("height","26"),r.setAttribute("fill","none");var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("fill","#808080"),t.setAttribute("d","M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"),r.appendChild(t),r.style.cssText="position:absolute;left:50%;top:50%;transform: translate(-50%, -50%);";var s=document.createElement("div");s.classList.add("l034d");var m=document.createElement("div");return m.id="spX43",m.style.cssText="position:relative;transition: visibility 0.5s, opacity 0.5s linear;",m.appendChild(s),m.appendChild(r),m},generateOverlay:function(r){var t="display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center",s=document.createElement("div");s.id="fb4xtw",s.style.cssText=t;var m=this.generateContainer(),f=this.generateSpinnerBox(),p=this.generateEpaycoLogo(),n=document.createElement("div");n.id="oKvf3",n.style.cssText=t,n.style.width="100%",n.style.height="100%",n.style.position="fixed",n.style.backgroundColor="rgba(0,0,0,0.7)",n.style.zIndex="99999",n.style.top="0",n.style.left="0",m.appendChild(f),s.appendChild(m),s.appendChild(p),n.appendChild(s),document.body.appendChild(n)}},Z.exports=helpers}).call(this)}}),EpaycoCheckout.require.define({"outer/controllers/iframe":function(D,Q,Z){(function(){helpers=Q("lib/helpers"),_ref=Q("outer/lib/utils"),insertAfter=_ref.insertAfter,append=_ref.append;var t=function(f){var p=helpers.isSession();if("onLoadOnPage"===f.data.event){if(document.getElementById("fb4xtw")){document.getElementById("fb4xtw").remove();var n=document.getElementById("checkout-epayco");n.contentWindow.postMessage(p,"*"),n.style.display="block",window.postMessage({event:"onLoadCheckout",response:f.data.response},"*")}}else"handleCloseModal"===f.data.event&&(s(),window.postMessage({event:"onCloseModal",response:{closed:!0}},"*"))},s=function(){const f=document.getElementsByClassName("epayco-button-render");for(let p=0;p<f.length;p++)f[p].setAttribute("style","padding: 0; background: none; border: none; cursor: pointer;");"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),document.getElementById("oKvf3")&&document.getElementById("oKvf3").remove()},m=function(f,p,n){var v=p?f:f.dataset;return v&&(helpers.generateOverlay(document.body),helpers.generateUrlOnePageCheckout(v,function(d){new function(u){var o,g;this.$el=document.createElement("iframe"),this.$el.closed=(o=this.closed,g=this,function(){return o.apply(g,arguments)}),this.$el.setAttribute("frameBorder","0"),this.$el.setAttribute("name","onePage"),this.$el.setAttribute("allowtransparency","true"),this.$el.scrolling="no",this.$el.setAttribute("id","checkout-epayco"),this.$el.style.width="100%",this.$el.style.height="100%",this.$el.style.display="none",this.$el.src=d,window.addEventListener?window.addEventListener("message",function(f){t(f)},!1):window.attachEvent&&window.attachEvent("onmessage",function(f){t(f)}),append(document.getElementById("oKvf3"),this.$el)}(v)})),m};Z.exports=m}).call(this)}}),EpaycoCheckout.require.define({"outer/controllers/render":function(D,Q,Z){(function(){const r=Q("lib/helpers");Z.exports={load:function(s,m){r.onlineCheckout(null,s,m)}}}).call(this)}}),function(){var D=D||this.EpaycoCheckout.require;Button=D("outer/controllers/button"),helpers=D("lib/helpers"),Button.load(this.EpaycoCheckout.__app)}.call(this),function(){var D,Q;window.ePayco||(window.ePayco={}),ePayco.checkout={},ePayco.checkout.configure=function(Z){if(void 0===Z.key||void 0===Z.test)throw"Los parametros key o test son indefinidos o nulos";return D=Z.key,Q=Z.test,this},ePayco.checkout.open=function(Z,r){r=helpers.isEmptyObject(r)?{}:r;var t=function(n){return n.charAt(0).toUpperCase()+n.slice(1)},s=function(n){for(var v=n.split("_"),d="",u=0;u<v.length;u+=1)d+=t(v[u]);return"epayco"+d},m={};for(var f in Z)Z.hasOwnProperty(f)&&(m[s(f).trim()]=Z[f],["confirmation","response"].includes(f)&&(m[s(f).trim()]=Z[f]));window.addEventListener("message",function(n){"onTokenReceived"===(n="object"==typeof n?n:{}).data.event&&ePayco.checkout.onTokenReceived(n.data.token)},!1),m.epaycoConfig=JSON.stringify(r),m.epaycoKey=D,m.epaycoTest="true"===String(Q)?"true":"false";var p=p||EpaycoCheckout.require;return Render=p("outer/controllers/render"),Render.load(m,helpers.initParams(r)),this},ePayco.checkout.onCreated=function(Z){return window.addEventListener("message",function(r){"object"==typeof r&&"onLoadCheckout"===r.data.event&&Z(r.data.response)},!1),this},ePayco.checkout.onErrors=function(){},ePayco.checkout.onResponse=function(Z){return window.addEventListener("message",function(r){"object"==typeof r&&"onResponse"===r.data.event&&Z(r.data.response)},!1),this},ePayco.checkout.onClosed=function(Z){return window.addEventListener("message",function(r){"object"==typeof r&&"onCloseModal"===r.data.event&&Z(r.data.response)},!1),this}}.call(this),function(){var D=D||this.EpaycoCheckout.require;Button=D("outer/controllers/button"),helpers=D("lib/helpers");const Q=(r="")=>{const t=r.split("_");let s="";for(var m=0;m<t.length;m+=1)s+=Z(t[m]);return"epayco"+s},Z=(r="")=>r.charAt(0).toUpperCase()+r.slice(1);window.onload=function(){for(var r in window)if(!/webkitStorageInfo|webkitIndexedDB|onmozfullscreenerror|onmozfullscreenchange/.test(r)&&window[r]){var t=window[r],s=r;if("object"==typeof t&&null!==t&&"data"===r&&t.hasOwnProperty("name")&&t.hasOwnProperty("amount")&&t.hasOwnProperty("description")&&t.hasOwnProperty("currency")&&void 0===t.window){let m={};Object.keys(t).map(f=>{const p=Q(f).trim();m[p]=t[f]}),t.signature=helpers.parseParamsForScript(m),window[s]=t}}}()}.call(this);var handler=ePayco.checkout.configure({key:"36b68cfec3da6f59f9faf598e993973b",test:!0}),data={name:"Pijamas",description:"Pijamas",invoice:"127332224",currency:"cop",amount:"12000",tax_base:"0",tax:"0",country:"co",lang:"en",external:"false",extra1:"extra1",extra2:"extra2",extra3:"extra3",confirmation:"http://localhost:4200/response",response:"http://localhost:4200/response",name_billing:"Andres Perez",address_billing:"Carrera 19 numero 14 91",type_doc_billing:"cc",mobilephone_billing:"3050000000",number_doc_billing:"0000000",methodsDisable:[]};function execute(D,Q){data.amount=D,data.invoice=Q,handler.open(data)}!function(D,Q){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Q(require("@popperjs/core")):"function"==typeof define&&define.amd?define(["@popperjs/core"],Q):(D="undefined"!=typeof globalThis?globalThis:D||self).bootstrap=Q(D.Popper)}(this,function(D){"use strict";function Q(H){if(H&&H.__esModule)return H;const c=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(H)for(const B in H)if("default"!==B){const F=Object.getOwnPropertyDescriptor(H,B);Object.defineProperty(c,B,F.get?F:{enumerable:!0,get:()=>H[B]})}return c.default=H,Object.freeze(c)}const Z=Q(D),s="transitionend",p=H=>{let c=H.getAttribute("data-bs-target");if(!c||"#"===c){let B=H.getAttribute("href");if(!B||!B.includes("#")&&!B.startsWith("."))return null;B.includes("#")&&!B.startsWith("#")&&(B=`#${B.split("#")[1]}`),c=B&&"#"!==B?B.trim():null}return c},n=H=>{const c=p(H);return c&&document.querySelector(c)?c:null},v=H=>{const c=p(H);return c?document.querySelector(c):null},u=H=>{H.dispatchEvent(new Event(s))},o=H=>!(!H||"object"!=typeof H)&&(void 0!==H.jquery&&(H=H[0]),void 0!==H.nodeType),g=H=>o(H)?H.jquery?H[0]:H:"string"==typeof H&&H.length>0?document.querySelector(H):null,C=H=>{if(!o(H)||0===H.getClientRects().length)return!1;const c="visible"===getComputedStyle(H).getPropertyValue("visibility"),B=H.closest("details:not([open])");if(!B)return c;if(B!==H){const F=H.closest("summary");if(F&&F.parentNode!==B||null===F)return!1}return c},_=H=>!(H&&H.nodeType===Node.ELEMENT_NODE&&!H.classList.contains("disabled"))||(void 0!==H.disabled?H.disabled:H.hasAttribute("disabled")&&"false"!==H.getAttribute("disabled")),b=H=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof H.getRootNode){const c=H.getRootNode();return c instanceof ShadowRoot?c:null}return H instanceof ShadowRoot?H:H.parentNode?b(H.parentNode):null},E=()=>{},L=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,P=[],y=()=>"rtl"===document.documentElement.dir,e=H=>{(H=>{"loading"===document.readyState?(P.length||document.addEventListener("DOMContentLoaded",()=>{for(const c of P)c()}),P.push(H)):H()})(()=>{const c=L();if(c){const B=H.NAME,F=c.fn[B];c.fn[B]=H.jQueryInterface,c.fn[B].Constructor=H,c.fn[B].noConflict=()=>(c.fn[B]=F,H.jQueryInterface)}})},A=H=>{"function"==typeof H&&H()},R=(H,c,B=!0)=>{if(!B)return void A(H);const J=(H=>{if(!H)return 0;let{transitionDuration:c,transitionDelay:B}=window.getComputedStyle(H);const F=Number.parseFloat(c),J=Number.parseFloat(B);return F||J?(c=c.split(",")[0],B=B.split(",")[0],1e3*(Number.parseFloat(c)+Number.parseFloat(B))):0})(c)+5;let at=!1;const st=({target:ft})=>{ft===c&&(at=!0,c.removeEventListener(s,st),A(H))};c.addEventListener(s,st),setTimeout(()=>{at||u(c)},J)},a=(H,c,B,F)=>{const J=H.length;let at=H.indexOf(c);return-1===at?!B&&F?H[J-1]:H[0]:(at+=B?1:-1,F&&(at=(at+J)%J),H[Math.max(0,Math.min(at,J-1))])},S=/[^.]*(?=\..*)\.|.*/,i=/\..*/,l=/::\d+$/,h={};let I=1;const N={mouseenter:"mouseover",mouseleave:"mouseout"},U=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function W(H,c){return c&&`${c}::${I++}`||H.uidEvent||I++}function Y(H){const c=W(H);return H.uidEvent=c,h[c]=h[c]||{},h[c]}function $(H,c,B=null){return Object.values(H).find(F=>F.callable===c&&F.delegationSelector===B)}function z(H,c,B){const F="string"==typeof c,J=F?B:c||B;let at=T(H);return U.has(at)||(at=H),[F,J,at]}function w(H,c,B,F,J){if("string"!=typeof c||!H)return;let[at,st,ft]=z(c,B,F);var ta;c in N&&(ta=st,st=function(de){if(!de.relatedTarget||de.relatedTarget!==de.delegateTarget&&!de.delegateTarget.contains(de.relatedTarget))return ta.call(this,de)});const Kt=Y(H),Ht=Kt[ft]||(Kt[ft]={}),_t=$(Ht,st,at?B:null);if(_t)return void(_t.oneOff=_t.oneOff&&J);const jt=W(st,c.replace(S,"")),qt=at?function q(H,c,B){return function F(J){const at=H.querySelectorAll(c);for(let{target:st}=J;st&&st!==this;st=st.parentNode)for(const ft of at)if(ft===st)return M(J,{delegateTarget:st}),F.oneOff&&O.off(H,J.type,c,B),B.apply(st,[J])}}(H,B,st):function et(H,c){return function B(F){return M(F,{delegateTarget:H}),B.oneOff&&O.off(H,F.type,c),c.apply(H,[F])}}(H,st);qt.delegationSelector=at?B:null,qt.callable=st,qt.oneOff=J,qt.uidEvent=jt,Ht[jt]=qt,H.addEventListener(ft,qt,at)}function x(H,c,B,F,J){const at=$(c[B],F,J);!at||(H.removeEventListener(B,at,Boolean(J)),delete c[B][at.uidEvent])}function ot(H,c,B,F){const J=c[B]||{};for(const at of Object.keys(J))if(at.includes(F)){const st=J[at];x(H,c,B,st.callable,st.delegationSelector)}}function T(H){return H=H.replace(i,""),N[H]||H}const O={on(H,c,B,F){w(H,c,B,F,!1)},one(H,c,B,F){w(H,c,B,F,!0)},off(H,c,B,F){if("string"!=typeof c||!H)return;const[J,at,st]=z(c,B,F),ft=st!==c,Kt=Y(H),Ht=Kt[st]||{},_t=c.startsWith(".");if(void 0===at){if(_t)for(const jt of Object.keys(Kt))ot(H,Kt,jt,c.slice(1));for(const jt of Object.keys(Ht)){const qt=jt.replace(l,"");if(!ft||c.includes(qt)){const Ce=Ht[jt];x(H,Kt,st,Ce.callable,Ce.delegationSelector)}}}else{if(!Object.keys(Ht).length)return;x(H,Kt,st,at,J?B:null)}},trigger(H,c,B){if("string"!=typeof c||!H)return null;const F=L();let st=null,ft=!0,Kt=!0,Ht=!1;c!==T(c)&&F&&(st=F.Event(c,B),F(H).trigger(st),ft=!st.isPropagationStopped(),Kt=!st.isImmediatePropagationStopped(),Ht=st.isDefaultPrevented());let _t=new Event(c,{bubbles:ft,cancelable:!0});return _t=M(_t,B),Ht&&_t.preventDefault(),Kt&&H.dispatchEvent(_t),_t.defaultPrevented&&st&&st.preventDefault(),_t}};function M(H,c){for(const[B,F]of Object.entries(c||{}))try{H[B]=F}catch(J){Object.defineProperty(H,B,{configurable:!0,get:()=>F})}return H}const K=new Map,G={set(H,c,B){K.has(H)||K.set(H,new Map);const F=K.get(H);F.has(c)||0===F.size?F.set(c,B):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(F.keys())[0]}.`)},get:(H,c)=>K.has(H)&&K.get(H).get(c)||null,remove(H,c){if(!K.has(H))return;const B=K.get(H);B.delete(c),0===B.size&&K.delete(H)}};function X(H){if("true"===H)return!0;if("false"===H)return!1;if(H===Number(H).toString())return Number(H);if(""===H||"null"===H)return null;if("string"!=typeof H)return H;try{return JSON.parse(decodeURIComponent(H))}catch(c){return H}}function j(H){return H.replace(/[A-Z]/g,c=>`-${c.toLowerCase()}`)}const tt={setDataAttribute(H,c,B){H.setAttribute(`data-bs-${j(c)}`,B)},removeDataAttribute(H,c){H.removeAttribute(`data-bs-${j(c)}`)},getDataAttributes(H){if(!H)return{};const c={},B=Object.keys(H.dataset).filter(F=>F.startsWith("bs")&&!F.startsWith("bsConfig"));for(const F of B){let J=F.replace(/^bs/,"");J=J.charAt(0).toLowerCase()+J.slice(1,J.length),c[J]=X(H.dataset[F])}return c},getDataAttribute:(H,c)=>X(H.getAttribute(`data-bs-${j(c)}`))};class rt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(c){return c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c}_mergeConfigObj(c,B){const F=o(B)?tt.getDataAttribute(B,"config"):{};return Mt(Mt(Mt(Mt({},this.constructor.Default),"object"==typeof F?F:{}),o(B)?tt.getDataAttributes(B):{}),"object"==typeof c?c:{})}_typeCheckConfig(c,B=this.constructor.DefaultType){for(const F of Object.keys(B)){const J=B[F],at=c[F],st=o(at)?"element":null==(H=at)?`${H}`:Object.prototype.toString.call(H).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(J).test(st))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${F}" provided type "${st}" but expected type "${J}".`)}var H}}class it extends rt{constructor(c,B){super(),(c=g(c))&&(this._element=c,this._config=this._getConfig(B),G.set(this._element,this.constructor.DATA_KEY,this))}dispose(){G.remove(this._element,this.constructor.DATA_KEY),O.off(this._element,this.constructor.EVENT_KEY);for(const c of Object.getOwnPropertyNames(this))this[c]=null}_queueCallback(c,B,F=!0){R(c,B,F)}_getConfig(c){return c=this._mergeConfigObj(c,this._element),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}static getInstance(c){return G.get(g(c),this.DATA_KEY)}static getOrCreateInstance(c,B={}){return this.getInstance(c)||new this(c,"object"==typeof B?B:null)}static get VERSION(){return"5.2.2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(c){return`${c}${this.EVENT_KEY}`}}const lt=(H,c="hide")=>{const F=H.NAME;O.on(document,`click.dismiss${H.EVENT_KEY}`,`[data-bs-dismiss="${F}"]`,function(J){if(["A","AREA"].includes(this.tagName)&&J.preventDefault(),_(this))return;const at=v(this)||this.closest(`.${F}`);H.getOrCreateInstance(at)[c]()})},ut=".bs.alert",gt=`close${ut}`,Ct=`closed${ut}`;class vt extends it{static get NAME(){return"alert"}close(){if(O.trigger(this._element,gt).defaultPrevented)return;this._element.classList.remove("show");const B=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,B)}_destroyElement(){this._element.remove(),O.trigger(this._element,Ct),this.dispose()}static jQueryInterface(c){return this.each(function(){const B=vt.getOrCreateInstance(this);if("string"==typeof c){if(void 0===B[c]||c.startsWith("_")||"constructor"===c)throw new TypeError(`No method named "${c}"`);B[c](this)}})}}lt(vt,"close"),e(vt);const Xt='[data-bs-toggle="button"]';class zt extends it{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(c){return this.each(function(){const B=zt.getOrCreateInstance(this);"toggle"===c&&B[c]()})}}O.on(document,"click.bs.button.data-api",Xt,H=>{H.preventDefault();const c=H.target.closest(Xt);zt.getOrCreateInstance(c).toggle()}),e(zt);const ht={find:(H,c=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(c,H)),findOne:(H,c=document.documentElement)=>Element.prototype.querySelector.call(c,H),children:(H,c)=>[].concat(...H.children).filter(B=>B.matches(c)),parents(H,c){const B=[];let F=H.parentNode.closest(c);for(;F;)B.push(F),F=F.parentNode.closest(c);return B},prev(H,c){let B=H.previousElementSibling;for(;B;){if(B.matches(c))return[B];B=B.previousElementSibling}return[]},next(H,c){let B=H.nextElementSibling;for(;B;){if(B.matches(c))return[B];B=B.nextElementSibling}return[]},focusableChildren(H){const c=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(B=>`${B}:not([tabindex^="-"])`).join(",");return this.find(c,H).filter(B=>!_(B)&&C(B))}},mt=".bs.swipe",St=`touchstart${mt}`,At=`touchmove${mt}`,It=`touchend${mt}`,wt=`pointerdown${mt}`,Bt=`pointerup${mt}`,Dt={endCallback:null,leftCallback:null,rightCallback:null},Ot={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Et extends rt{constructor(c,B){super(),this._element=c,c&&Et.isSupported()&&(this._config=this._getConfig(B),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Dt}static get DefaultType(){return Ot}static get NAME(){return"swipe"}dispose(){O.off(this._element,mt)}_start(c){this._supportPointerEvents?this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX):this._deltaX=c.touches[0].clientX}_end(c){this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX-this._deltaX),this._handleSwipe(),A(this._config.endCallback)}_move(c){this._deltaX=c.touches&&c.touches.length>1?0:c.touches[0].clientX-this._deltaX}_handleSwipe(){const c=Math.abs(this._deltaX);if(c<=40)return;const B=c/this._deltaX;this._deltaX=0,B&&A(B>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(O.on(this._element,wt,c=>this._start(c)),O.on(this._element,Bt,c=>this._end(c)),this._element.classList.add("pointer-event")):(O.on(this._element,St,c=>this._start(c)),O.on(this._element,At,c=>this._move(c)),O.on(this._element,It,c=>this._end(c)))}_eventIsPointerPenTouch(c){return this._supportPointerEvents&&("pen"===c.pointerType||"touch"===c.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const yt=".bs.carousel",Ge=".data-api",ge="next",oe="prev",ce="left",_e="right",Ur=`slide${yt}`,De=`slid${yt}`,Vr=`keydown${yt}`,xr=`mouseenter${yt}`,Mr=`mouseleave${yt}`,Kr=`dragstart${yt}`,Hr=`load${yt}${Ge}`,Fr=`click${yt}${Ge}`,ze="carousel",Te="active",Jr={ArrowLeft:_e,ArrowRight:ce},tn={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},en={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class le extends it{constructor(c,B){super(c,B),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ht.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ze&&this.cycle()}static get Default(){return tn}static get DefaultType(){return en}static get NAME(){return"carousel"}next(){this._slide(ge)}nextWhenVisible(){!document.hidden&&C(this._element)&&this.next()}prev(){this._slide(oe)}pause(){this._isSliding&&u(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding)return void O.one(this._element,De,()=>this.cycle());this.cycle()}}to(c){const B=this._getItems();if(c>B.length-1||c<0)return;if(this._isSliding)return void O.one(this._element,De,()=>this.to(c));const F=this._getItemIndex(this._getActive());F!==c&&this._slide(c>F?ge:oe,B[c])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(c){return c.defaultInterval=c.interval,c}_addEventListeners(){this._config.keyboard&&O.on(this._element,Vr,c=>this._keydown(c)),"hover"===this._config.pause&&(O.on(this._element,xr,()=>this.pause()),O.on(this._element,Mr,()=>this._maybeEnableCycle())),this._config.touch&&Et.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const F of ht.find(".carousel-item img",this._element))O.on(F,Kr,J=>J.preventDefault());this._swipeHelper=new Et(this._element,{leftCallback:()=>this._slide(this._directionToOrder(ce)),rightCallback:()=>this._slide(this._directionToOrder(_e)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(c){if(/input|textarea/i.test(c.target.tagName))return;const B=Jr[c.key];B&&(c.preventDefault(),this._slide(this._directionToOrder(B)))}_getItemIndex(c){return this._getItems().indexOf(c)}_setActiveIndicatorElement(c){if(!this._indicatorsElement)return;const B=ht.findOne(".active",this._indicatorsElement);B.classList.remove(Te),B.removeAttribute("aria-current");const F=ht.findOne(`[data-bs-slide-to="${c}"]`,this._indicatorsElement);F&&(F.classList.add(Te),F.setAttribute("aria-current","true"))}_updateInterval(){const c=this._activeElement||this._getActive();if(!c)return;const B=Number.parseInt(c.getAttribute("data-bs-interval"),10);this._config.interval=B||this._config.defaultInterval}_slide(c,B=null){if(this._isSliding)return;const F=this._getActive(),J=c===ge,at=B||a(this._getItems(),F,J,this._config.wrap);if(at===F)return;const st=this._getItemIndex(at),ft=Ce=>O.trigger(this._element,Ce,{relatedTarget:at,direction:this._orderToDirection(c),from:this._getItemIndex(F),to:st});if(ft(Ur).defaultPrevented||!F||!at)return;const Ht=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(st),this._activeElement=at;const _t=J?"carousel-item-start":"carousel-item-end",jt=J?"carousel-item-next":"carousel-item-prev";at.classList.add(jt),F.classList.add(_t),at.classList.add(_t),this._queueCallback(()=>{at.classList.remove(_t,jt),at.classList.add(Te),F.classList.remove(Te,jt,_t),this._isSliding=!1,ft(De)},F,this._isAnimated()),Ht&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ht.findOne(".active.carousel-item",this._element)}_getItems(){return ht.find(".carousel-item",this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(c){return y()?c===ce?oe:ge:c===ce?ge:oe}_orderToDirection(c){return y()?c===oe?ce:_e:c===oe?_e:ce}static jQueryInterface(c){return this.each(function(){const B=le.getOrCreateInstance(this,c);if("number"!=typeof c){if("string"==typeof c){if(void 0===B[c]||c.startsWith("_")||"constructor"===c)throw new TypeError(`No method named "${c}"`);B[c]()}}else B.to(c)})}}O.on(document,Fr,"[data-bs-slide], [data-bs-slide-to]",function(H){const c=v(this);if(!c||!c.classList.contains(ze))return;H.preventDefault();const B=le.getOrCreateInstance(c),F=this.getAttribute("data-bs-slide-to");return F?(B.to(F),void B._maybeEnableCycle()):"next"===tt.getDataAttribute(this,"slide")?(B.next(),void B._maybeEnableCycle()):(B.prev(),void B._maybeEnableCycle())}),O.on(window,Hr,()=>{const H=ht.find('[data-bs-ride="carousel"]');for(const c of H)le.getOrCreateInstance(c)}),e(le);const ye=".bs.collapse",sn=`show${ye}`,an=`shown${ye}`,on=`hide${ye}`,cn=`hidden${ye}`,ln=`click${ye}.data-api`,Oe="show",ue="collapse",be="collapsing",hn=`:scope .${ue} .${ue}`,Pe='[data-bs-toggle="collapse"]',yn={parent:null,toggle:!0},mn={parent:"(null|element)",toggle:"boolean"};class he extends it{constructor(c,B){super(c,B),this._isTransitioning=!1,this._triggerArray=[];const F=ht.find(Pe);for(const J of F){const at=n(J),st=ht.find(at).filter(ft=>ft===this._element);null!==at&&st.length&&this._triggerArray.push(J)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return yn}static get DefaultType(){return mn}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let c=[];if(this._config.parent&&(c=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(ft=>ft!==this._element).map(ft=>he.getOrCreateInstance(ft,{toggle:!1}))),c.length&&c[0]._isTransitioning||O.trigger(this._element,sn).defaultPrevented)return;for(const ft of c)ft.hide();const F=this._getDimension();this._element.classList.remove(ue),this._element.classList.add(be),this._element.style[F]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const st=`scroll${F[0].toUpperCase()+F.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(be),this._element.classList.add(ue,Oe),this._element.style[F]="",O.trigger(this._element,an)},this._element,!0),this._element.style[F]=`${this._element[st]}px`}hide(){if(this._isTransitioning||!this._isShown()||O.trigger(this._element,on).defaultPrevented)return;const B=this._getDimension();this._element.style[B]=`${this._element.getBoundingClientRect()[B]}px`,this._element.classList.add(be),this._element.classList.remove(ue,Oe);for(const J of this._triggerArray){const at=v(J);at&&!this._isShown(at)&&this._addAriaAndCollapsedClass([J],!1)}this._isTransitioning=!0,this._element.style[B]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(be),this._element.classList.add(ue),O.trigger(this._element,cn)},this._element,!0)}_isShown(c=this._element){return c.classList.contains(Oe)}_configAfterMerge(c){return c.toggle=Boolean(c.toggle),c.parent=g(c.parent),c}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const c=this._getFirstLevelChildren(Pe);for(const B of c){const F=v(B);F&&this._addAriaAndCollapsedClass([B],this._isShown(F))}}_getFirstLevelChildren(c){const B=ht.find(hn,this._config.parent);return ht.find(c,this._config.parent).filter(F=>!B.includes(F))}_addAriaAndCollapsedClass(c,B){if(c.length)for(const F of c)F.classList.toggle("collapsed",!B),F.setAttribute("aria-expanded",B)}static jQueryInterface(c){const B={};return"string"==typeof c&&/show|hide/.test(c)&&(B.toggle=!1),this.each(function(){const F=he.getOrCreateInstance(this,B);if("string"==typeof c){if(void 0===F[c])throw new TypeError(`No method named "${c}"`);F[c]()}})}}O.on(document,ln,Pe,function(H){("A"===H.target.tagName||H.delegateTarget&&"A"===H.delegateTarget.tagName)&&H.preventDefault();const c=n(this),B=ht.find(c);for(const F of B)he.getOrCreateInstance(F,{toggle:!1}).toggle()}),e(he);const Qe="dropdown",Jt=".bs.dropdown",Ue=".data-api",En="ArrowUp",Ze="ArrowDown",_n=`hide${Jt}`,Tn=`hidden${Jt}`,bn=`show${Jt}`,Sn=`shown${Jt}`,Je=`click${Jt}${Ue}`,tr=`keydown${Jt}${Ue}`,An=`keyup${Jt}${Ue}`,pe="show",te='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ln=`${te}.show`,Se=".dropdown-menu",Pn=y()?"top-end":"top-start",Un=y()?"top-start":"top-end",Vn=y()?"bottom-end":"bottom-start",xn=y()?"bottom-start":"bottom-end",Mn=y()?"left-start":"right-start",Kn=y()?"right-start":"left-start",$n={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},jn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ft extends it{constructor(c,B){super(c,B),this._popper=null,this._parent=this._element.parentNode,this._menu=ht.next(this._element,Se)[0]||ht.prev(this._element,Se)[0]||ht.findOne(Se,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return $n}static get DefaultType(){return jn}static get NAME(){return Qe}toggle(){return this._isShown()?this.hide():this.show()}show(){if(_(this._element)||this._isShown())return;const c={relatedTarget:this._element};if(!O.trigger(this._element,bn,c).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const F of[].concat(...document.body.children))O.on(F,"mouseover",E);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(pe),this._element.classList.add(pe),O.trigger(this._element,Sn,c)}}hide(){!_(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(c){if(!O.trigger(this._element,_n,c).defaultPrevented){if("ontouchstart"in document.documentElement)for(const F of[].concat(...document.body.children))O.off(F,"mouseover",E);this._popper&&this._popper.destroy(),this._menu.classList.remove(pe),this._element.classList.remove(pe),this._element.setAttribute("aria-expanded","false"),tt.removeDataAttribute(this._menu,"popper"),O.trigger(this._element,Tn,c)}}_getConfig(c){if("object"==typeof(c=super._getConfig(c)).reference&&!o(c.reference)&&"function"!=typeof c.reference.getBoundingClientRect)throw new TypeError(`${Qe.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return c}_createPopper(){if(void 0===Z)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let c=this._element;"parent"===this._config.reference?c=this._parent:o(this._config.reference)?c=g(this._config.reference):"object"==typeof this._config.reference&&(c=this._config.reference);const B=this._getPopperConfig();this._popper=Z.createPopper(c,this._menu,B)}_isShown(){return this._menu.classList.contains(pe)}_getPlacement(){const c=this._parent;if(c.classList.contains("dropend"))return Mn;if(c.classList.contains("dropstart"))return Kn;if(c.classList.contains("dropup-center"))return"top";if(c.classList.contains("dropdown-center"))return"bottom";const B="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return c.classList.contains("dropup")?B?Un:Pn:B?xn:Vn}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:c}=this._config;return"string"==typeof c?c.split(",").map(B=>Number.parseInt(B,10)):"function"==typeof c?B=>c(B,this._element):c}_getPopperConfig(){const c={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(tt.setDataAttribute(this._menu,"popper","static"),c.modifiers=[{name:"applyStyles",enabled:!1}]),Mt(Mt({},c),"function"==typeof this._config.popperConfig?this._config.popperConfig(c):this._config.popperConfig)}_selectMenuItem({key:c,target:B}){const F=ht.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(J=>C(J));!F.length||a(F,B,c===Ze,!F.includes(B)).focus()}static jQueryInterface(c){return this.each(function(){const B=Ft.getOrCreateInstance(this,c);if("string"==typeof c){if(void 0===B[c])throw new TypeError(`No method named "${c}"`);B[c]()}})}static clearMenus(c){if(2===c.button||"keyup"===c.type&&"Tab"!==c.key)return;const B=ht.find(Ln);for(const F of B){const J=Ft.getInstance(F);if(!J||!1===J._config.autoClose)continue;const at=c.composedPath(),st=at.includes(J._menu);if(at.includes(J._element)||"inside"===J._config.autoClose&&!st||"outside"===J._config.autoClose&&st||J._menu.contains(c.target)&&("keyup"===c.type&&"Tab"===c.key||/input|select|option|textarea|form/i.test(c.target.tagName)))continue;const ft={relatedTarget:J._element};"click"===c.type&&(ft.clickEvent=c),J._completeHide(ft)}}static dataApiKeydownHandler(c){const B=/input|textarea/i.test(c.target.tagName),F="Escape"===c.key,J=[En,Ze].includes(c.key);if(!J&&!F||B&&!F)return;c.preventDefault();const at=this.matches(te)?this:ht.prev(this,te)[0]||ht.next(this,te)[0]||ht.findOne(te,c.delegateTarget.parentNode),st=Ft.getOrCreateInstance(at);if(J)return c.stopPropagation(),st.show(),void st._selectMenuItem(c);st._isShown()&&(c.stopPropagation(),st.hide(),at.focus())}}O.on(document,tr,te,Ft.dataApiKeydownHandler),O.on(document,tr,Se,Ft.dataApiKeydownHandler),O.on(document,Je,Ft.clearMenus),O.on(document,An,Ft.clearMenus),O.on(document,Je,te,function(H){H.preventDefault(),Ft.getOrCreateInstance(this).toggle()}),e(Ft);const er=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",rr=".sticky-top",Ae="padding-right",nr="margin-right";class Ve{constructor(){this._element=document.body}getWidth(){const c=document.documentElement.clientWidth;return Math.abs(window.innerWidth-c)}hide(){const c=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ae,B=>B+c),this._setElementAttributes(er,Ae,B=>B+c),this._setElementAttributes(rr,nr,B=>B-c)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ae),this._resetElementAttributes(er,Ae),this._resetElementAttributes(rr,nr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(c,B,F){const J=this.getWidth();this._applyManipulationCallback(c,st=>{if(st!==this._element&&window.innerWidth>st.clientWidth+J)return;this._saveInitialAttribute(st,B);const ft=window.getComputedStyle(st).getPropertyValue(B);st.style.setProperty(B,`${F(Number.parseFloat(ft))}px`)})}_saveInitialAttribute(c,B){const F=c.style.getPropertyValue(B);F&&tt.setDataAttribute(c,B,F)}_resetElementAttributes(c,B){this._applyManipulationCallback(c,J=>{const at=tt.getDataAttribute(J,B);null!==at?(tt.removeDataAttribute(J,B),J.style.setProperty(B,at)):J.style.removeProperty(B)})}_applyManipulationCallback(c,B){if(o(c))B(c);else for(const F of ht.find(c,this._element))B(F)}}const ir="backdrop",ar=`mousedown.bs.${ir}`,Gn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},zn={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class or extends rt{constructor(c){super(),this._config=this._getConfig(c),this._isAppended=!1,this._element=null}static get Default(){return Gn}static get DefaultType(){return zn}static get NAME(){return ir}show(c){if(!this._config.isVisible)return void A(c);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{A(c)})}hide(c){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),A(c)})):A(c)}dispose(){!this._isAppended||(O.off(this._element,ar),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const c=document.createElement("div");c.className=this._config.className,this._config.isAnimated&&c.classList.add("fade"),this._element=c}return this._element}_configAfterMerge(c){return c.rootElement=g(c.rootElement),c}_append(){if(this._isAppended)return;const c=this._getElement();this._config.rootElement.append(c),O.on(c,ar,()=>{A(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(c){R(c,this._getElement(),this._config.isAnimated)}}const Ie=".bs.focustrap",Yn=`focusin${Ie}`,Qn=`keydown.tab${Ie}`,cr="backward",Jn={autofocus:!0,trapElement:null},ti={autofocus:"boolean",trapElement:"element"};class lr extends rt{constructor(c){super(),this._config=this._getConfig(c),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Jn}static get DefaultType(){return ti}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),O.off(document,Ie),O.on(document,Yn,c=>this._handleFocusin(c)),O.on(document,Qn,c=>this._handleKeydown(c)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,O.off(document,Ie))}_handleFocusin(c){const{trapElement:B}=this._config;if(c.target===document||c.target===B||B.contains(c.target))return;const F=ht.focusableChildren(B);0===F.length?B.focus():this._lastTabNavDirection===cr?F[F.length-1].focus():F[0].focus()}_handleKeydown(c){"Tab"===c.key&&(this._lastTabNavDirection=c.shiftKey?cr:"forward")}}const $t=".bs.modal",ii=`hide${$t}`,si=`hidePrevented${$t}`,ur=`hidden${$t}`,hr=`show${$t}`,ai=`shown${$t}`,oi=`resize${$t}`,ci=`click.dismiss${$t}`,li=`mousedown.dismiss${$t}`,ui=`keydown.dismiss${$t}`,hi=`click${$t}.data-api`,pr="modal-open",xe="modal-static",mi={backdrop:!0,focus:!0,keyboard:!0},vi={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ee extends it{constructor(c,B){super(c,B),this._dialog=ht.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ve,this._addEventListeners()}static get Default(){return mi}static get DefaultType(){return vi}static get NAME(){return"modal"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||this._isTransitioning||O.trigger(this._element,hr,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(pr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(c)))}hide(){!this._isShown||this._isTransitioning||O.trigger(this._element,ii).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const c of[window,this._dialog])O.off(c,$t);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new or({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new lr({trapElement:this._element})}_showElement(c){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const B=ht.findOne(".modal-body",this._dialog);B&&(B.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,O.trigger(this._element,ai,{relatedTarget:c})},this._dialog,this._isAnimated())}_addEventListeners(){O.on(this._element,ui,c=>{if("Escape"===c.key){if(this._config.keyboard)return c.preventDefault(),void this.hide();this._triggerBackdropTransition()}}),O.on(window,oi,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),O.on(this._element,li,c=>{O.one(this._element,ci,B=>{if(this._element===c.target&&this._element===B.target){if("static"===this._config.backdrop)return void this._triggerBackdropTransition();this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(pr),this._resetAdjustments(),this._scrollBar.reset(),O.trigger(this._element,ur)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(O.trigger(this._element,si).defaultPrevented)return;const B=this._element.scrollHeight>document.documentElement.clientHeight,F=this._element.style.overflowY;"hidden"===F||this._element.classList.contains(xe)||(B||(this._element.style.overflowY="hidden"),this._element.classList.add(xe),this._queueCallback(()=>{this._element.classList.remove(xe),this._queueCallback(()=>{this._element.style.overflowY=F},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const c=this._element.scrollHeight>document.documentElement.clientHeight,B=this._scrollBar.getWidth(),F=B>0;if(F&&!c){const J=y()?"paddingLeft":"paddingRight";this._element.style[J]=`${B}px`}if(!F&&c){const J=y()?"paddingRight":"paddingLeft";this._element.style[J]=`${B}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(c,B){return this.each(function(){const F=ee.getOrCreateInstance(this,c);if("string"==typeof c){if(void 0===F[c])throw new TypeError(`No method named "${c}"`);F[c](B)}})}}O.on(document,hi,'[data-bs-toggle="modal"]',function(H){const c=v(this);["A","AREA"].includes(this.tagName)&&H.preventDefault(),O.one(c,hr,J=>{J.defaultPrevented||O.one(c,ur,()=>{C(this)&&this.focus()})});const B=ht.findOne(".modal.show");B&&ee.getInstance(B).hide(),ee.getOrCreateInstance(c).toggle(this)}),lt(ee),e(ee);const Wt=".bs.offcanvas",dr=".data-api",Ci=`load${Wt}${dr}`,yr="showing",vr=".offcanvas.show",bi=`show${Wt}`,Si=`shown${Wt}`,Ai=`hide${Wt}`,Er=`hidePrevented${Wt}`,Cr=`hidden${Wt}`,Ii=`resize${Wt}`,wi=`click${Wt}${dr}`,Bi=`keydown.dismiss${Wt}`,ki={backdrop:!0,keyboard:!0,scroll:!1},Li={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Yt extends it{constructor(c,B){super(c,B),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ki}static get DefaultType(){return Li}static get NAME(){return"offcanvas"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||O.trigger(this._element,bi,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Ve).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(yr),this._queueCallback(()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(yr),O.trigger(this._element,Si,{relatedTarget:c})},this._element,!0))}hide(){this._isShown&&!O.trigger(this._element,Ai).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Ve).reset(),O.trigger(this._element,Cr)},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const B=Boolean(this._config.backdrop);return new or({className:"offcanvas-backdrop",isVisible:B,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:B?()=>{"static"!==this._config.backdrop?this.hide():O.trigger(this._element,Er)}:null})}_initializeFocusTrap(){return new lr({trapElement:this._element})}_addEventListeners(){O.on(this._element,Bi,c=>{if("Escape"===c.key){if(!this._config.keyboard)return void O.trigger(this._element,Er);this.hide()}})}static jQueryInterface(c){return this.each(function(){const B=Yt.getOrCreateInstance(this,c);if("string"==typeof c){if(void 0===B[c]||c.startsWith("_")||"constructor"===c)throw new TypeError(`No method named "${c}"`);B[c](this)}})}}O.on(document,wi,'[data-bs-toggle="offcanvas"]',function(H){const c=v(this);if(["A","AREA"].includes(this.tagName)&&H.preventDefault(),_(this))return;O.one(c,Cr,()=>{C(this)&&this.focus()});const B=ht.findOne(vr);B&&B!==c&&Yt.getInstance(B).hide(),Yt.getOrCreateInstance(c).toggle(this)}),O.on(window,Ci,()=>{for(const H of ht.find(vr))Yt.getOrCreateInstance(H).show()}),O.on(window,Ii,()=>{for(const H of ht.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(H).position&&Yt.getOrCreateInstance(H).hide()}),lt(Yt),e(Yt);const Ri=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Oi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Pi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Ui=(H,c)=>{const B=H.nodeName.toLowerCase();return c.includes(B)?!Ri.has(B)||Boolean(Oi.test(H.nodeValue)||Pi.test(H.nodeValue)):c.filter(F=>F instanceof RegExp).some(F=>F.test(B))},_r={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Mi={allowList:_r,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ki={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Hi={entry:"(string|element|function|null)",selector:"(string|element)"};class Fi extends rt{constructor(c){super(),this._config=this._getConfig(c)}static get Default(){return Mi}static get DefaultType(){return Ki}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(c=>this._resolvePossibleFunction(c)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(c){return this._checkContent(c),this._config.content=Mt(Mt({},this._config.content),c),this}toHtml(){const c=document.createElement("div");c.innerHTML=this._maybeSanitize(this._config.template);for(const[J,at]of Object.entries(this._config.content))this._setContent(c,at,J);const B=c.children[0],F=this._resolvePossibleFunction(this._config.extraClass);return F&&B.classList.add(...F.split(" ")),B}_typeCheckConfig(c){super._typeCheckConfig(c),this._checkContent(c.content)}_checkContent(c){for(const[B,F]of Object.entries(c))super._typeCheckConfig({selector:B,entry:F},Hi)}_setContent(c,B,F){const J=ht.findOne(F,c);if(J){if(!(B=this._resolvePossibleFunction(B)))return void J.remove();if(o(B))return void this._putElementInTemplate(g(B),J);if(this._config.html)return void(J.innerHTML=this._maybeSanitize(B));J.textContent=B}}_maybeSanitize(c){return this._config.sanitize?function Vi(H,c,B){if(!H.length)return H;if(B&&"function"==typeof B)return B(H);const J=(new window.DOMParser).parseFromString(H,"text/html"),at=[].concat(...J.body.querySelectorAll("*"));for(const st of at){const ft=st.nodeName.toLowerCase();if(!Object.keys(c).includes(ft)){st.remove();continue}const Kt=[].concat(...st.attributes),Ht=[].concat(c["*"]||[],c[ft]||[]);for(const _t of Kt)Ui(_t,Ht)||st.removeAttribute(_t.nodeName)}return J.body.innerHTML}(c,this._config.allowList,this._config.sanitizeFn):c}_resolvePossibleFunction(c){return"function"==typeof c?c(this):c}_putElementInTemplate(c,B){if(this._config.html)return B.innerHTML="",void B.append(c);B.textContent=c.textContent}}const ji=new Set(["sanitize","allowList","sanitizeFn"]),Me="fade",we="show",br="hide.bs.modal",me="hover",Ke="focus",ss={AUTO:"auto",TOP:"top",RIGHT:y()?"left":"right",BOTTOM:"bottom",LEFT:y()?"right":"left"},as={allowList:_r,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},os={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class re extends it{constructor(c,B){if(void 0===Z)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(c,B),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return as}static get DefaultType(){return os}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown())return void this._leave();this._enter()}}dispose(){clearTimeout(this._timeout),O.off(this._element.closest(".modal"),br,this._hideModalHandler),this.tip&&this.tip.remove(),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const c=O.trigger(this._element,this.constructor.eventName("show")),F=(b(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(c.defaultPrevented||!F)return;this.tip&&(this.tip.remove(),this.tip=null);const J=this._getTipElement();this._element.setAttribute("aria-describedby",J.getAttribute("id"));const{container:at}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(at.append(J),O.trigger(this._element,this.constructor.eventName("inserted"))),this._popper?this._popper.update():this._popper=this._createPopper(J),J.classList.add(we),"ontouchstart"in document.documentElement)for(const ft of[].concat(...document.body.children))O.on(ft,"mouseover",E);this._queueCallback(()=>{O.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(!this._isShown()||O.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented)return;const B=this._getTipElement();if(B.classList.remove(we),"ontouchstart"in document.documentElement)for(const J of[].concat(...document.body.children))O.off(J,"mouseover",E);this._activeTrigger.click=!1,this._activeTrigger[Ke]=!1,this._activeTrigger[me]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||B.remove(),this._element.removeAttribute("aria-describedby"),O.trigger(this._element,this.constructor.eventName("hidden")),this._disposePopper())},this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(c){const B=this._getTemplateFactory(c).toHtml();if(!B)return null;B.classList.remove(Me,we),B.classList.add(`bs-${this.constructor.NAME}-auto`);const F=(H=>{do{H+=Math.floor(1e6*Math.random())}while(document.getElementById(H));return H})(this.constructor.NAME).toString();return B.setAttribute("id",F),this._isAnimated()&&B.classList.add(Me),B}setContent(c){this._newContent=c,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(c){return this._templateFactory?this._templateFactory.changeContent(c):this._templateFactory=new Fi(Le(Mt({},this._config),{content:c,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(c){return this.constructor.getOrCreateInstance(c.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Me)}_isShown(){return this.tip&&this.tip.classList.contains(we)}_createPopper(c){const B="function"==typeof this._config.placement?this._config.placement.call(this,c,this._element):this._config.placement,F=ss[B.toUpperCase()];return Z.createPopper(this._element,c,this._getPopperConfig(F))}_getOffset(){const{offset:c}=this._config;return"string"==typeof c?c.split(",").map(B=>Number.parseInt(B,10)):"function"==typeof c?B=>c(B,this._element):c}_resolvePossibleFunction(c){return"function"==typeof c?c.call(this._element):c}_getPopperConfig(c){const B={placement:c,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:F=>{this._getTipElement().setAttribute("data-popper-placement",F.state.placement)}}]};return Mt(Mt({},B),"function"==typeof this._config.popperConfig?this._config.popperConfig(B):this._config.popperConfig)}_setListeners(){const c=this._config.trigger.split(" ");for(const B of c)if("click"===B)O.on(this._element,this.constructor.eventName("click"),this._config.selector,F=>{this._initializeOnDelegatedTarget(F).toggle()});else if("manual"!==B){const F=this.constructor.eventName(B===me?"mouseenter":"focusin"),J=this.constructor.eventName(B===me?"mouseleave":"focusout");O.on(this._element,F,this._config.selector,at=>{const st=this._initializeOnDelegatedTarget(at);st._activeTrigger["focusin"===at.type?Ke:me]=!0,st._enter()}),O.on(this._element,J,this._config.selector,at=>{const st=this._initializeOnDelegatedTarget(at);st._activeTrigger["focusout"===at.type?Ke:me]=st._element.contains(at.relatedTarget),st._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},O.on(this._element.closest(".modal"),br,this._hideModalHandler)}_fixTitle(){const c=this._element.getAttribute("title");!c||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",c),this._element.setAttribute("data-bs-original-title",c),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(c,B){clearTimeout(this._timeout),this._timeout=setTimeout(c,B)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(c){const B=tt.getDataAttributes(this._element);for(const F of Object.keys(B))ji.has(F)&&delete B[F];return c=Mt(Mt({},B),"object"==typeof c&&c?c:{}),c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c.container=!1===c.container?document.body:g(c.container),"number"==typeof c.delay&&(c.delay={show:c.delay,hide:c.delay}),"number"==typeof c.title&&(c.title=c.title.toString()),"number"==typeof c.content&&(c.content=c.content.toString()),c}_getDelegateConfig(){const c={};for(const B in this._config)this.constructor.Default[B]!==this._config[B]&&(c[B]=this._config[B]);return c.selector=!1,c.trigger="manual",c}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(c){return this.each(function(){const B=re.getOrCreateInstance(this,c);if("string"==typeof c){if(void 0===B[c])throw new TypeError(`No method named "${c}"`);B[c]()}})}}e(re);const hs=Le(Mt({},re.Default),{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"}),ps=Le(Mt({},re.DefaultType),{content:"(null|string|element|function)"});class Be extends re{static get Default(){return hs}static get DefaultType(){return ps}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(c){return this.each(function(){const B=Be.getOrCreateInstance(this,c);if("string"==typeof c){if(void 0===B[c])throw new TypeError(`No method named "${c}"`);B[c]()}})}}e(Be);const He=".bs.scrollspy",gs=`activate${He}`,Sr=`click${He}`,ys=`load${He}.data-api`,fe="active",Fe="[href]",Ar=".nav-link",Cs=`${Ar}, .nav-item > ${Ar}, .list-group-item`,bs={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ss={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ve extends it{constructor(c,B){super(c,B),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return bs}static get DefaultType(){return Ss}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const c of this._observableSections.values())this._observer.observe(c)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(c){return c.target=g(c.target)||document.body,c.rootMargin=c.offset?`${c.offset}px 0px -30%`:c.rootMargin,"string"==typeof c.threshold&&(c.threshold=c.threshold.split(",").map(B=>Number.parseFloat(B))),c}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(O.off(this._config.target,Sr),O.on(this._config.target,Sr,Fe,c=>{const B=this._observableSections.get(c.target.hash);if(B){c.preventDefault();const F=this._rootElement||window,J=B.offsetTop-this._element.offsetTop;if(F.scrollTo)return void F.scrollTo({top:J,behavior:"smooth"});F.scrollTop=J}}))}_getNewObserver(){return new IntersectionObserver(B=>this._observerCallback(B),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(c){const B=st=>this._targetLinks.get(`#${st.target.id}`),F=st=>{this._previousScrollData.visibleEntryTop=st.target.offsetTop,this._process(B(st))},J=(this._rootElement||document.documentElement).scrollTop,at=J>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=J;for(const st of c){if(!st.isIntersecting){this._activeTarget=null,this._clearActiveClass(B(st));continue}const ft=st.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(at&&ft){if(F(st),!J)return}else!at&&!ft&&F(st)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const c=ht.find(Fe,this._config.target);for(const B of c){if(!B.hash||_(B))continue;const F=ht.findOne(B.hash,this._element);C(F)&&(this._targetLinks.set(B.hash,B),this._observableSections.set(B.hash,F))}}_process(c){this._activeTarget!==c&&(this._clearActiveClass(this._config.target),this._activeTarget=c,c.classList.add(fe),this._activateParents(c),O.trigger(this._element,gs,{relatedTarget:c}))}_activateParents(c){if(c.classList.contains("dropdown-item"))ht.findOne(".dropdown-toggle",c.closest(".dropdown")).classList.add(fe);else for(const B of ht.parents(c,".nav, .list-group"))for(const F of ht.prev(B,Cs))F.classList.add(fe)}_clearActiveClass(c){c.classList.remove(fe);const B=ht.find(`${Fe}.${fe}`,c);for(const F of B)F.classList.remove(fe)}static jQueryInterface(c){return this.each(function(){const B=ve.getOrCreateInstance(this,c);if("string"==typeof c){if(void 0===B[c]||c.startsWith("_")||"constructor"===c)throw new TypeError(`No method named "${c}"`);B[c]()}})}}O.on(window,ys,()=>{for(const H of ht.find('[data-bs-spy="scroll"]'))ve.getOrCreateInstance(H)}),e(ve);const ne=".bs.tab",Is=`hide${ne}`,ws=`hidden${ne}`,Bs=`show${ne}`,Ns=`shown${ne}`,ks=`click${ne}`,Ls=`keydown${ne}`,Rs=`load${ne}`,Ds="ArrowLeft",Ir="ArrowRight",Os="ArrowUp",wr="ArrowDown",ie="active",$e="show",je=":not(.dropdown-toggle)",Nr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',qe=`.nav-link${je}, .list-group-item${je}, [role="tab"]${je}, ${Nr}`,Hs=`.${ie}[data-bs-toggle="tab"], .${ie}[data-bs-toggle="pill"], .${ie}[data-bs-toggle="list"]`;class se extends it{constructor(c){super(c),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),O.on(this._element,Ls,B=>this._keydown(B)))}static get NAME(){return"tab"}show(){const c=this._element;if(this._elemIsActive(c))return;const B=this._getActiveElem(),F=B?O.trigger(B,Is,{relatedTarget:c}):null;O.trigger(c,Bs,{relatedTarget:B}).defaultPrevented||F&&F.defaultPrevented||(this._deactivate(B,c),this._activate(c,B))}_activate(c,B){c&&(c.classList.add(ie),this._activate(v(c)),this._queueCallback(()=>{"tab"===c.getAttribute("role")?(c.removeAttribute("tabindex"),c.setAttribute("aria-selected",!0),this._toggleDropDown(c,!0),O.trigger(c,Ns,{relatedTarget:B})):c.classList.add($e)},c,c.classList.contains("fade")))}_deactivate(c,B){c&&(c.classList.remove(ie),c.blur(),this._deactivate(v(c)),this._queueCallback(()=>{"tab"===c.getAttribute("role")?(c.setAttribute("aria-selected",!1),c.setAttribute("tabindex","-1"),this._toggleDropDown(c,!1),O.trigger(c,ws,{relatedTarget:B})):c.classList.remove($e)},c,c.classList.contains("fade")))}_keydown(c){if(![Ds,Ir,Os,wr].includes(c.key))return;c.stopPropagation(),c.preventDefault();const B=[Ir,wr].includes(c.key),F=a(this._getChildren().filter(J=>!_(J)),c.target,B,!0);F&&(F.focus({preventScroll:!0}),se.getOrCreateInstance(F).show())}_getChildren(){return ht.find(qe,this._parent)}_getActiveElem(){return this._getChildren().find(c=>this._elemIsActive(c))||null}_setInitialAttributes(c,B){this._setAttributeIfNotExists(c,"role","tablist");for(const F of B)this._setInitialAttributesOnChild(F)}_setInitialAttributesOnChild(c){c=this._getInnerElement(c);const B=this._elemIsActive(c),F=this._getOuterElement(c);c.setAttribute("aria-selected",B),F!==c&&this._setAttributeIfNotExists(F,"role","presentation"),B||c.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(c,"role","tab"),this._setInitialAttributesOnTargetPanel(c)}_setInitialAttributesOnTargetPanel(c){const B=v(c);!B||(this._setAttributeIfNotExists(B,"role","tabpanel"),c.id&&this._setAttributeIfNotExists(B,"aria-labelledby",`#${c.id}`))}_toggleDropDown(c,B){const F=this._getOuterElement(c);if(!F.classList.contains("dropdown"))return;const J=(at,st)=>{const ft=ht.findOne(at,F);ft&&ft.classList.toggle(st,B)};J(".dropdown-toggle",ie),J(".dropdown-menu",$e),F.setAttribute("aria-expanded",B)}_setAttributeIfNotExists(c,B,F){c.hasAttribute(B)||c.setAttribute(B,F)}_elemIsActive(c){return c.classList.contains(ie)}_getInnerElement(c){return c.matches(qe)?c:ht.findOne(qe,c)}_getOuterElement(c){return c.closest(".nav-item, .list-group-item")||c}static jQueryInterface(c){return this.each(function(){const B=se.getOrCreateInstance(this);if("string"==typeof c){if(void 0===B[c]||c.startsWith("_")||"constructor"===c)throw new TypeError(`No method named "${c}"`);B[c]()}})}}O.on(document,ks,Nr,function(H){["A","AREA"].includes(this.tagName)&&H.preventDefault(),!_(this)&&se.getOrCreateInstance(this).show()}),O.on(window,Rs,()=>{for(const H of ht.find(Hs))se.getOrCreateInstance(H)}),e(se);const Zt=".bs.toast",$s=`mouseover${Zt}`,js=`mouseout${Zt}`,qs=`focusin${Zt}`,Gs=`focusout${Zt}`,zs=`hide${Zt}`,Ws=`hidden${Zt}`,Ys=`show${Zt}`,Qs=`shown${Zt}`,Ne="show",ke="showing",Zs={animation:"boolean",autohide:"boolean",delay:"number"},Js={animation:!0,autohide:!0,delay:5e3};class Ee extends it{constructor(c,B){super(c,B),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Js}static get DefaultType(){return Zs}static get NAME(){return"toast"}show(){O.trigger(this._element,Ys).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Ne,ke),this._queueCallback(()=>{this._element.classList.remove(ke),O.trigger(this._element,Qs),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&!O.trigger(this._element,zs).defaultPrevented&&(this._element.classList.add(ke),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(ke,Ne),O.trigger(this._element,Ws)},this._element,this._config.animation))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ne),super.dispose()}isShown(){return this._element.classList.contains(Ne)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(c,B){switch(c.type){case"mouseover":case"mouseout":this._hasMouseInteraction=B;break;case"focusin":case"focusout":this._hasKeyboardInteraction=B}if(B)return void this._clearTimeout();const F=c.relatedTarget;this._element===F||this._element.contains(F)||this._maybeScheduleHide()}_setListeners(){O.on(this._element,$s,c=>this._onInteraction(c,!0)),O.on(this._element,js,c=>this._onInteraction(c,!1)),O.on(this._element,qs,c=>this._onInteraction(c,!0)),O.on(this._element,Gs,c=>this._onInteraction(c,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(c){return this.each(function(){const B=Ee.getOrCreateInstance(this,c);if("string"==typeof c){if(void 0===B[c])throw new TypeError(`No method named "${c}"`);B[c](this)}})}}return lt(Ee),e(Ee),{Alert:vt,Button:zt,Carousel:le,Collapse:he,Dropdown:Ft,Modal:ee,Offcanvas:Yt,Popover:Be,ScrollSpy:ve,Tab:se,Toast:Ee,Tooltip:re}});